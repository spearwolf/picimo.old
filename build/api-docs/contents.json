{ "ref": { "Picimo.App": { "name": "Picimo.App", "type": "programming-interface", "interfaces": [ { "name": "Picimo.App", "description": "This is your starting point.\n\nDer Anfang von allem. Das ist der __Main Controller__ deiner App.\nDer einfachste Weg eine App Instanz zu erzeugen ist mittels\n\n`let app = new Picimo.App;`\n\n#### Options are optional\n\nOptions werden einfach an den Constructor als erstes Argument überreicht ..\n\n`let app = new Picimo({ canvas: document.getElementById('myCanvas') });`\n\n#### Canvas Setup\n\nPicimo benötigt ein `<canvas>` Element zur Anzeige. Dieses kann mittels `canvas` option\noder einfach als ersten Parameter an den Constructor übergeben werden.\n\n`let app = new Picimo.App(myCanvas/* , options */);`\n\nWird kein Canvas angegeben, erzeugt die App instance einfach selbst einen eigenen Canvas.\nDieser wird unterhalb `document.body` eingehängt oder alternativ kann der Container mit der Option `appendTo` bestimmt werden.\n\nDieser automatisch erzeugte Canvas richtet seine Größe dynamisch an seinem Container Element (parentNode) aus.\nDer Container sollte also eine eigene Größe haben.\n\nIm Gegensatz dazu wird die Canvas Element Größe *niemals* von der App verändert,\nwenn ein schon bestehendes Canvas (zB. per `canvas` option) verwendet wird.\n\n#### Background (color/transparency)\n\nMit der Option `alpha: true` kann ein transparenter Canvas erzeugt werden. Mit `backgroundColor` kann alternativ\neine Hintergrundfarbe bestimmt werden.\n\n#### Events and State Changes\n\nWhile registering function callbacks with `app.on()` you can hook into the different app state changes\n(like *init*, *resize* or *renderFrame* .. )\n\n#### glx/gl/renderer states\n\nTODO\n\n#### assets/shader/texture/sprite factories/helpers\n\nTODO\n\n#### timing/frameNo state\n\nTODO\n\n#### scene graph root\n\nTODO\n\n#### plugin support\n\n- `App.on('create')`\n", "extends": "Picimo.events.CustomEvent", "attributes": [ { "name": "scene", "type": "Picimo.graph.Scene", "readonly": true, "description": "The *root* scene of the picimo scene graph." }, { "separator": true, "title": "time/frame info" }, { "name": "now", "type": "number", "description": "The number of seconds from application start.", "readonly": true }, { "name": "frameNo", "type": "number", "description": "The current frame number.", "readonly": true }, { "separator": true, "title": "Factories and helpers" }, { "name": "spriteFactory", "type": "Picimo.sprites.SpriteFactory", "readonly": true }, { "name": "texture", "type": "Picimo.render.TextureManager", "readonly": true }, { "name": "shader", "type": "Picimo.render.ShaderManager", "readonly": true }, { "name": "assetBaseUrl", "type": "string", "nullable": true, "description": "The base url for all assets. *Maybe* be undefined. The base url can be set via the __assetBaseUrl__\n*option* or via the global var `PICIMO_ASSET_BASE_URL` (will override the option).\nIf unspecified the base url will be calculated from `locaation.href`\n" }, { "separator": true, "title": "The webgl/rendering context" }, { "name": "canvas", "type": "HTMLCanvasElement", "readonly": true, "description": "The `<canvas>` dom element." }, { "name": "backgroundColor", "type": "Picimo.utils.Color", "description": "The default background color is _black_ or if you set the __alpha__ option then _transparent_ is used." }, { "name": "width", "type": "number", "readonly": true, "description": "The _device_ pixel width." }, { "name": "height", "type": "number", "readonly": true, "description": "The _device_ pixel height." }, { "name": "gl", "type": "WebGlRenderingContext", "description": "The webgl rendering context.", "readonly": true }, { "name": "glx", "type": "Picimo.render.WebGlContext", "readonly": true, "description": "A thin wrapper around the WebGlRenderingContext." }, { "name": "renderer", "type": "Picimo.render.WebGlRenderer", "readonly": true, "description": "The internal rendering context." } ], "functions": [ { "separator": true, "title": "Texture helpers" }, { "name": "loadTextureAtlas", "args": [ { "name": "url", "type": "string" } ], "returns": "Promise<picimo.core.textureatlas>" }, { "name": "loadTexture", "args": [ { "name": "url", "type": "string" } ], "returns": "Promise<picimo.core.texture>" }, { "separator": true, "title": "URL helpers" }, { "name": "getAssetUrl", "args": [ { "name": "url", "type": "string" } ], "returns": "string" }, { "name": "joinAssetUrl", "args": [ { "name": "baseUrl", "type": "string" }, { "name": "url", "type": "string" } ], "returns": "string" }, { "separator": true, "title": "sprites" }, { "name": "defineSprite", "args": [ { "name": "constructor", "type": "function" }, { "name": "options", "type": "object" }, { "name": "proto", "type": "object" } ], "returns": "Picimo.core.VertexObjectDescriptor" } ], "constructor": { "args": [ { "name": "canvas", "type": "HTMLCanvasElement", "nullable": true, "optional": true }, { "name": "options", "type": "Picimo.App.Options", "nullable": true, "optional": true } ] }, "events": [ { "name": "init", "description": "Will be called right after app creation time.\n" }, { "name": "resize", "description": "Canvas resized.\n" }, { "name": "frameBegin", "description": "The frame begins.\n" }, { "name": "frame", "description": "On frame event. The renderer has been initialized,\nbut this is before the scene graph is rendered.\n" }, { "name": "renderFrame", "description": "On frame event. The renderer has been initialized\nand the scene graph is executed but the renderer is not yet finished,\nso this is the last call to create render commands if wanted.\n" }, { "name": "frameEnd", "description": "The frame ends.\n" } ] } ], "dictionaries": [ { "name": "Picimo.App.Options", "attributes": [ { "name": "alpha", "type": "boolean", "default": "false", "required": false }, { "name": "antialias", "type": "boolean", "default": "false" }, { "name": "canvas", "type": "HTMLCanvasElement", "default": "null" }, { "name": "appendTo", "type": "HTMLElement", "default": "null" }, { "name": "bgColor", "type": [ "string", "Picimo.utils.Color" ], "default": "'#000000'" }, { "name": "assetBaseUrl", "type": "string", "default": "null" } ] } ] }, "Picimo.graph.Node": { "name": "Picimo.graph.Node", "type": "programming-interface", "interfaces": [ { "name": "Picimo.graph.Node", "description": "The base class for all other picimo scene graph nodes.\n", "description_after_events": "#### Node States and Events\n<img src='\"/assets/images/doc/node-events.png\"' srcset='\"/assets/images/doc/node-events.png' 1x,="" assets="" images="" doc="" node-events@2x.png="" 2x\"="" alt='\"Node' events="" and="" states\"="">\n", "attributes": [ { "name": "name", "type": "string", "description": "The node name is optional. You can search for a node by name with `findNode()`." }, { "separator": true, "title": "scene graph" }, { "name": "app", "type": "Picimo.App", "readonly": true, "description": "The picimo app instance." }, { "name": "parentNode", "type": "Picimo.graph.Node", "readonly": true, "description": "The parent node or `null`." }, { "name": "isRootNode", "type": "boolean", "readonly": true, "description": "Returns `parent == null`" }, { "name": "renderPrio", "type": "number", "description": "Die render priority bestimmt die Reihenfolge in der die Nodes\nmittels `renderFrame()` aufgerufen werden.\n" }, { "name": "children", "type": "Picimo.graph.Node[]", "readonly": false, "description": "Every node can have children.\n" }, { "separator": true, "title": "state" }, { "name": "state", "type": "Picimo.graph.NodeState" }, { "name": "ready", "type": "boolean", "description": "When set to `false` this node will be ignored by *initialization* and *rendering* process.\n" }, { "name": "readyFunc", "type": "function", "description": "Accepts a boolean value or a function. When the ready function returns a *truthy* value then this is node is *ready*.\n" }, { "name": "display", "type": "boolean", "description": "When set to `false` the node will not be displayed. The *frame*, *renderFrame* and *frameEnd* events will not be called.\nBUT `init` and `initGl` will be called. If you don't want to initialize the node set the *ready* attribute to `false`.\n" } ], "functions": [ { "name": "appendChild", "args": [ { "name": "node", "type": "Picimo.graph.Node" } ], "returns": "Picimo.graph.Node" }, { "name": "removeChild", "args": [ { "name": "node", "type": "Picimo.graph.Node" } ], "returns": "Picimo.graph.Node" }, { "name": "findNode", "args": [ { "name": "name", "type": "string" } ], "returns": "Picimo.graph.Node" }, { "name": "renderFrame", "returns": "void" }, { "name": "destroy", "returns": "void" } ], "constructor": { "args": [ { "name": "app", "type": "Picimo.App", "nullable": false, "optional": false }, { "name": "options", "type": "Picimo.graph.Node.Options", "nullable": true, "optional": true } ] }, "events": [ { "name": "init", "args": [ { "name": "done", "type": "function" } ], "description": "Initialize your node!\nWhen your *init is __async__* call `done()` with your `Promise` as first argument.\n" }, { "name": "initGl", "args": [ { "name": "done", "type": "function" } ], "description": "Initialize webgl resources here if needed!\nWhen your *init is __async__* call `done()` with your `Promise` as first argument.\n" }, { "name": "childrenUpdated", "description": "A child node was added or removed." }, { "name": "frame", "description": "A new frame begins!" }, { "name": "renderFrame", "description": "Time to create your render commands here!" }, { "name": "frameEnd", "description": "The frame ends. All your children completed the frame." }, { "name": "destroyGl", "description": "Free all your webgl resources!" }, { "name": "destroy", "description": "Destroy or release all additional resources allocated by this node." } ] } ], "dictionaries": [ { "name": "Picimo.graph.Node.Options", "attributes": [ { "name": "renderPrio", "type": "number", "required": false, "default": "0", "description": "The render priority of this node. Defaults to `0`." }, { "name": "display", "type": "number", "required": false, "default": true, "description": "The initial display state. Defaults to `true`." }, { "name": "ready", "type": [ "boolean", "function" ], "required": false, "default": true, "description": "The initial ready state. Defaults to `true`." }, { "name": "name", "type": "string", "required": false, "description": "The name of the node." }, { "name": "parentNode", "type": "Picimo.graph.Node", "required": false, "description": "When not set then this node will be acting as root node." }, { "name": "onInit", "type": "function", "required": false }, { "name": "onInitGl", "type": "function", "required": false }, { "name": "onFrame", "type": "function", "required": false }, { "name": "onRenderFrame", "type": "function", "required": false }, { "name": "onFrameEnd", "type": "function", "required": false }, { "name": "onDestroyGl", "type": "function", "required": false }, { "name": "onDestroy", "type": "function", "required": false }, { "name": "onChildrenUpdated", "type": "function", "required": false } ] } ] }, "Picimo.graph.Picture": { "name": "Picimo.graph.Picture", "type": "programming-interface", "interfaces": [ { "name": "Picimo.graph.Picture", "extends": [ "Picimo.graph.Node" ], "constructor": { "args": [ { "name": "app", "type": "Picimo.App", "nullable": false, "optional": false }, { "name": "options", "type": "Picimo.graph.Picture.Options", "nullable": true, "optional": true } ] }, "attributes": [ { "name": "displayPosition", "type": "Picimo.graph.Picture.DisplayPosition" }, { "name": "displaySize", "type": "Picimo.graph.Picture.DisplaySize" }, { "name": "scaleX", "type": "number", "description": "horizontal scale *(default is 1.0)*" }, { "name": "scaleY", "type": "number", "description": "vertical scale *(default is 1.0)*" }, { "name": "opacity", "type": "number", "description": "opacity as value *[0..1]*" }, { "name": "posX", "type": "number", "description": "horizontal position" }, { "name": "posY", "type": "number", "description": "vertical position" }, { "name": "rotate", "type": "number", "description": "rotation in radian" }, { "name": "rotateDegree", "type": "number", "description": "rotation in degree" }, { "name": "sprite", "type": "any", "description": "The internal sprite used to render the picture." }, { "name": "program", "type": "string", "default": "picture", "description": "The shader program name." }, { "name": "texture", "type": "Picimo.core.Texture", "description": "The texture used to render the sprite." } ], "functions": [ { "name": "setPos", "returns": "Picimo.graph.Picture", "args": [ { "name": "x", "type": "number" }, { "name": "y", "type": "number" } ] }, { "name": "translate", "returns": "Picimo.graph.Picture", "args": [ { "name": "tx", "type": "number" }, { "name": "ty", "type": "number" } ] }, { "name": "setScale", "returns": "Picimo.graph.Picture", "args": [ { "name": "sx", "type": "number" }, { "name": "sy", "type": "number" } ] }, { "name": "setZoom", "returns": "Picimo.graph.Picture", "args": [ { "name": "zoom", "type": "number" } ] }, { "name": "setRgb", "returns": "Picimo.graph.Picture", "args": [ { "name": "red", "type": "number" }, { "name": "green", "type": "number" }, { "name": "blue", "type": "number" } ] }, { "name": "setRgba", "returns": "Picimo.graph.Picture", "args": [ { "name": "red", "type": "number" }, { "name": "green", "type": "number" }, { "name": "blue", "type": "number" }, { "name": "alpha", "type": "number" } ] }, { "name": "setVertexPositions", "returns": "void", "args": [ { "name": "x0", "type": "number" }, { "name": "y0", "type": "number" }, { "name": "x1", "type": "number" }, { "name": "y1", "type": "number" }, { "name": "x2", "type": "number" }, { "name": "y2", "type": "number" }, { "name": "x3", "type": "number" }, { "name": "y3", "type": "number" } ] } ] } ], "dictionaries": [ { "name": "Picimo.graph.Picture.Options", "attributes": [ { "name": "texture", "type": [ "Picimo.core.Texture", "Promise<picimo.core.texture>" ], "required": true, "description": "The texture is mandatory. If you don't specify a texture you will see nothing." }, { "name": "displaySize", "type": "Picimo.graph.Picture.DisplaySize", "default": "'contain'", "description": "You should specify either of *displaySize* or *displayPosition*.\nIf both properties are *not* specified the *displaySize* will be set to `'contain'`.\nSee [Picimo.graph.Picture.DisplaySize](#) for more information.\n" }, { "name": "displayPosition", "type": "Picimo.graph.Picture.DisplayPosition", "description": "The *displayPosition* property has precedence over the *displaySize* property. If specified *displaySize* will be ignored." }, { "name": "zoom", "type": "number", "default": "1" }, { "name": "posX", "type": "number", "default": "0" }, { "name": "posY", "type": "number", "default": "0" }, { "name": "opacity", "type": "number", "default": "1" } ] }, { "name": "Picimo.graph.Picture.DisplayPosition", "description": "The display position specifies how the picture is positioned *in relationship to the scene dimension*.\n\n![The Display Position](/assets/images/doc/displayPosition.png)\n![The Display Position Zoom](/assets/images/doc/displayPosition zoom.png)\n", "attributes": [ { "name": "top", "type": [ "number", "string" ], "description": "Set the top edge of the image under the top edge of the parent scene.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of scene height_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "left", "type": [ "number", "string" ], "description": "Set the left edge of the image right to the left edge of the parent scene.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of scene width_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "bottom", "type": [ "number", "string" ], "description": "Set the bottom edge of the image above the bottom edge of the parent scene.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of scene height_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "right", "type": [ "number", "string" ], "description": "Set the right edge of the image left to the right edge of the parent scene.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of scene width_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "width", "type": [ "number", "string" ], "description": "Set the width of the image.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of image width_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "height", "type": [ "number", "string" ], "description": "Set the height of the image.\n\nThe unit is either of **px** (if value is a *number*) or of **percantage _of image height_** (if value is a *string* &mdash; eg. `'50%'`)\n" }, { "name": "zoom", "type": "number", "description": "Set the zoom factor.\n\nDefault is `1.0` (no zoom). If set to `2.0` the size of the image will be _doubled_.\n" }, { "name": "anchorX", "type": "number" }, { "name": "anchorY", "type": "number" } ] } ], "enums": [ { "name": "Picimo.graph.Picture.DisplaySize", "description_after_idl": "![The Display Size Property](/assets/images/doc/displaySize.png)\n\nThe display size specifies the size of the picture.\n\n- **contain** will always show the whole image but may not fill up the whole screen area.\n- **cover** will always fill the whole screen area, but the image may be cropped.\n\nBoth strategies will preserve the image size ratio.\n", "values": [ { "name": "contain" }, { "name": "cover" } ] } ] }, "Picimo.graph.Scene": { "name": "Picimo.graph.Scene", "type": "programming-interface", "interfaces": [ { "name": "Picimo.graph.Scene", "extends": [ "Picimo.graph.Node" ], "description": "![Scene Coordinate System](/assets/images/doc/coordinates.png)", "attributes": [ { "name": "scene", "type": "Picimo.graph.Scene", "readonly": true, "description": "The parent scene. Every scene has a parent scene &mdash; unless the root scene &mdash; for the root scene this value is `undefined`." }, { "name": "projection", "type": "Picimo.math.Matrix4", "readonly": true, "description": "The projection matrix." }, { "name": "hasOwnProjection", "type": "boolean", "readonly": true }, { "name": "projectionNeedsUpdate", "type": "boolean", "readonly": false }, { "name": "transform", "type": "Picimo.math.Matrix4", "description": "The local transformation matrix. Change it to pan or zoom or whatever you want with the scene." }, { "name": "blendMode", "type": "Picimo.render.cmd.BlendMode", "readonly": false }, { "name": "sizeVariety", "type": "string", "readonly": false }, { "name": "width", "type": "number", "readonly": true }, { "name": "height", "type": "number", "readonly": true }, { "name": "pixelRatio", "type": "number", "readonly": true }, { "name": "devicePixelRatio", "type": "number", "readonly": true } ], "functions": [ { "name": "setSize", "args": [ { "name": "width", "type": "number" }, { "name": "height", "type": "number" }, { "name": "sizeVariety", "type": "string", "default": "'contain'", "optional": true } ], "returns": "Picimo.graph.Scene" }, { "separator": true, "title": "Scene graph node factories" }, { "name": "appendPicture", "args": [ { "name": "url", "type": "string" }, { "name": "options", "type": "Picimo.graph.Picture.Options" } ], "returns": "Picimo.graph.Picture" }, { "name": "appendSpriteGroup", "args": [ { "name": "textureAtlas", "type": [ "Picimo.core.TextureAtlas", "Promise" ] }, { "name": "options", "type": "Picimo.graph.SpriteGroup.Options" } ], "returns": "Picimo.graph.SpriteGroup" } ], "constructor": { "args": [ { "name": "app", "type": "Picimo.App", "nullable": false, "optional": false }, { "name": "options", "type": "Picimo.graph.Scene.Options", "nullable": true, "optional": true } ] } } ], "dictionaries": [ { "name": "Picimo.graph.Scene.Options", "attributes": [ { "name": "width", "type": "number", "required": false }, { "name": "height", "type": "number", "required": false }, { "name": "pixelRatio", "type": "number", "required": false }, { "name": "sizeVariety", "type": "string", "required": false }, { "name": "projection", "type": "boolean", "required": false, "default": "true" }, { "name": "blendMode", "type": "Picimo.render.cmd.BlendMode", "required": false }, { "name": "onResize", "type": "function", "required": false }, { "name": "onProjectionUpdated", "type": "function", "required": false } ] } ] }, "internal-coding-guidelines": { "title": "Internal Coding Guidelines", "type": "topic", "tags": [ "advanced" ], "fileBaseName": "Internal_Coding_Guidelines", "name": "internal-coding-guidelines", "html": "<h4 id='\"app-renderer-glx-and-gl-properties\"'>app, renderer, glx and gl properties</h4>\n<p>Various notes and coding hints to make your life easier.</p>\n<ul>\n<li><strong>app</strong> or <strong>glx</strong> can be cached for later usage</li>\n<li>but <em>never</em> cache <strong>renderer</strong> or <strong>gl</strong> as instance properties</li>\n</ul>\n" }, "the-rendering-pipeline": { "title": "The Rendering Pipeline", "type": "topic", "tags": [ "advanced" ], "fileBaseName": "The_Rendering_Pipeline", "name": "the-rendering-pipeline", "html": "<p>Here are some big picture overviews &mdash; you probably won&#39;t need to know the details &mdash;\nbut it could help if you want to understand a little bit more about the internal rendering flow.</p>\n<p><img src='\"/assets/images/doc/picimo-rendering-pipeline.png\"' alt='\"Picimo' rendering="" pipeline\"="" title='\"The' picimo=""></p>\n<p>The following diagram describes the data flow for uniform values.</p>\n<p><img src='\"/assets/images/doc/picimo-renderer-uniforms.png\"' alt='\"Picimo' uniform="" data="" flows\"="" title='\"Picimo' uniforms="" flow\"=""></p>\n" } }, "package": { "name": "picimo", "version": "0.0.9", "author": { "name": "Wolfger Schramm", "email": "wolfger@spearwolf.de", "url": "https://github.com/spearwolf" }, "repository": { "type": "git", "url": "https://github.com/spearwolf/picimo.git" }, "license": "Apache-2.0", "homepage": "https://github.com/spearwolf/picimo/", "bugs": { "url": "https://github.com/spearwolf/picimo/issues" } }, "programming-interface": [ "Picimo.App", "Picimo.graph.Node", "Picimo.graph.Picture", "Picimo.graph.Scene" ], "topic": [ "internal-coding-guidelines", "the-rendering-pipeline" ] }</picimo.core.texture></picimo.core.texture></picimo.core.textureatlas></canvas></canvas>