!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Picimo=e():t.Picimo=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.defineProperty(e,"App",{enumerable:!0,get:function(){return n.App}}),Object.defineProperty(e,"sg",{enumerable:!0,get:function(){return n.sg}}),Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n.webgl}}),Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return n.utils}}),Object.defineProperty(e,"math",{enumerable:!0,get:function(){return n.math}}),Object.defineProperty(e,"core",{enumerable:!0,get:function(){return n.core}}),Object.defineProperty(e,"sprites",{enumerable:!0,get:function(){return n.sprites}});e.VERSION="0.0.3"},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.sprites=e.core=e.math=e.utils=e.webgl=e.sg=e.App=void 0;var o=r(2),u=i(o),a=r(94),s=n(a),f=r(149),c=n(f),l=r(36),h=n(l),p=r(106),d=n(p),v=r(114),g=n(v),m=r(164),_=n(m);e.App=u["default"],e.sg=s,e.webgl=c,e.utils=h,e.math=d,e.core=g,e.sprites=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){(0,l["default"])(this),this.now=window.performance.now()/1e3,"object"!==("undefined"==typeof t?"undefined":(0,f["default"])(t))||"nodeName"in t?null==e&&(e={}):(e=t,t=e.canvas);var r=void 0!==t;t=r?t:document.createElement("canvas"),p.object.definePropertyPublicRO(this,"canvas",t);var n;r||(n=e.appendTo?e.appendTo:document.body,n.appendChild(t)),t.classList.add("picimo"),p.addGlxProperty(this),this.glCtxAttrs={alpha:e.alpha===!0,antialias:e.antialias===!0},this.glx=a(this),this.glx.app=this,this.backgroundColor=new p.Color(void 0!==e.bgColor?e.bgColor:this.glCtxAttrs.alpha?"transparent":"#000000"),p.object.definePropertyPublicRO(this,"shader",new m.ShaderManager(this)),p.object.definePropertyPublicRO(this,"texture",new m.TextureManager(this)),p.object.definePropertyPublicRO(this,"renderer",new m.WebGlRenderer(this)),p.object.definePropertyPublicRO(this,"sprites",(0,M["default"])(x.SpriteFactory)),this.assetBaseUrl=window.PICIMO_ASSET_BASE_URL||e.assetBaseUrl||u(new URL(window.location.href).origin+"/"),this.frameNo=0,this.renderer.onInitGl(),this.resize(),this.onResize=this.resize.bind(this),window.addEventListener("resize",this.onResize,!1),this.onAnimationFrame=this.renderFrame.bind(this),requestAnimationFrame(this.onAnimationFrame),p.object.definePropertyPublicRO(this,"scene",new v.Scene(this,{blendMode:m.cmd.BlendMode.DEFAULT,pixelRatio:1}))}function u(t){return"/"===t[t.length-1]?t:O.exec(t)[1]}function a(t){var e;try{e=t.canvas.getContext("webgl",t.glCtxAttrs)||t.canvas.getContext("experimental-webgl",t.glCtxAttrs)}catch(r){console.error(r)}if(!e)throw new Error("Could not initialize the WebGL context!");return new m.WebGlContext(e)}var s=r(3),f=i(s);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var c=r(35),l=i(c),h=r(36),p=n(h),d=r(94),v=n(d),g=r(149),m=n(g),_=r(114),y=n(_),b=r(164),x=n(b),w=r(166),M=i(w);p.object.definePropertyPublicRO(o.prototype,"devicePixelRatio",window.devicePixelRatio||1),o.prototype.resize=function(){var t=Math.round(this.canvas.parentNode.clientWidth*this.devicePixelRatio),e=Math.round(this.canvas.parentNode.clientHeight*this.devicePixelRatio);(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,(this.canvas.width!==t||this.canvas.height!==e)&&(this.canvas.width=t,this.canvas.height=e,this.canvas.style.width=Math.round(t/this.devicePixelRatio)+"px",this.canvas.style.height=Math.round(e/this.devicePixelRatio)+"px"),this.renderer&&this.renderer.onResize())},o.prototype.renderFrame=function(){this.now=window.performance.now()/1e3,++this.frameNo,this.frameTime=null==this.frameLastTime?0:this.frameLastTime-this.now,this.frameLastTime=this.now,this.renderer.onStartFrame(),this.scene&&this.scene.renderFrame(),this.renderer.onEndFrame(),requestAnimationFrame(this.onAnimationFrame)};var P=new RegExp("^(https?:)?//","i"),A=new RegExp("^(https?:)?/","i"),O=new RegExp("^(.*/)[^/]+$","i");o.prototype.getAssetUrl=function(t){var e;return e=void 0===this.assetBaseUrl?t:P.test(t)?"/"===t[0]&&"/"===this.assetBaseUrl[this.assetBaseUrl.length-1]?this.assetBaseUrl+t.substr(1):this.assetBaseUrl+t:t},o.prototype.joinAssetUrl=function(t,e){return A.test(e)?e:this.getAssetUrl(u(t?t:this.assetBaseUrl)+e)},o.prototype.loadTextureAtlas=function(t){return new y.TextureAtlas(this).load(t).promise},o.prototype.loadTexture=function(t){var e=new y.Po2Image(this).load(t),r=new y.Texture;return r.image=e,e.promise.then(function(){return r})}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t&&"undefined"!=typeof _Symbol&&t.constructor===_Symbol?"symbol":typeof t}e.__esModule=!0;var o=r(4),u=n(o);e["default"]=function(t){return t&&"undefined"!=typeof u["default"]&&t.constructor===u["default"]?"symbol":"undefined"==typeof t?"undefined":i(t)}},function(t,e,r){t.exports={"default":r(5),__esModule:!0}},function(t,e,r){r(6),r(34),t.exports=r(13).Symbol},function(t,e,r){"use strict";var n=r(7),i=r(8),o=r(9),u=r(10),a=r(12),s=r(16),f=r(11),c=r(19),l=r(20),h=r(22),p=r(21),d=r(23),v=r(28),g=r(29),m=r(30),_=r(31),y=r(24),b=r(18),x=n.getDesc,w=n.setDesc,M=n.create,P=v.get,A=i.Symbol,O=i.JSON,R=O&&O.stringify,E=!1,F=p("_hidden"),j=n.isEnum,T=c("symbol-registry"),S=c("symbols"),C="function"==typeof A,D=Object.prototype,I=u&&f(function(){return 7!=M(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=x(D,e);n&&delete D[e],w(t,e,r),n&&t!==D&&w(D,e,n)}:w,U=function(t){var e=S[t]=M(A.prototype);return e._k=t,u&&E&&I(D,t,{configurable:!0,set:function(e){o(this,F)&&o(this[F],t)&&(this[F][t]=!1),I(this,t,b(1,e))}}),e},B=function(t){return"symbol"==typeof t},k=function(t,e,r){return r&&o(S,e)?(r.enumerable?(o(t,F)&&t[F][e]&&(t[F][e]=!1),r=M(r,{enumerable:b(0,!1)})):(o(t,F)||w(t,F,b(1,{})),t[F][e]=!0),I(t,e,r)):w(t,e,r)},N=function(t,e){_(t);for(var r,n=g(e=y(e)),i=0,o=n.length;o>i;)k(t,r=n[i++],e[r]);return t},z=function(t,e){return void 0===e?M(t):N(M(t),e)},L=function(t){var e=j.call(this,t);return e||!o(this,t)||!o(S,t)||o(this,F)&&this[F][t]?e:!0},W=function(t,e){var r=x(t=y(t),e);return!r||!o(S,e)||o(t,F)&&t[F][e]||(r.enumerable=!0),r},G=function(t){for(var e,r=P(y(t)),n=[],i=0;r.length>i;)o(S,e=r[i++])||e==F||n.push(e);return n},V=function(t){for(var e,r=P(y(t)),n=[],i=0;r.length>i;)o(S,e=r[i++])&&n.push(S[e]);return n},Y=function(t){if(void 0!==t&&!B(t)){for(var e,r,n=[t],i=1,o=arguments;o.length>i;)n.push(o[i++]);return e=n[1],"function"==typeof e&&(r=e),(r||!m(e))&&(e=function(t,e){return r&&(e=r.call(this,t,e)),B(e)?void 0:e}),n[1]=e,R.apply(O,n)}},H=f(function(){var t=A();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))});C||(A=function(){if(B(this))throw TypeError("Symbol is not a constructor");return U(h(arguments.length>0?arguments[0]:void 0))},s(A.prototype,"toString",function(){return this._k}),B=function(t){return t instanceof A},n.create=z,n.isEnum=L,n.getDesc=W,n.setDesc=k,n.setDescs=N,n.getNames=v.get=G,n.getSymbols=V,u&&!r(33)&&s(D,"propertyIsEnumerable",L,!0));var q={"for":function(t){return o(T,t+="")?T[t]:T[t]=A(t)},keyFor:function(t){return d(T,t)},useSetter:function(){E=!0},useSimple:function(){E=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=p(t);q[t]=C?e:U(e)}),E=!0,a(a.G+a.W,{Symbol:A}),a(a.S,"Symbol",q),a(a.S+a.F*!C,"Object",{create:z,defineProperty:k,defineProperties:N,getOwnPropertyDescriptor:W,getOwnPropertyNames:G,getOwnPropertySymbols:V}),O&&a(a.S+a.F*(!C||H),"JSON",{stringify:Y}),l(A,"Symbol"),l(Math,"Math",!0),l(i.JSON,"JSON",!0)},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){t.exports=!r(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,r){var n=r(8),i=r(13),o=r(14),u="prototype",a=function(t,e,r){var s,f,c,l=t&a.F,h=t&a.G,p=t&a.S,d=t&a.P,v=t&a.B,g=t&a.W,m=h?i:i[e]||(i[e]={}),_=h?n:p?n[e]:(n[e]||{})[u];h&&(r=e);for(s in r)f=!l&&_&&s in _,f&&s in m||(c=f?_[s]:r[s],m[s]=h&&"function"!=typeof _[s]?r[s]:v&&f?o(c,n):g&&_[s]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[u]=t[u],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((m[u]||(m[u]={}))[s]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(15);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){t.exports=r(17)},function(t,e,r){var n=r(7),i=r(18);t.exports=r(10)?function(t,e,r){return n.setDesc(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(8),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,r){var n=r(7).setDesc,i=r(9),o=r(21)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(19)("wks"),i=r(22),o=r(8).Symbol;t.exports=function(t){return n[t]||(n[t]=o&&o[t]||(o||i)("Symbol."+t))}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(7),i=r(24);t.exports=function(t,e){for(var r,o=i(t),u=n.getKeys(o),a=u.length,s=0;a>s;)if(o[r=u[s++]]===e)return r}},function(t,e,r){var n=r(25),i=r(27);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(26);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(24),i=r(7).getNames,o={}.toString,u="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(e){return u.slice()}};t.exports.get=function(t){return u&&"[object Window]"==o.call(t)?a(t):i(n(t))}},function(t,e,r){var n=r(7);t.exports=function(t){var e=n.getKeys(t),r=n.getSymbols;if(r)for(var i,o=r(t),u=n.isEnum,a=0;o.length>a;)u.call(t,i=o[a++])&&e.push(i);return e}},function(t,e,r){var n=r(26);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(32);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=!0},function(t,e){},function(t,e){!function(r){if("object"==typeof e&&"undefined"!=typeof t)t.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.eventize=r()}}(function(){return function t(e,r,n){function i(u,a){if(!r[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var f=Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[u]={exports:{}};e[u][0].call(c.exports,function(t){var r=e[u][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(t,e,r){"use strict";function n(t){function e(){return++p.lastCallbackId}function r(t,e){return t.prio!==e.prio?e.prio-t.prio:t.id-e.id}function c(t){if(t){var e=p.boundObjects.indexOf(t);return-1===e&&p.boundObjects.push(t),t}}function l(t,e,r){var i,o,u,a;for(o in r)r.hasOwnProperty(o)&&(u=e[o],"function"==typeof u&&(i=r[o],Array.isArray(i)?(a=i[0],i=i[1]):a=n.PRIO_DEFAULT,t.on(i,a,u)));return t}function h(t,e,r){function i(){var e,n,i;if(h)for(e=0;h>e;e++)n=p.boundObjects[e],n[a]?r(null,n):(i=n[t],"function"==typeof i&&r(i,n))}if(!(d.silenced||d.off.indexOf(t)>=0)){var o,u,f,c=p.callbacks[t],l=p.callbacks[s],h=p.boundObjects.length,v=!1;if(c||l.length)for(c=c?c.concat(l):l,u=c.length,o=0;u>o;o++)f=c[o],!v&&f&&f.prio<n.PRIO_DEFAULT&&(i(),v=!0),e(f);v||i()}}if(t[a])return t;var p={lastCallbackId:0,callbacks:{},boundObjects:[]};p.callbacks[s]=[];var d=o({},{silenced:!1,off:[]});return u(t,a,d),void 0===n.PRIO_DEFAULT&&o(n,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),t.on=function(t,u,a){var c=arguments.length;if(0===c)return void(d.silenced&&(i(d,"silenced",!1),d.off.length=0));var l;if(1===c){if("string"==typeof t)return l=d.off.indexOf(t),void(l>=0&&d.off.splice(l,1));if("object"!=typeof t&&"function"!=typeof t)return void console.warn(f,".on() called with insufficient arguments!",arguments);a=t,t=s,u=n.PRIO_DEFAULT}2===c&&(a=u,u=n.PRIO_DEFAULT);var h=p.callbacks,v=h[t]||(h[t]=[]),g=e(),m=o({},{id:g,fn:a,prio:"number"!=typeof u?n.PRIO_DEFAULT:u,isFunction:"function"==typeof a});return v.push(m),v.sort(r),g},t.once=function(e,r,i){var o=arguments.length;if(!o||o>3)return void console.warn(f,".once() called with insufficient arguments!",arguments);1===o?(i=e,e=s,r=n.PRIO_DEFAULT):2===o&&(i=r,r=n.PRIO_DEFAULT);var u=t.on(e,r,function(){var e=i.apply(this,arguments);return t.off(u),e});return u},t.off=function(t){if(0===arguments.length)return void(d.silenced||(i(d,"silenced",!0),d.off.length=0));if("string"==typeof t)return void(-1===d.off.indexOf(t)&&d.off.push(t));var e,r,n,o,u,a=p.callbacks,s="object"==typeof t;if("number"==typeof t||"function"==typeof t||s)for(u=Object.keys(a),n=0;n<u.length;n++)for(o=a[u[n]],r=0;r<o.length;r++)if(e=o[r],(e.id===t||e.fn===t)&&(o.splice(r,1),!s))return;s&&(r=p.boundObjects.indexOf(t),r>=0&&p.boundObjects.splice(r,1))},t.connect=function(t,e){var r=arguments.length;return 1===r?c(t):2===r?l(this,t,e):void console.warn(f,".connect() called with insufficient arguments!",arguments)},t.emit=function(t){var e,r,n,i=this;arguments.length>1&&"string"!=typeof arguments[0]&&"string"==typeof arguments[1]?(r=Array.prototype.slice.call(arguments,2),t=arguments[1],e=arguments[0],r[r.length-1]=e,n=r):(r=Array.prototype.slice.call(arguments,1),n=r.concat([i])),h(t,function(e){if(e.isFunction)e.fn.apply(i,r);else if(e.fn[a])e.fn.emit.apply(e.fn,[t].concat(r));else{var o=e.fn[t];"function"==typeof o&&o.apply(e.fn,n)}},function(e,r){e?e.apply(r,n):r.emit.apply(r,[i,t].concat(n))})},t.emitReduce=function(t){function e(t){void 0!==t&&(r=t)}var r,n=Array.prototype.slice.call(arguments,1);0===n.length?(r={},n.push(r)):e(n[0]);var i=this,o=[t].concat(n),u=n.concat([i]);return h(t,function(s){if(s.isFunction)n[0]=r,e(s.fn.apply(i,n));else if(s.fn[a])o[1]=r,e(s.fn.emitReduce.apply(s.fn,o));else{var f=s.fn[t];"function"==typeof f&&(u[0]=r,e(f.apply(s.fn,u)))}},function(t,n){t&&(u[0]=r,e(t.apply(n,u)))}),r},t}function i(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0,enumerable:!0}),t}function o(t,e){var r,n=Object.keys(e);for(r=n.length;r--;)i(t,n[r],e[n[r]]);return t}function u(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0}),t}var a="_eventize",s="*",f="[eventize.js]";n.is=function(t){return!(!t||!t[a])},e.exports=n},{}]},{},[1])(1)})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Queue=e.ObjectPool=e.addUid=e.addGlxProperty=e.addReadyPromise=e.object=e.Color=e.glMatrix=void 0;var o=r(37),u=i(o),a=r(41),s=n(a),f=r(75),c=n(f),l=r(76),h=n(l),p=r(77),d=n(p),v=r(80),g=n(v);e.glMatrix=r(83),e.Color=r(93);e.object=u,e.addReadyPromise=s["default"],e.addGlxProperty=c["default"],e.addUid=h["default"],e.ObjectPool=d["default"],e.Queue=g["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,r){return(0,l["default"])(t,e,{value:r,enumerable:!0}),t}function u(t,e,r){return(0,l["default"])(t,e,{value:r,writable:!0}),t}function a(t,e,r){return(0,l["default"])(t,e,{value:r}),t}function s(t,e){for(var r in e)Object.hasOwnProperty.call(e,r)&&(0,l["default"])(t,r,{value:e[r],enumerable:!0});return t}function f(t,e){for(var r in e)Object.hasOwnProperty.call(e,r)&&(0,l["default"])(t,r,{value:e[r]});return t}var c=r(38),l=i(c);Object.defineProperty(e,"__esModule",{value:!0}),e.decorator=void 0,e.definePropertyPublicRO=o,e.definePropertyPrivate=u,e.definePropertyPrivateRO=a,e.definePropertiesPublicRO=s,e.definePropertiesPrivateRO=f;var h=r(40),p=n(h);e.decorator=p},function(t,e,r){t.exports={"default":r(39),__esModule:!0}},function(t,e,r){var n=r(7);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){"use strict";function r(t,e,r){return r.enumerable=!0,r.writable=!1,r.configurable=!1,r}Object.defineProperty(e,"__esModule",{value:!0}),e.publicRO=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=!1,r=null;return(0,s["default"])(t,{ready:{get:function(){return e},set:function(t){!e&&t?(e=!0,r&&(r(),r=null)):e&&!t&&(this._ready=!1)},enumerable:!0},promise:{value:new u["default"](function(n){r=n.bind(t,t),e&&(r(),r=null)}),enumerable:!0}}),t}var o=r(42),u=n(o),a=r(73),s=n(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,r){t.exports={"default":r(43),__esModule:!0}},function(t,e,r){r(34),r(44),r(50),r(54),t.exports=r(13).Promise},function(t,e,r){"use strict";var n=r(45)(!0);r(47)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){var n=r(46),i=r(27);t.exports=function(t){return function(e,r){var o,u,a=String(i(e)),s=n(r),f=a.length;return 0>s||s>=f?t?"":void 0:(o=a.charCodeAt(s),55296>o||o>56319||s+1===f||(u=a.charCodeAt(s+1))<56320||u>57343?t?a.charAt(s):o:t?a.slice(s,s+2):(o-55296<<10)+(u-56320)+65536)}}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){"use strict";var n=r(33),i=r(12),o=r(16),u=r(17),a=r(9),s=r(48),f=r(49),c=r(20),l=r(7).getProto,h=r(21)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",g="values",m=function(){return this};t.exports=function(t,e,r,_,y,b,x){f(r,e,_);var w,M,P=function(t){if(!p&&t in E)return E[t];switch(t){case v:return function(){return new r(this,t)};case g:return function(){return new r(this,t)}}return function(){return new r(this,t)}},A=e+" Iterator",O=y==g,R=!1,E=t.prototype,F=E[h]||E[d]||y&&E[y],j=F||P(y);if(F){var T=l(j.call(new t));c(T,A,!0),!n&&a(E,d)&&u(T,h,m),O&&F.name!==g&&(R=!0,j=function(){return F.call(this)})}if(n&&!x||!p&&!R&&E[h]||u(E,h,j),s[e]=j,s[A]=m,y)if(w={values:O?j:P(g),keys:b?j:P(v),entries:O?P("entries"):j},x)for(M in w)M in E||o(E,M,w[M]);else i(i.P+i.F*(p||R),e,w);return w}},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(7),i=r(18),o=r(20),u={};r(17)(u,r(21)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n.create(u,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){r(51);var n=r(48);n.NodeList=n.HTMLCollection=n.Array},function(t,e,r){"use strict";var n=r(52),i=r(53),o=r(48),u=r(24);t.exports=r(47)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n,i=r(7),o=r(33),u=r(8),a=r(14),s=r(55),f=r(12),c=r(32),l=r(31),h=r(15),p=r(56),d=r(57),v=r(62).set,g=r(63),m=r(21)("species"),_=r(64),y=r(65),b="Promise",x=u.process,w="process"==s(x),M=u[b],P=function(t){var e=new M(function(){});return t&&(e.constructor=Object),M.resolve(e)===e},A=function(){function t(e){var r=new M(e);return v(r,t.prototype),r}var e=!1;try{if(e=M&&M.resolve&&P(),v(t,M),t.prototype=i.create(M.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&r(10)){var n=!1;M.resolve(i.setDesc({},"then",{get:function(){n=!0}})),e=n}}catch(o){e=!1}return e}(),O=function(t,e){return o&&t===M&&e===n?!0:g(t,e)},R=function(t){var e=l(t)[m];return void 0!=e?e:t},E=function(t){var e;return c(t)&&"function"==typeof(e=t.then)?e:!1},F=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=h(e),this.reject=h(r)},j=function(t){try{t()}catch(e){return{error:e}}},T=function(t,e){if(!t.n){t.n=!0;var r=t.c;y(function(){for(var n=t.v,i=1==t.s,o=0,a=function(e){var r,o,u=i?e.ok:e.fail,a=e.resolve,s=e.reject;try{u?(i||(t.h=!0),r=u===!0?n:u(n),r===e.promise?s(TypeError("Promise-chain cycle")):(o=E(r))?o.call(r,a,s):a(r)):s(n)}catch(f){s(f)}};r.length>o;)a(r[o++]);r.length=0,t.n=!1,e&&setTimeout(function(){var e,r,i=t.p;S(i)&&(w?x.emit("unhandledRejection",n,i):(e=u.onunhandledrejection)?e({promise:i,reason:n}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",n)),t.a=void 0},1)})}},S=function(t){var e,r=t._d,n=r.a||r.c,i=0;if(r.h)return!1;for(;n.length>i;)if(e=n[i++],e.fail||!S(e.promise))return!1;return!0},C=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),T(e,!0))},D=function(t){var e,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===t)throw TypeError("Promise can't be resolved itself");(e=E(t))?y(function(){var n={r:r,d:!1};try{e.call(t,a(D,n,1),a(C,n,1))}catch(i){C.call(n,i)}}):(r.v=t,r.s=1,T(r,!1))}catch(n){C.call({r:r,d:!1},n)}}};A||(M=function(t){h(t);var e=this._d={p:p(this,M,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(a(D,e,1),a(C,e,1))}catch(r){C.call(e,r)}},r(70)(M.prototype,{then:function(t,e){var r=new F(_(this,M)),n=r.promise,i=this._d;return r.ok="function"==typeof t?t:!0,r.fail="function"==typeof e&&e,i.c.push(r),i.a&&i.a.push(r),i.s&&T(i,!1),n},"catch":function(t){return this.then(void 0,t)}})),f(f.G+f.W+f.F*!A,{Promise:M}),r(20)(M,b),r(71)(b),n=r(13)[b],f(f.S+f.F*!A,b,{reject:function(t){var e=new F(this),r=e.reject;return r(t),e.promise}}),f(f.S+f.F*(!A||P(!0)),b,{resolve:function(t){if(t instanceof M&&O(t.constructor,this))return t;var e=new F(this),r=e.resolve;return r(t),e.promise}}),f(f.S+f.F*!(A&&r(72)(function(t){M.all(t)["catch"](function(){})})),b,{all:function(t){var e=R(this),r=new F(e),n=r.resolve,o=r.reject,u=[],a=j(function(){d(t,!1,u.push,u);var r=u.length,a=Array(r);r?i.each.call(u,function(t,i){var u=!1;e.resolve(t).then(function(t){u||(u=!0,a[i]=t,--r||n(a))},o)}):n(a)});return a&&o(a.error),r.promise},race:function(t){var e=R(this),r=new F(e),n=r.reject,i=j(function(){d(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(t,e,r){var n=r(26),i=r(21)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=(e=Object(t))[i])?r:o?n(e):"Object"==(u=n(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError(r+": use the 'new' operator!");return t}},function(t,e,r){var n=r(14),i=r(58),o=r(59),u=r(31),a=r(60),s=r(61);t.exports=function(t,e,r,f){var c,l,h,p=s(t),d=n(r,f,e?2:1),v=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(o(p))for(c=a(t.length);c>v;v++)e?d(u(l=t[v])[0],l[1]):d(t[v]);else for(h=p.call(t);!(l=h.next()).done;)i(h,d,l.value,e)}},function(t,e,r){var n=r(31);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(o){var u=t["return"];throw void 0!==u&&n(u.call(t)),o}}},function(t,e,r){var n=r(48),i=r(21)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){var n=r(46),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(55),i=r(21)("iterator"),o=r(48);t.exports=r(13).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[n(t)]:void 0}},function(t,e,r){var n=r(7).getDesc,i=r(32),o=r(31),u=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=r(14)(Function.call,n(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,r){return u(t,r),e?t.__proto__=r:i(t,r),t}}({},!1):void 0),check:u}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,r){var n=r(31),i=r(15),o=r(21)("species");t.exports=function(t,e){var r,u=n(t).constructor;return void 0===u||void 0==(r=n(u)[o])?e:i(r)}},function(t,e,r){var n,i,o,u=r(8),a=r(66).set,s=u.MutationObserver||u.WebKitMutationObserver,f=u.process,c=u.Promise,l="process"==r(26)(f),h=function(){var t,e,r;for(l&&(t=f.domain)&&(f.domain=null,t.exit());n;)e=n.domain,r=n.fn,e&&e.enter(),r(),e&&e.exit(),n=n.next;i=void 0,t&&t.enter()};if(l)o=function(){f.nextTick(h)};else if(s){var p=1,d=document.createTextNode("");new s(h).observe(d,{characterData:!0}),o=function(){d.data=p=-p}}else o=c&&c.resolve?function(){c.resolve().then(h)}:function(){a.call(u,h)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&f.domain};i&&(i.next=e),n||(n=e,o()),i=e}},function(t,e,r){var n,i,o,u=r(14),a=r(67),s=r(68),f=r(69),c=r(8),l=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,v=0,g={},m="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){_.call(t.data)};h&&p||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++v]=function(){a("function"==typeof t?t:Function(t),e)},n(v),v},p=function(t){delete g[t]},"process"==r(26)(l)?n=function(t){l.nextTick(u(_,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=y,n=u(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):n=m in f("script")?function(t){s.appendChild(f("script"))[m]=function(){s.removeChild(this),_.call(t)}}:function(t){setTimeout(u(_,t,1),0)}),t.exports={set:h,clear:p}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){t.exports=r(8).document&&document.documentElement},function(t,e,r){var n=r(32),i=r(8).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(16);t.exports=function(t,e){for(var r in e)n(t,r,e[r]);return t}},function(t,e,r){"use strict";var n=r(13),i=r(7),o=r(10),u=r(21)("species");t.exports=function(t){var e=n[t];o&&e&&!e[u]&&i.setDesc(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(21)("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(u){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],u=o[n]();u.next=function(){r=!0},o[n]=function(){return u},t(o)}catch(a){}return r}},function(t,e,r){t.exports={"default":r(74),__esModule:!0}},function(t,e,r){var n=r(7);t.exports=function(t,e){return n.setDescs(t,e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e;return(0,s["default"])(t,{glx:{set:function(t){e=t,Object.defineProperty(this,"gl",{value:"object"===("undefined"==typeof t?"undefined":(0,u["default"])(t))?t.gl:void 0,enumerable:!0,configurable:!0})},get:function(){return e},enumerable:!0}}),t}var o=r(3),u=n(o),a=r(73),s=n(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,r){"use strict";function n(t){return(0,i.definePropertyPublicRO)(t,"uid",++o),t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(37),o=0},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=r(78),o=n(i),u=r(79),a=n(u);Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(e){(0,o["default"])(this,t),this.objects=[],this.inUseCount=0,this.setFactory(e)}return(0,a["default"])(t,[{key:"setFactory",value:function(t){this.factory=t?t:function(){return{}}}},{key:"create",value:function(){var t=void 0;return this.inUseCount<this.objects.length?t=this.objects[this.inUseCount]:(t=this.factory(),this.objects.push(t)),++this.inUseCount,t}},{key:"releaseAll",value:function(){this.inUseCount=0}},{key:"destroyAll",value:function(){this.inUseCount=0,this.objects.length=0}}]),t}();e["default"]=s},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(38),o=n(i);e["default"]=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o["default"])(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=r(81),o=n(i),u=r(78),a=n(u),s=r(79),f=n(s);Object.defineProperty(e,"__esModule",{value:!0});var c=r(37),l=function(){function t(){(0,a["default"])(this,t),this.length=0,(0,c.definePropertyPublicRO)(this,"entries",[])}return(0,f["default"])(t,[{key:"push",value:function(t){var e=void 0;this.length<this.entries.length?this.entries[this.length].value=t:(e=(0,o["default"])(null),e.value=t,this.entries.push(e)),++this.length}},{key:"pop",value:function(){var t=void 0,e=void 0;return this.length>0?(--this.length,t=this.entries[this.length],e=t.value,
t.value=null,e):void 0}},{key:"clear",value:function(t){for(var e=this.length;e--;)this.entries[e].value=null;this.length=0,t&&(this.entries.length=0)}},{key:"forEach",value:function(t,e){var r=this.length,n=void 0,i=void 0;for(i=0;r>i;i++)n=this.entries[i].value,n&&t.call(e||n,n)}}]),t}();e["default"]=l},function(t,e,r){t.exports={"default":r(82),__esModule:!0}},function(t,e,r){var n=r(7);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){e.glMatrix=r(84),e.mat2=r(85),e.mat2d=r(86),e.mat3=r(87),e.mat4=r(88),e.quat=r(89),e.vec2=r(92),e.vec3=r(90),e.vec4=r(91)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},t.exports=r},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=r*o-i*n;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t):null},i.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=r[0],s=r[1],f=r[2],c=r[3];return t[0]=n*a+o*s,t[1]=i*a+u*s,t[2]=n*f+o*c,t[3]=i*f+u*c,t},i.mul=i.multiply,i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*a,t[1]=i*s+u*a,t[2]=n*-a+o*s,t[3]=i*-a+u*s,t},i.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=r[0],s=r[1];return t[0]=n*a,t[1]=i*a,t[2]=o*s,t[3]=u*s,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},t.exports=i},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=r*o-n*i;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-i*s,t[3]=r*s,t[4]=(i*a-o*u)*s,t[5]=(n*u-r*a)*s,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=r[0],c=r[1],l=r[2],h=r[3],p=r[4],d=r[5];return t[0]=n*f+o*c,t[1]=i*f+u*c,t[2]=n*l+o*h,t[3]=i*l+u*h,t[4]=n*p+o*d+a,t[5]=i*p+u*d+s,t},i.mul=i.multiply,i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*f,t[1]=i*c+u*f,t[2]=n*-f+o*c,t[3]=i*-f+u*c,t[4]=a,t[5]=s,t},i.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=r[0],c=r[1];return t[0]=n*f,t[1]=i*f,t[2]=o*c,t[3]=u*c,t[4]=a,t[5]=s,t},i.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=u,t[4]=n*f+o*c+a,t[5]=i*f+u*c+s,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},t.exports=i},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=e[6],f=e[7],c=e[8],l=c*u-a*f,h=-c*o+a*s,p=f*o-u*s,d=r*l+n*h+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-c*n+i*f)*d,t[2]=(a*n-i*u)*d,t[3]=h*d,t[4]=(c*r-i*s)*d,t[5]=(-a*r+i*o)*d,t[6]=p*d,t[7]=(-f*r+n*s)*d,t[8]=(u*r-n*o)*d,t):null},i.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=e[6],f=e[7],c=e[8];return t[0]=u*c-a*f,t[1]=i*f-n*c,t[2]=n*a-i*u,t[3]=a*s-o*c,t[4]=r*c-i*s,t[5]=i*o-r*a,t[6]=o*f-u*s,t[7]=n*s-r*f,t[8]=r*u-n*o,t},i.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],u=t[5],a=t[6],s=t[7],f=t[8];return e*(f*o-u*s)+r*(-f*i+u*a)+n*(s*i-o*a)},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=r[0],p=r[1],d=r[2],v=r[3],g=r[4],m=r[5],_=r[6],y=r[7],b=r[8];return t[0]=h*n+p*u+d*f,t[1]=h*i+p*a+d*c,t[2]=h*o+p*s+d*l,t[3]=v*n+g*u+m*f,t[4]=v*i+g*a+m*c,t[5]=v*o+g*s+m*l,t[6]=_*n+y*u+b*f,t[7]=_*i+y*a+b*c,t[8]=_*o+y*s+b*l,t},i.mul=i.multiply,i.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=r[0],p=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=u,t[4]=a,t[5]=s,t[6]=h*n+p*u+f,t[7]=h*i+p*a+c,t[8]=h*o+p*s+l,t},i.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=Math.sin(r),p=Math.cos(r);return t[0]=p*n+h*u,t[1]=p*i+h*a,t[2]=p*o+h*s,t[3]=p*u-h*n,t[4]=p*a-h*i,t[5]=p*s-h*o,t[6]=f,t[7]=c,t[8]=l,t},i.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=r+r,a=n+n,s=i+i,f=r*u,c=n*u,l=n*a,h=i*u,p=i*a,d=i*s,v=o*u,g=o*a,m=o*s;return t[0]=1-l-d,t[3]=c-m,t[6]=h+g,t[1]=c+m,t[4]=1-f-d,t[7]=p-v,t[2]=h-g,t[5]=p+v,t[8]=1-f-l,t},i.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],_=r*a-n*u,y=r*s-i*u,b=r*f-o*u,x=n*s-i*a,w=n*f-o*a,M=i*f-o*s,P=c*v-l*d,A=c*g-h*d,O=c*m-p*d,R=l*g-h*v,E=l*m-p*v,F=h*m-p*g,j=_*F-y*E+b*R+x*O-w*A+M*P;return j?(j=1/j,t[0]=(a*F-s*E+f*R)*j,t[1]=(s*O-u*F-f*A)*j,t[2]=(u*E-a*O+f*P)*j,t[3]=(i*E-n*F-o*R)*j,t[4]=(r*F-i*O+o*A)*j,t[5]=(n*O-r*E-o*P)*j,t[6]=(v*M-g*w+m*x)*j,t[7]=(g*b-d*M-m*y)*j,t[8]=(d*w-v*b+m*_)*j,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},t.exports=i},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],u=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=u,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],_=r*a-n*u,y=r*s-i*u,b=r*f-o*u,x=n*s-i*a,w=n*f-o*a,M=i*f-o*s,P=c*v-l*d,A=c*g-h*d,O=c*m-p*d,R=l*g-h*v,E=l*m-p*v,F=h*m-p*g,j=_*F-y*E+b*R+x*O-w*A+M*P;return j?(j=1/j,t[0]=(a*F-s*E+f*R)*j,t[1]=(i*E-n*F-o*R)*j,t[2]=(v*M-g*w+m*x)*j,t[3]=(h*w-l*M-p*x)*j,t[4]=(s*O-u*F-f*A)*j,t[5]=(r*F-i*O+o*A)*j,t[6]=(g*b-d*M-m*y)*j,t[7]=(c*M-h*b+p*y)*j,t[8]=(u*E-a*O+f*P)*j,t[9]=(n*O-r*E-o*P)*j,t[10]=(d*w-v*b+m*_)*j,t[11]=(l*b-c*w-p*_)*j,t[12]=(a*A-u*R-s*P)*j,t[13]=(r*R-n*A+i*P)*j,t[14]=(v*y-d*x-g*_)*j,t[15]=(c*x-l*y+h*_)*j,t):null},i.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=e[4],a=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=a*(h*m-p*g)-l*(s*m-f*g)+v*(s*p-f*h),t[1]=-(n*(h*m-p*g)-l*(i*m-o*g)+v*(i*p-o*h)),t[2]=n*(s*m-f*g)-a*(i*m-o*g)+v*(i*f-o*s),t[3]=-(n*(s*p-f*h)-a*(i*p-o*h)+l*(i*f-o*s)),t[4]=-(u*(h*m-p*g)-c*(s*m-f*g)+d*(s*p-f*h)),t[5]=r*(h*m-p*g)-c*(i*m-o*g)+d*(i*p-o*h),t[6]=-(r*(s*m-f*g)-u*(i*m-o*g)+d*(i*f-o*s)),t[7]=r*(s*p-f*h)-u*(i*p-o*h)+c*(i*f-o*s),t[8]=u*(l*m-p*v)-c*(a*m-f*v)+d*(a*p-f*l),t[9]=-(r*(l*m-p*v)-c*(n*m-o*v)+d*(n*p-o*l)),t[10]=r*(a*m-f*v)-u*(n*m-o*v)+d*(n*f-o*a),t[11]=-(r*(a*p-f*l)-u*(n*p-o*l)+c*(n*f-o*a)),t[12]=-(u*(l*g-h*v)-c*(a*g-s*v)+d*(a*h-s*l)),t[13]=r*(l*g-h*v)-c*(n*g-i*v)+d*(n*h-i*l),t[14]=-(r*(a*g-s*v)-u*(n*g-i*v)+d*(n*s-i*a)),t[15]=r*(a*h-s*l)-u*(n*h-i*l)+c*(n*s-i*a),t},i.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],u=t[5],a=t[6],s=t[7],f=t[8],c=t[9],l=t[10],h=t[11],p=t[12],d=t[13],v=t[14],g=t[15],m=e*u-r*o,_=e*a-n*o,y=e*s-i*o,b=r*a-n*u,x=r*s-i*u,w=n*s-i*a,M=f*d-c*p,P=f*v-l*p,A=f*g-h*p,O=c*v-l*d,R=c*g-h*d,E=l*g-h*v;return m*E-_*R+y*O+b*A-x*P+w*M},i.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],_=e[15],y=r[0],b=r[1],x=r[2],w=r[3];return t[0]=y*n+b*a+x*l+w*v,t[1]=y*i+b*s+x*h+w*g,t[2]=y*o+b*f+x*p+w*m,t[3]=y*u+b*c+x*d+w*_,y=r[4],b=r[5],x=r[6],w=r[7],t[4]=y*n+b*a+x*l+w*v,t[5]=y*i+b*s+x*h+w*g,t[6]=y*o+b*f+x*p+w*m,t[7]=y*u+b*c+x*d+w*_,y=r[8],b=r[9],x=r[10],w=r[11],t[8]=y*n+b*a+x*l+w*v,t[9]=y*i+b*s+x*h+w*g,t[10]=y*o+b*f+x*p+w*m,t[11]=y*u+b*c+x*d+w*_,y=r[12],b=r[13],x=r[14],w=r[15],t[12]=y*n+b*a+x*l+w*v,t[13]=y*i+b*s+x*h+w*g,t[14]=y*o+b*f+x*p+w*m,t[15]=y*u+b*c+x*d+w*_,t},i.mul=i.multiply,i.translate=function(t,e,r){var n,i,o,u,a,s,f,c,l,h,p,d,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],u=e[3],a=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=u,t[4]=a,t[5]=s,t[6]=f,t[7]=c,t[8]=l,t[9]=h,t[10]=p,t[11]=d,t[12]=n*v+a*g+l*m+e[12],t[13]=i*v+s*g+h*m+e[13],t[14]=o*v+f*g+p*m+e[14],t[15]=u*v+c*g+d*m+e[15]),t},i.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.rotate=function(t,e,r,i){var o,u,a,s,f,c,l,h,p,d,v,g,m,_,y,b,x,w,M,P,A,O,R,E,F=i[0],j=i[1],T=i[2],S=Math.sqrt(F*F+j*j+T*T);return Math.abs(S)<n.EPSILON?null:(S=1/S,F*=S,j*=S,T*=S,o=Math.sin(r),u=Math.cos(r),a=1-u,s=e[0],f=e[1],c=e[2],l=e[3],h=e[4],p=e[5],d=e[6],v=e[7],g=e[8],m=e[9],_=e[10],y=e[11],b=F*F*a+u,x=j*F*a+T*o,w=T*F*a-j*o,M=F*j*a-T*o,P=j*j*a+u,A=T*j*a+F*o,O=F*T*a+j*o,R=j*T*a-F*o,E=T*T*a+u,t[0]=s*b+h*x+g*w,t[1]=f*b+p*x+m*w,t[2]=c*b+d*x+_*w,t[3]=l*b+v*x+y*w,t[4]=s*M+h*P+g*A,t[5]=f*M+p*P+m*A,t[6]=c*M+d*P+_*A,t[7]=l*M+v*P+y*A,t[8]=s*O+h*R+g*E,t[9]=f*O+p*R+m*E,t[10]=c*O+d*R+_*E,t[11]=l*O+v*R+y*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],u=e[5],a=e[6],s=e[7],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+f*n,t[5]=u*i+c*n,t[6]=a*i+l*n,t[7]=s*i+h*n,t[8]=f*i-o*n,t[9]=c*i-u*n,t[10]=l*i-a*n,t[11]=h*i-s*n,t},i.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],u=e[1],a=e[2],s=e[3],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-f*n,t[1]=u*i-c*n,t[2]=a*i-l*n,t[3]=s*i-h*n,t[8]=o*n+f*i,t[9]=u*n+c*i,t[10]=a*n+l*i,t[11]=s*n+h*i,t},i.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],u=e[1],a=e[2],s=e[3],f=e[4],c=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+f*n,t[1]=u*i+c*n,t[2]=a*i+l*n,t[3]=s*i+h*n,t[4]=f*i-o*n,t[5]=c*i-u*n,t[6]=l*i-a*n,t[7]=h*i-s*n,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,r){var i,o,u,a=r[0],s=r[1],f=r[2],c=Math.sqrt(a*a+s*s+f*f);return Math.abs(c)<n.EPSILON?null:(c=1/c,a*=c,s*=c,f*=c,i=Math.sin(e),o=Math.cos(e),u=1-o,t[0]=a*a*u+o,t[1]=s*a*u+f*i,t[2]=f*a*u-s*i,t[3]=0,t[4]=a*s*u-f*i,t[5]=s*s*u+o,t[6]=f*s*u+a*i,t[7]=0,t[8]=a*f*u+s*i,t[9]=s*f*u-a*i,t[10]=f*f*u+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=n+n,s=i+i,f=o+o,c=n*a,l=n*s,h=n*f,p=i*s,d=i*f,v=o*f,g=u*a,m=u*s,_=u*f;return t[0]=1-(p+v),t[1]=l+_,t[2]=h-m,t[3]=0,t[4]=l-_,t[5]=1-(c+v),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(c+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},i.fromRotationTranslationScale=function(t,e,r,n){var i=e[0],o=e[1],u=e[2],a=e[3],s=i+i,f=o+o,c=u+u,l=i*s,h=i*f,p=i*c,d=o*f,v=o*c,g=u*c,m=a*s,_=a*f,y=a*c,b=n[0],x=n[1],w=n[2];return t[0]=(1-(d+g))*b,t[1]=(h+y)*b,t[2]=(p-_)*b,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(l+g))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(p+_)*w,t[9]=(v-m)*w,t[10]=(1-(l+d))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){var o=e[0],u=e[1],a=e[2],s=e[3],f=o+o,c=u+u,l=a+a,h=o*f,p=o*c,d=o*l,v=u*c,g=u*l,m=a*l,_=s*f,y=s*c,b=s*l,x=n[0],w=n[1],M=n[2],P=i[0],A=i[1],O=i[2];return t[0]=(1-(v+m))*x,t[1]=(p+b)*x,t[2]=(d-y)*x,t[3]=0,t[4]=(p-b)*w,t[5]=(1-(h+m))*w,t[6]=(g+_)*w,t[7]=0,t[8]=(d+y)*M,t[9]=(g-_)*M,t[10]=(1-(h+v))*M,t[11]=0,t[12]=r[0]+P-(t[0]*P+t[4]*A+t[8]*O),t[13]=r[1]+A-(t[1]*P+t[5]*A+t[9]*O),t[14]=r[2]+O-(t[2]*P+t[6]*A+t[10]*O),t[15]=1,t},i.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=r+r,a=n+n,s=i+i,f=r*u,c=n*u,l=n*a,h=i*u,p=i*a,d=i*s,v=o*u,g=o*a,m=o*s;return t[0]=1-l-d,t[1]=c+m,t[2]=h-g,t[3]=0,t[4]=c-m,t[5]=1-f-d,t[6]=p+v,t[7]=0,t[8]=h+g,t[9]=p-v,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,r,n,i,o,u){var a=1/(r-e),s=1/(i-n),f=1/(o-u);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*s,t[10]=(u+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*f,t[15]=0,t},i.perspective=function(t,e,r,n,i){var o=1/Math.tan(e/2),u=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*u,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),s=2/(u+a),f=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-((u-a)*s*.5),t[9]=(i-o)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},i.ortho=function(t,e,r,n,i,o,u){var a=1/(e-r),s=1/(n-i),f=1/(o-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*s,t[14]=(u+o)*f,t[15]=1,t},i.lookAt=function(t,e,r,o){var u,a,s,f,c,l,h,p,d,v,g=e[0],m=e[1],_=e[2],y=o[0],b=o[1],x=o[2],w=r[0],M=r[1],P=r[2];return Math.abs(g-w)<n.EPSILON&&Math.abs(m-M)<n.EPSILON&&Math.abs(_-P)<n.EPSILON?i.identity(t):(h=g-w,p=m-M,d=_-P,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,u=b*d-x*p,a=x*h-y*d,s=y*p-b*h,v=Math.sqrt(u*u+a*a+s*s),v?(v=1/v,u*=v,a*=v,s*=v):(u=0,a=0,s=0),f=p*s-d*a,c=d*u-h*s,l=h*a-p*u,v=Math.sqrt(f*f+c*c+l*l),v?(v=1/v,f*=v,c*=v,l*=v):(f=0,c=0,l=0),t[0]=u,t[1]=f,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(u*g+a*m+s*_),t[13]=-(f*g+c*m+l*_),t[14]=-(h*g+p*m+d*_),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},t.exports=i},function(t,e,r){var n=r(84),i=r(87),o=r(90),u=r(91),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,i,u){var s=o.dot(i,u);return-.999999>s?(o.cross(t,e,i),o.length(t)<1e-6&&o.cross(t,r,i),o.normalize(t,t),a.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,i,u),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,a.normalize(n,n))}}(),a.setAxes=function(){var t=i.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],a.normalize(e,a.fromMat3(e,t))}}(),a.clone=u.clone,a.fromValues=u.fromValues,a.copy=u.copy,a.set=u.set,a.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.setAxisAngle=function(t,e,r){r=.5*r;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},a.add=u.add,a.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3],a=r[0],s=r[1],f=r[2],c=r[3];return t[0]=n*c+u*a+i*f-o*s,t[1]=i*c+u*s+o*a-n*f,t[2]=o*c+u*f+n*s-i*a,t[3]=u*c-n*a-i*s-o*f,t},a.mul=a.multiply,a.scale=u.scale,a.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],u=e[3],a=Math.sin(r),s=Math.cos(r);return t[0]=n*s+u*a,t[1]=i*s+o*a,t[2]=o*s-i*a,t[3]=u*s-n*a,t},a.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],u=e[3],a=Math.sin(r),s=Math.cos(r);return t[0]=n*s-o*a,t[1]=i*s+u*a,t[2]=o*s+n*a,t[3]=u*s-i*a,t},a.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],u=e[3],a=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*a,t[1]=i*s-n*a,t[2]=o*s+u*a,t[3]=u*s-o*a,t},a.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},a.dot=u.dot,a.lerp=u.lerp,a.slerp=function(t,e,r,n){var i,o,u,a,s,f=e[0],c=e[1],l=e[2],h=e[3],p=r[0],d=r[1],v=r[2],g=r[3];return o=f*p+c*d+l*v+h*g,0>o&&(o=-o,p=-p,d=-d,v=-v,g=-g),1-o>1e-6?(i=Math.acos(o),u=Math.sin(i),a=Math.sin((1-n)*i)/u,s=Math.sin(n*i)/u):(a=1-n,s=n),t[0]=a*f+s*p,t[1]=a*c+s*d,t[2]=a*l+s*v,t[3]=a*h+s*g,t},a.sqlerp=function(){var t=a.create(),e=a.create();return function(r,n,i,o,u,s){return a.slerp(t,n,u,s),a.slerp(e,i,o,s),a.slerp(r,t,e,2*s*(1-s)),r}}(),a.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=r*r+n*n+i*i+o*o,a=u?1/u:0;return t[0]=-r*a,t[1]=-n*a,t[2]=-i*a,t[3]=o*a,t},a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.length=u.length,a.len=a.length,a.squaredLength=u.squaredLength,a.sqrLen=a.squaredLength,a.normalize=u.normalize,a.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,u=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*u+u]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+u]-e[3*u+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[u]=(e[3*u+i]+e[3*i+u])*r}return t},a.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=a},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,r){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=r[0],a=r[1],s=r[2];return t[0]=i*s-o*a,t[1]=o*u-n*s,t[2]=n*a-i*u,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],u=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=u+n*(r[2]-u),t},i.hermite=function(t,e,r,n,i,o){var u=o*o,a=u*(2*o-3)+1,s=u*(o-2)+o,f=u*(o-1),c=u*(3-2*o);return t[0]=e[0]*a+r[0]*s+n[0]*f+i[0]*c,t[1]=e[1]*a+r[1]*s+n[1]*f+i[1]*c,t[2]=e[2]*a+r[2]*s+n[2]*f+i[2]*c,t},i.bezier=function(t,e,r,n,i,o){var u=1-o,a=u*u,s=o*o,f=a*u,c=3*o*a,l=3*s*u,h=s*o;return t[0]=e[0]*f+r[0]*c+n[0]*l+i[0]*h,t[1]=e[1]*f+r[1]*c+n[1]*l+i[1]*h,t[2]=e[2]*f+r[2]*c+n[2]*l+i[2]*h,t},i.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=r[3]*n+r[7]*i+r[11]*o+r[15];return u=u||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/u,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/u,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/u,t},i.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=r[0],a=r[1],s=r[2],f=r[3],c=f*n+a*o-s*i,l=f*i+s*n-u*o,h=f*o+u*i-a*n,p=-u*n-a*i-s*o;return t[0]=c*f+p*-u+l*-s-h*-a,t[1]=l*f+p*-a+h*-u-c*-s,t[2]=h*f+p*-s+c*-a-l*-u,t},i.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,u){var a,s;for(r||(r=3),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,a=n;s>a;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,u),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),i.angle=function(t,e){var r=i.fromValues(t[0],t[1],t[2]),n=i.fromValues(e[0],e[1],e[2]);i.normalize(r,r),i.normalize(n,n);var o=i.dot(r,n);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=i},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],u=r*r+n*n+i*i+o*o;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=n*u,t[2]=i*u,t[3]=o*u),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],u=e[2],a=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=u+n*(r[2]-u),t[3]=a+n*(r[3]-a),t},i.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*u,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*u,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*u,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*u,t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],u=r[0],a=r[1],s=r[2],f=r[3],c=f*n+a*o-s*i,l=f*i+s*n-u*o,h=f*o+u*i-a*n,p=-u*n-a*i-s*o;return t[0]=c*f+p*-u+l*-s-h*-a,t[1]=l*f+p*-a+h*-u-c*-s,t[2]=h*f+p*-s+c*-a-l*-u,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,u){var a,s;for(r||(r=4),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,a=n;s>a;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,u),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=i},function(t,e,r){var n=r(84),i={};i.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,r){return t[0]=e,t[1]=r,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},i.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},i.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},i.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},i.transformMat3=function(t,e,r){
var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,u){var a,s;for(r||(r=2),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,a=n;s>a;a+=r)t[0]=e[a],t[1]=e[a+1],o(t,t,u),e[a]=t[0],e[a+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},t.exports=i},function(t,e,r){if("undefined"==typeof n)var n={};n.brehaut||(n.brehaut={}),function(){"use strict";function t(t,e){t=t.toString();for(var r=[],n=0,i=Math.max(e-t.length,0);i>n;n++)r.push("0");return r.push(t),r.join("")}function e(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function r(t){return t.replace(/^\s+|\s+$/g,"")}function i(t){return function(){var e=this.clone();return t.apply(e,arguments),e}}function o(t,r){function n(t){return function(){return t.apply(this[s](),arguments)}}function i(){}function o(){return new i}var u=y(l),a=[],s="to"+e(t);for(var f in r)if(r.hasOwnProperty(f)){u[f]=r[f];var c=u[f];if("_"==f.slice(0,1))continue;if(f in l||"function"!=typeof c){if("function"!=typeof c){a.push(f);var h="get"+e(f),p="set"+e(f);l[h]=n(u[h]=function(t){return function(){return this[t]}}(f)),l[p]=n(u[p]=function(t){return function(e){var r=this.clone();return r[t]=e,r}}(f))}}else l[f]=n(c)}return i.prototype=u,_[t]=o,u.clone=function(){for(var t=o(),e=0,r=a.length;r>e;e++){var n=a[e];t[n]=this[n]}return t},l[s]=function(){return o()},m.push(u),u}function u(t){return l.fromObject(t)}var a={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},s="(?:\\+|-)?\\d+",f="(?:\\+|-)?\\d*\\.\\d+",c="(?:"+s+")|(?:"+f+")";s="("+s+")",f="("+f+")",c="("+c+")";var l,h=c+"%",p="\\s*?",d=new RegExp(["^hsl(a?)\\(",c,",",h,",",h,"(,(",c,"))?\\)$"].join(p)),v=new RegExp(["^rgb(a?)\\(",s,",",s,",",s,"(,(",c,"))?\\)$"].join(p)),g=new RegExp(["^rgb(a?)\\(",h,",",h,",",h,"(,(",c,"))?\\)$"].join(p)),m=[],_={};this.object||(this.object=function(t){function e(){}return e.prototype=t,new e});var y=this.object;l={fromObject:function(t){if(!t)return y(l);for(var e=0,r=m.length;r>e;e++){var n=m[e].fromObject(t);if(n)return n}return y(l)},toString:function(){return this.toCSS()}};var b=null;o("RGB",{red:0,green:0,blue:0,alpha:0,getLuminance:function(){return.2126*this.red+.7152*this.green+.0722*this.blue},blend:function(t,e){t=t.toRGB(),e=Math.min(Math.max(e,0),1);var r=this.clone();return r.red=r.red*(1-e)+t.red*e,r.green=r.green*(1-e)+t.green*e,r.blue=r.blue*(1-e)+t.blue*e,r.alpha=r.alpha*(1-e)+t.alpha*e,r},fromObject:function(t){return t instanceof Array?this._fromRGBArray(t):"string"==typeof t?this._fromCSS(r(t)):t.hasOwnProperty("red")&&t.hasOwnProperty("green")&&t.hasOwnProperty("blue")?this._fromRGB(t):void 0},_stringParsers:[function(t){function e(e,r){var n=t.match(e);if(!n||!!n[1]+!!n[5]===1)return null;var i=_.RGB();return i.red=Math.min(1,Math.max(0,n[2]/r)),i.green=Math.min(1,Math.max(0,n[3]/r)),i.blue=Math.min(1,Math.max(0,n[4]/r)),i.alpha=n[5]?Math.min(Math.max(parseFloat(n[6]),0),1):1,i}t=r(t);var n=e(v,255);return n?n:e(g,100)},function(t){var e=t.toLowerCase();if(e in a&&(t=a[e]),t.match(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/)){t=t.replace(/^#/,"");var r=t.length/3,n=Math.pow(16,r)-1,i=_.RGB();return i.red=parseInt(t.slice(0,r),16)/n,i.green=parseInt(t.slice(1*r,2*r),16)/n,i.blue=parseInt(t.slice(2*r),16)/n,i.alpha=1,i}},function(t){return"transparent"===t.toLowerCase()?b:void 0}],_fromCSS:function(t){for(var e=null,r=0,n=this._stringParsers.length;n>r;r++)if(e=this._stringParsers[r](t))return e},_fromRGB:function(t){var e=_.RGB();return e.red=t.red,e.green=t.green,e.blue=t.blue,e.alpha=t.hasOwnProperty("alpha")?t.alpha:1,e},_fromRGBArray:function(t){var e=_.RGB();return e.red=Math.max(0,Math.min(1,t[0]/255)),e.green=Math.max(0,Math.min(1,t[1]/255)),e.blue=Math.max(0,Math.min(1,t[2]/255)),e.alpha=void 0!==t[3]?Math.max(0,Math.min(1,t[3])):1,e},toCSSHex:function(e){e=e||2;var r=Math.pow(16,e)-1,n=["#",t(Math.round(this.red*r).toString(16).toUpperCase(),e),t(Math.round(this.green*r).toString(16).toUpperCase(),e),t(Math.round(this.blue*r).toString(16).toUpperCase(),e)];return n.join("")},toCSS:function(t){if(1===this.alpha)return this.toCSSHex(t);var e=255,r=["rgba(",Math.max(0,Math.min(e,Math.round(this.red*e))),",",Math.max(0,Math.min(e,Math.round(this.green*e))),",",Math.max(0,Math.min(e,Math.round(this.blue*e))),",",Math.max(0,Math.min(1,this.alpha)),")"];return r.join("")},toHSV:function(){var t,e,r,n=_.HSV();return t=Math.min(this.red,this.green,this.blue),e=Math.max(this.red,this.green,this.blue),n.value=e,r=e-t,0==r?n.hue=n.saturation=0:(n.saturation=r/e,this.red==e?n.hue=(this.green-this.blue)/r:this.green==e?n.hue=2+(this.blue-this.red)/r:n.hue=4+(this.red-this.green)/r,n.hue=(60*n.hue+360)%360),n.alpha=this.alpha,n},toHSL:function(){return this.toHSV().toHSL()},toRGB:function(){return this.clone()}}),b=l.fromObject({red:0,blue:0,green:0,alpha:0}),o("HSV",{hue:0,saturation:0,value:1,alpha:1,shiftHue:i(function(t){var e=(this.hue+t)%360;0>e&&(e=(360+e)%360),this.hue=e}),devalueByAmount:i(function(t){this.value=Math.min(1,Math.max(this.value-t,0))}),devalueByRatio:i(function(t){this.value=Math.min(1,Math.max(this.value*(1-t),0))}),valueByAmount:i(function(t){this.value=Math.min(1,Math.max(this.value+t,0))}),valueByRatio:i(function(t){this.value=Math.min(1,Math.max(this.value*(1+t),0))}),desaturateByAmount:i(function(t){this.saturation=Math.min(1,Math.max(this.saturation-t,0))}),desaturateByRatio:i(function(t){this.saturation=Math.min(1,Math.max(this.saturation*(1-t),0))}),saturateByAmount:i(function(t){this.saturation=Math.min(1,Math.max(this.saturation+t,0))}),saturateByRatio:i(function(t){this.saturation=Math.min(1,Math.max(this.saturation*(1+t),0))}),schemeFromDegrees:function(t){for(var e=[],r=0,n=t.length;n>r;r++){var i=this.clone();i.hue=(this.hue+t[r])%360,e.push(i)}return e},complementaryScheme:function(){return this.schemeFromDegrees([0,180])},splitComplementaryScheme:function(){return this.schemeFromDegrees([0,150,320])},splitComplementaryCWScheme:function(){return this.schemeFromDegrees([0,150,300])},splitComplementaryCCWScheme:function(){return this.schemeFromDegrees([0,60,210])},triadicScheme:function(){return this.schemeFromDegrees([0,120,240])},clashScheme:function(){return this.schemeFromDegrees([0,90,270])},tetradicScheme:function(){return this.schemeFromDegrees([0,90,180,270])},fourToneCWScheme:function(){return this.schemeFromDegrees([0,60,180,240])},fourToneCCWScheme:function(){return this.schemeFromDegrees([0,120,180,300])},fiveToneAScheme:function(){return this.schemeFromDegrees([0,115,155,205,245])},fiveToneBScheme:function(){return this.schemeFromDegrees([0,40,90,130,245])},fiveToneCScheme:function(){return this.schemeFromDegrees([0,50,90,205,320])},fiveToneDScheme:function(){return this.schemeFromDegrees([0,40,155,270,310])},fiveToneEScheme:function(){return this.schemeFromDegrees([0,115,230,270,320])},sixToneCWScheme:function(){return this.schemeFromDegrees([0,30,120,150,240,270])},sixToneCCWScheme:function(){return this.schemeFromDegrees([0,90,120,210,240,330])},neutralScheme:function(){return this.schemeFromDegrees([0,15,30,45,60,75])},analogousScheme:function(){return this.schemeFromDegrees([0,30,60,90,120,150])},fromObject:function(t){if(t.hasOwnProperty("hue")&&t.hasOwnProperty("saturation")&&t.hasOwnProperty("value")){var e=_.HSV();return e.hue=t.hue,e.saturation=t.saturation,e.value=t.value,e.alpha=t.hasOwnProperty("alpha")?t.alpha:1,e}return null},_normalise:function(){this.hue%=360,this.saturation=Math.min(Math.max(0,this.saturation),1),this.value=Math.min(Math.max(0,this.value)),this.alpha=Math.min(1,Math.max(0,this.alpha))},toRGB:function(){this._normalise();var t,e,r,n,i,o=_.RGB();if(0===this.saturation)return o.red=this.value,o.green=this.value,o.blue=this.value,o.alpha=this.alpha,o;var u=this.hue/60;switch(t=Math.floor(u),e=u-t,r=this.value*(1-this.saturation),n=this.value*(1-this.saturation*e),i=this.value*(1-this.saturation*(1-e)),t){case 0:o.red=this.value,o.green=i,o.blue=r;break;case 1:o.red=n,o.green=this.value,o.blue=r;break;case 2:o.red=r,o.green=this.value,o.blue=i;break;case 3:o.red=r,o.green=n,o.blue=this.value;break;case 4:o.red=i,o.green=r,o.blue=this.value;break;default:o.red=this.value,o.green=r,o.blue=n}return o.alpha=this.alpha,o},toHSL:function(){this._normalise();var t=_.HSL();t.hue=this.hue;var e=(2-this.saturation)*this.value,r=this.saturation*this.value;return e&&2-e&&(r/=1>=e?e:2-e),e/=2,t.saturation=r,t.lightness=e,t.alpha=this.alpha,t},toHSV:function(){return this.clone()}}),o("HSL",{hue:0,saturation:0,lightness:0,alpha:1,darkenByAmount:i(function(t){this.lightness=Math.min(1,Math.max(this.lightness-t,0))}),darkenByRatio:i(function(t){this.lightness=Math.min(1,Math.max(this.lightness*(1-t),0))}),lightenByAmount:i(function(t){this.lightness=Math.min(1,Math.max(this.lightness+t,0))}),lightenByRatio:i(function(t){this.lightness=Math.min(1,Math.max(this.lightness*(1+t),0))}),fromObject:function(t){return"string"==typeof t?this._fromCSS(t):t.hasOwnProperty("hue")&&t.hasOwnProperty("saturation")&&t.hasOwnProperty("lightness")?this._fromHSL(t):void 0},_fromCSS:function(t){var e=r(t).match(d);if(!e||!!e[1]+!!e[5]===1)return null;var n=_.HSL();return n.hue=(e[2]%360+360)%360,n.saturation=Math.max(0,Math.min(parseInt(e[3],10)/100,1)),n.lightness=Math.max(0,Math.min(parseInt(e[4],10)/100,1)),n.alpha=e[5]?Math.max(0,Math.min(1,parseFloat(e[6]))):1,n},_fromHSL:function(t){var e=_.HSL();return e.hue=t.hue,e.saturation=t.saturation,e.lightness=t.lightness,e.alpha=t.hasOwnProperty("alpha")?t.alpha:1,e},_normalise:function(){this.hue=(this.hue%360+360)%360,this.saturation=Math.min(Math.max(0,this.saturation),1),this.lightness=Math.min(Math.max(0,this.lightness)),this.alpha=Math.min(1,Math.max(0,this.alpha))},toHSL:function(){return this.clone()},toHSV:function(){this._normalise();var t=_.HSV();t.hue=this.hue;var e=2*this.lightness,r=this.saturation*(1>=e?e:2-e);return t.value=(e+r)/2,t.saturation=2*r/(e+r)||0,t.alpha=this.alpha,t},toRGB:function(){return this.toHSV().toRGB()}}),u.isValid=function(t){var e,r=u(t),n=0;for(e in r)r.hasOwnProperty(e)&&n++;return n>0},n.brehaut.Color=u}.call(n.brehaut),t.exports=n.brehaut.Color},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteGroup=e.Picture=e.Scene=e.NodeState=e.Node=void 0;var i=r(95),o=n(i),u=r(96),a=n(u),s=r(104),f=n(s),c=r(137),l=n(c),h=r(113),p=n(h);e.Node=o["default"],e.NodeState=a["default"],e.Scene=f["default"],e.Picture=l["default"],e.SpriteGroup=p["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!t)throw new Error("[Picimo.sg.Node] app is null!");this._readyFunc=null,this._renderPrio=parseFloat(e.renderPrio||0),b.object.definePropertyPublicRO(this,"app",t),this.state=new w["default"](w["default"].CREATE),this.display=!e||e.display!==!1,this._ready=!e||e.ready!==!1,this.name=e?e.name:void 0,e.parent&&Object.defineProperty(this,"parent",{configurable:!0,value:e.parent}),this.children=[],(0,_["default"])(this),this.on("childrenUpdated",_["default"].PRIO_MAX,u.bind(this,this)),void 0!==e&&this.connect(e,{onInit:"init",onInitGl:"initGl",onFrame:"frame",onRenderFrame:"renderFrame",onFrameEnd:"frameEnd",onDestroyGl:"destroyGl",onDestroy:"destroy",onChildrenUpdated:"childrenUpdated"})}function u(t){t.children=t.children.sort(h)}function a(t){t.state.set(w["default"].INIT);var e=[];try{t.emit("init",c(e,t)),g["default"].all(e).then(s.bind(t,t),l.bind(t,t))}catch(r){console.error("[init]",r),this.ready=!1}}function s(t){if(t._initialized=!0,t.ready){var e=[];try{t.emit("initGl",c(e,t)),g["default"].all(e).then(f.bind(t,t),l.bind(t,t))}catch(r){console.error("[initGl]",r),this.ready=!1}}}function f(t){t.ready&&t.state.set(w["default"].READY)}function c(t){return function(e){e&&("function"==typeof e&&(e=new g["default"](e)),t.push(e))}}function l(t){t.ready&&t.state.set(w["default"].ERROR)}function h(t,e){return-t.renderPrio- -e.renderPrio}var p=r(73),d=i(p),v=r(42),g=i(v);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var m=r(35),_=i(m),y=r(36),b=n(y),x=r(96),w=i(x);o.prototype.setReadyFunc=function(t){return t===!1?t=function(){return!1}:t===!0&&(t=null),this._readyFunc=t,this},o.prototype.addChild=function(t){return this.children.push(t),Object.defineProperty(t,"parent",{configurable:!0,value:this}),this.emit("childrenUpdated"),t},o.prototype.find=function(t){if(null!=t){if(this.name===t)return this;var e,r;for(r=0;r<this.children.length;++r)if(e=this.children[r].find(t))return e}},o.prototype.renderFrame=function(){if(this.ready&&(this.state.is(w["default"].CREATE)&&a(this),this.state.is(w["default"].READY)&&this.display)){try{this.emit("frame"),this.emit("renderFrame")}catch(t){return console.error("[frame,renderFrame]",t),void(this.ready=!1)}for(var e=0;e<this.children.length;++e)this.children[e].renderFrame();try{this.emit("frameEnd")}catch(t){console.error("[frameEnd]",t),this.ready=!1}}},o.prototype.destroy=function(){if(!this.state.is(w["default"].DESTROYED)){for(var t=0;t<this.children.length;++t)this.children[t].destroy();if(this.state.set(w["default"].DESTROYED),this._initialized){try{this.emit("destroyGl")}catch(e){console.error("[destroyGl]",e)}try{this.emit("destroy")}catch(e){console.error("[destroy]",e)}}}},(0,d["default"])(o.prototype,{renderPrio:{get:function(){return this._renderPrio},set:function(t){this._renderPrio=parseFloat(t||0),this.parent&&this.parent.emit("childrenUpdated")},enumerable:!0},isRoot:{get:function(){return!this.parent},enumerable:!0},ready:{get:function(){return!(!this._ready||this.state.is(w["default"].ERROR|w["default"].DESTROYED)||this._readyFunc&&!this._readyFunc())},set:function(t){this._ready=!!t},enumerable:!0}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){this.value=0|t,(0,f["default"])(this)}var u=r(97),a=i(u),s=r(101),f=i(s);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var c=r(36),l=n(c);o.prototype.is=function(t){return(this.value&(0|t))>0},o.prototype.set=function(t){return this.value=0|t,this},o.prototype.toString=function(){var t=[];return this.is(o.CREATE)&&t.push("CREATE"),this.is(o.INIT)&&t.push("INIT"),this.is(o.READY)&&t.push("READY"),this.is(o.ERROR)&&t.push("ERROR"),this.is(o.DESTROYED)&&t.push("DESTROYED"),"["+t.join(",")+"]"},l.object.definePropertiesPublicRO(o,{CREATE:1,INIT:2,READY:4,ERROR:8,DESTROYED:16}),(0,a["default"])(o)},function(t,e,r){t.exports={"default":r(98),__esModule:!0}},function(t,e,r){r(99),t.exports=r(13).Object.freeze},function(t,e,r){var n=r(32);r(100)("freeze",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e,r){var n=r(12),i=r(13),o=r(11);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],u={};u[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",u)}},function(t,e,r){t.exports={"default":r(102),__esModule:!0}},function(t,e,r){r(103),t.exports=r(13).Object.seal},function(t,e,r){var n=r(32);r(100)("seal",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];c["default"].call(this,t,e),this.blendMode=e.blendMode,this._sizeVariety="cover"===e.sizeVariety?"cover":"contain",e.projection===!1?(0,l.initWithoutProjection)(this):(0,l.initProjection)(this,e),(0,l.initTransform)(this),this.prevWidth=null,this.prevHeight=null,this.prevPixelRatio=null,this.parentResolution={width:null,height:null,pixelRatio:null,devicePixelRatio:null},this.renderCmd={uniforms:{sceneInfo:[0,0,0],transform:this.transformUniform}},this.isRoot&&(0,l.initRootScene)(this),this.on("frame",h.onFrame),this.connect(e,{onResize:"resize",onProjectionUpdated:"projectionUpdated"})}var o=r(73),u=n(o),a=r(81),s=n(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var f=r(95),c=n(f),l=r(105),h=r(111),p=r(112),d=n(p);i.prototype=(0,s["default"])(c["default"].prototype),i.prototype.constructor=i,(0,d["default"])(i),(0,u["default"])(i.prototype,{scene:{get:function(){if(!this.isRoot)for(var t=this.parent;t;){if("width"in t&&"height"in t&&"pixelRatio"in t&&"devicePixelRatio"in t)return t;t=t.parent}},enumerable:!0}}),i.prototype.setSize=function(t,e,r){var n=parseFloat(t),i=parseFloat(e);return n&&!i?i=n:i&&!n&&(n=i),(n&&i&&this._desiredWidth!==n||this._desiredHeight!==i||this.sizeVariety!==r)&&(this._desiredWidth=n,this._desiredHeight=i,this._desiredPixelRatio=0,this.sizeVariety=r,this.projectionNeedsUpdate=!0,(0,l.updateProjection)(this)),this}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){t.transform=new m.Matrix4,t.transformUniform=new _.UniformValue,t.hasOwnProjection&&t.on("init",p["default"].PRIO_A,function(){this.projectionNeedsUpdate=!0,f(this)})}function u(t){v.object.definePropertiesPublicRO(t,{projection:null,hasOwnProjection:!1,projectionNeedsUpdate:!1}),(0,l["default"])(t,{width:{get:function(){var t=this.scene;return t?t.width:this.app.width},enumerable:!0},height:{get:function(){var t=this.scene;return t?t.height:this.app.height},enumerable:!0},pixelRatio:{get:function(){var t=this.scene;return t?t.pixelRatio:this.app.devicePixelRatio},enumerable:!0},devicePixelRatio:{get:function(){var t=this.scene;return t?t.devicePixelRatio:this.app.devicePixelRatio},enumerable:!0}})}function a(t){t.rootRenderCmd={uniforms:{iGlobalTime:0,iFrameNo:0,iResolution:[0,0],projectionMatrix:t.projection}},t.on("frame",y.onRootFrame)}function s(t,e){v.object.definePropertiesPublicRO(t,{projection:new m.Matrix4,hasOwnProjection:!0}),t.projectionNeedsUpdate=!0,t._desiredPixelRatio=e.pixelRatio?parseFloat(e.pixelRatio):t.isRoot?1:0,t._desiredWidth=e.width?parseFloat(e.width):0,t._desiredHeight=e.height?parseFloat(e.height):0,(0,l["default"])(t,{width:{get:function(){return this._computedWidth?this._computedWidth:this._desiredWidth},set:function(t){var e=parseFloat(t);this._desiredWidth!==e&&(this._desiredWidth=e,e&&(this._desiredPixelRatio=0),this.projectionNeedsUpdate=!0)},enumerable:!0},height:{get:function(){return this._computedHeight?this._computedHeight:this._desiredHeight},set:function(t){var e=parseFloat(t);this._desiredHeight!==e&&(this._desiredHeight=e,e&&(this._desiredPixelRatio=0),this.projectionNeedsUpdate=!0)},enumerable:!0},pixelRatio:{get:function(){if(this._computedPixelRatio)return this._computedPixelRatio;if(this._desiredPixelRatio)return this._desiredPixelRatio;var t=this.scene;return t?t.pixelRatio:0},set:function(t){var e=parseFloat(t);this._desiredPixelRatio!==e&&(this._desiredPixelRatio=e,e&&(this._computedPixelRatio=0,this._desiredWidth=0,this._desiredHeight=0),this.projectionNeedsUpdate=!0)},enumerable:!0},sizeVariety:{get:function(){return this._sizeVariety},set:function(t){var e="cover"===t?"cover":"contain";this._sizeVariety!==e&&(this._sizeVariety=e,this.projectionNeedsUpdate=!0)},enumerable:!0}}),f(t)}function f(t){if(t.hasOwnProjection&&t.projectionNeedsUpdate){var e;if(t._desiredWidth||t._desiredHeight){var r=t.app.height/t.app.width,n=t._desiredHeight/t._desiredWidth,i=t._desiredWidth&&t._desiredHeight&&"cover"===t.sizeVariety;!t._desiredWidth&&t._desiredHeight||n>r?(t._computedWidth=t._desiredHeight/t.app.height*t.app.width,t._computedHeight=t._desiredHeight,i&&(e=t._desiredWidth/t._computedWidth,t._computedWidth*=e,t._computedHeight*=e)):t._desiredWidth&&!t._desiredHeight||r>n?(t._computedWidth=t._desiredWidth,t._computedHeight=t._desiredWidth/t.app.width*t.app.height,i&&(e=t._desiredHeight/t._computedHeight,t._computedWidth*=e,t._computedHeight*=e)):(t._computedWidth=t._desiredWidth,t._computedHeight=t._desiredHeight),t._computedPixelRatio=t.app.width/t._computedWidth/t.app.devicePixelRatio}else if(t._desiredPixelRatio){var o=t.scene,u=o?o:t.app,a=o?o.pixelRatio:t.app.devicePixelRatio;e=t._desiredPixelRatio*a,t._computedWidth=u.width/e,t._computedHeight=u.height/e}t.devicePixelRatio=t.app.width/t._computedWidth,t.projectionNeedsUpdate=!1,t.projection.ortho(t.width,t.height),t.emit("projectionUpdated",t.projection)}}var c=r(73),l=i(c);Object.defineProperty(e,"__esModule",{value:!0}),e.initTransform=o,e.initWithoutProjection=u,e.initRootScene=a,e.initProjection=s,e.updateProjection=f;var h=r(35),p=i(h),d=r(36),v=n(d),g=r(106),m=n(g),_=r(108),y=r(111)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return t>e?t:e}function o(t){for(var e=1;t>e;)e<<=1;return e}function u(t){return 0!==t&&0===(t&t-1)}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix4=void 0,e.maxOf=i,e.findNextPowerOfTwo=o,e.isPowerOfTwo=u;var a=r(107),s=n(a);e.Matrix4=s["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}var o=r(101),u=i(o),a=r(78),s=i(a),f=r(79),c=i(f);Object.defineProperty(e,"__esModule",{value:!0});var l=r(36),h=n(l),p=h.glMatrix.mat4,d=function(){function t(){(0,s["default"])(this,t),this.serial=1,h.object.definePropertyPublicRO(this,"mat4",p.create()),(0,u["default"])(this)}return(0,c["default"])(t,[{key:"identity",value:function(){p.identity(this.mat4),++this.serial}},{key:"ortho",value:function(t,e,r){var n=t>>1,i=e>>1,o=(r?r:Math.pow(2,14))>>1;p.ortho(this.mat4,-n,n,-i,i,-o,o),++this.serial}}]),t}();e["default"]=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UniformValue=e.BlendMode=void 0;var i=r(109),o=n(i),u=r(110),a=n(u);e.BlendMode=o["default"],e.UniformValue=a["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n,i,o){this.depthTest=!!t,this.depthTest?(this.depthMask=e,this.depthFunc=r):(n=e,i=r,o=n),this.blend=!!n,this.blend&&(this.blendFuncSrc=i,this.blendFuncDst=o),(0,u["default"])(this)}var o=r(97),u=n(o);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i,i.prototype.activate=function(t){this.depthTest?(t.enable(t.DEPTH_TEST),t.depthMask(this.depthMask),t.depthFunc(t[this.depthFunc])):t.disable(t.DEPTH_TEST),this.blend?(t.enable(t.BLEND),t.blendFunc(t[this.blendFuncSrc],t[this.blendFuncDst])):t.disable(t.BLEND)},i.DEFAULT=new i(!0,!0,"ALWAYS",!0,"SRC_ALPHA","ONE_MINUS_SRC_ALPHA"),i.ISO3D=new i(!0,!0,"LEQUAL",!0,"SRC_ALPHA","ONE_MINUS_SRC_ALPHA")},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){f.addUid(this),f.object.definePropertiesPublicRO({isRestorable:!!t,isUniformValueCmd:!0,restoreCmd:(0,a["default"])({isUniformValueRestoreCmd:!0,uid:this.uid})}),this.value=null,this.prevValue=null}var u=r(97),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s);o.prototype.getValue=function(t,e){return this.value?"function"==typeof this.value?this.value(t,e):this.value:t},o.prototype.setValue=function(t){return this.value=t,this}},function(t,e,r){"use strict";function n(){u(this),(0,s.updateProjection)(this),o(this),i(this)}function i(t){var e=t.renderCmd;e.uniforms.renderPrio=t.renderPrio,t.app.renderer.addRenderCommand(e)}function o(t){var e=t.width,r=t.height,n=t.pixelRatio,i=t.renderCmd.uniforms;(e!==t.prevWidth||r!==t.prevHeight||n!==t.prevPixelRatio)&&(t.prevWidth=e,t.prevHeight=r,t.prevPixelRatio=n,i.sceneInfo[0]=t.width,i.sceneInfo[1]=t.height,i.sceneInfo[2]=t.pixelRatio,t.emit("resize",e,r,n))}function u(t){var e=t.scene||t.app;(e.width!==t.parentResolution.width||e.height!==t.parentResolution.height||e.pixelRatio!==t.parentResolution.pixelRatio||e.devicePixelRatio!==t.parentResolution.devicePixelRatio)&&(t.parentResolution.width=t.parentResolution.width,t.parentResolution.height=t.parentResolution.height,t.parentResolution.pixelRatio=t.parentResolution.pixelRatio,t.parentResolution.devicePixelRatio=t.parentResolution.devicePixelRatio,t.projectionNeedsUpdate=!0)}function a(){var t=this,e=t.rootRenderCmd.uniforms,r=t.app;e.iGlobalTime=r.now,e.iFrameNo=r.frameNo,e.iResolution[0]=r.width,e.iResolution[1]=r.height,r.renderer.addRenderCommand(t.rootRenderCmd)}Object.defineProperty(e,"__esModule",{value:!0}),e.onFrame=n,e.onRootFrame=a;var s=r(105)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.prototype.appendSpriteGroup=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2];e.parent=this,e.textureAtlas=t;var n=this.addChild(new o["default"](this.app,e));return r&&n.connect(r),n},t.prototype.appendPicture=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2];e.parent=this,e.texture=this.app.loadTexture(t);var n=this.addChild(new a["default"](this.app,e));return r&&n.connect(r),n}};var i=r(113),o=n(i),u=r(137),a=n(u)},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){void 0===e&&(e={}),_["default"].call(this,t,e),s(this,e.textureAtlas),this.program=e.program||"sprite",this.spriteDescriptor=t.sprites.getDescriptor(e.sprites||"default"),this.pipeline=null,this.defaultSpriteWidth=e.defaultWidth||0,this.defaultSpriteHeight=e.defaultHeight||e.defaultWidth,u(this,this.spriteDescriptor,e.capacity||1e3),this.on("initGl",f.bind(this,this)),this.on("renderFrame",c.bind(this,this))}function u(t,e,r){t.pool=new b.VertexObjectPool(e,r);var n=t.pool.NEW;e.hasAttribute("scale",1)?n.scale=1:e.hasAttribute("scale",2)&&n.setScale(1,1),e.hasAttribute("opacity")&&(n.opacity=1),a(t)}function a(t){t.hasDefaultSpriteSize&&t.pool.NEW.setSize(t.defaultSpriteWidth,t.defaultSpriteHeight)}function s(t,e){t.textureAtlas=null,t.setReadyFunc(!1),d["default"].resolve(e).then(function(e){return t.textureAtlas=e,e.promise}).then(function(t){return t.texture.image.promise}).then(function(){t.setReadyFunc(!0)})}function f(t){t.pipeline=new x.SpriteGroupPipeline(t.app,t.program,t.pool,t.textureAtlas),t.pipeline.onInitGl(),t.app.renderer.addPipeline(t.pipeline)}function c(t){t.pipeline.render()}var l=r(73),h=i(l),p=r(42),d=i(p),v=r(81),g=i(v);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var m=r(95),_=i(m),y=r(114),b=n(y),x=r(133);o.prototype=(0,g["default"])(_["default"].prototype),o.prototype.constructor=o,o.prototype.createSprite=function(t,e,r){var n=this.pool.alloc(),i="string"==typeof t?this.textureAtlas.getTexture(t):null==t?this.textureAtlas.getRandomTexture():t;if(i.setTexCoords(n),void 0===e){if(this.hasDefaultSpriteSize||!i)return n;e=i.width,r=i.height}else void 0===r&&(r=e);return n.setSize(e,r),n},o.prototype.setDefaultSpriteSize=function(t,e){this.defaultSpriteWidth=t||0,this.defaultSpriteHeight=e||t,a(this)},(0,h["default"])(o.prototype,{textureAtlas:{get:function(){return this._textureAtlas},set:function(t){if(this._textureAtlas=t,t instanceof b.TextureAtlas)this.ready=!0;else if(this.ready=!1,t&&t.then){var e=this;t.then(function(t){e.textureAtlas=t})}}},hasDefaultSpriteSize:{get:function(){return this.defaultSpriteWidth>0&&this.defaultSpriteHeight>0}}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.VertexObjectPool=e.VertexObjectDescriptor=e.VertexObject=e.VertexIndexArray=e.VertexArray=e.TextureAtlas=e.Texture=e.Resource=e.Po2Image=e.Viewport=e.AABB2=void 0;var i=r(115),o=n(i),u=r(116),a=n(u),s=r(117),f=n(s),c=r(118),l=n(c),h=r(119),p=n(h),d=r(120),v=n(d),g=r(128),m=n(g),_=r(129),y=n(_),b=r(130),x=n(b),w=r(131),M=n(w),P=r(132),A=n(P);e.AABB2=o["default"],e.Viewport=a["default"],e.Po2Image=f["default"],e.Resource=l["default"],e.Texture=p["default"],e.TextureAtlas=v["default"],e.VertexArray=m["default"],e.VertexIndexArray=y["default"],e.VertexObject=x["default"],e.VertexObjectDescriptor=M["default"],e.VertexObjectPool=A["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===e&&(e=0),
void 0===n&&(n=0),e>t?(this.min_x=t,this.max_x=e):(this.min_x=e,this.max_x=t),n>r?(this.min_y=r,this.max_y=n):(this.min_y=n,this.max_y=r),(0,s["default"])(this)}var o=r(73),u=n(o),a=r(101),s=n(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i,(0,u["default"])(i.prototype,{width:{get:function(){return this.max_x-this.min_x+1},enumerable:!0},height:{get:function(){return this.max_y-this.min_y+1},enumerable:!0},center_x:{get:function(){return(this.max_x-this.min_x)/2},enumerable:!0},center_y:{get:function(){return(this.max_y-this.min_y)/2},enumerable:!0}}),i.prototype.addPoint=function(t,e){t<this.min_x?this.min_x=t:t>this.max_x&&(this.max_x=t),e<this.min_y?this.min_y=e:e>this.max_y&&(this.max_y=e)},i.prototype.isInside=function(t,e){return t>=this.min_x&&t<=this.max_x&&e>=this.min_y&&e<=this.max_y?!0:!1},i.prototype.isIntersection=function(t){return t.max_x<this.min_x||t.min_x>this.max_x||t.max_y<this.min_y||t.min_y>this.max_y?!1:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n){var i=parseInt(t,10),o=parseInt(e,10);c["default"].call(this,i,i+parseInt(r,10)-1,o,o+parseInt(n,10)-1)}var o=r(73),u=n(o),a=r(81),s=n(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var f=r(115),c=n(f);i.prototype=(0,s["default"])(c["default"].prototype),i.prototype.constructor=i,(0,u["default"])(i.prototype,{x:{get:function(){return this.min_x},set:function(t){var e=this.width;this.min_x=t,this.max_x=t+e-1},enumerable:!0},y:{get:function(){return this.min_y},set:function(t){var e=this.height;this.min_y=t,this.max_y=t+e-1},enumerable:!0},width:{get:function(){return this.max_x-this.min_x+1},set:function(t){this.max_x=this.min_x+t-1},enumerable:!0},height:{get:function(){return this.max_y-this.min_y+1},set:function(t){this.max_y=this.min_y+t-1},enumerable:!0}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){p.object.definePropertyPublicRO(this,"app",t),p.addUid(this),p.addReadyPromise(this),this.url=null,this.domElement=e,this.image=null,(0,l["default"])(this)}function u(t,e){t._domElement=e,t.image=e?a(e):null,t.ready=!!e}function a(t){if(v.isPowerOfTwo(t.width)&&v.isPowerOfTwo(t.height))return t;var e=v.findNextPowerOfTwo(t.width),r=v.findNextPowerOfTwo(t.height),n=document.createElement("canvas");return n.width=e,n.height=r,n.getContext("2d").drawImage(t,0,0),n}var s=r(73),f=i(s),c=r(101),l=i(c);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var h=r(36),p=n(h),d=r(106),v=n(d);o.prototype.load=function(t){var e=document.createElement("img");return this.domElement=e,this.url=this.app.getAssetUrl(t),e.src=this.url,this},(0,f["default"])(o.prototype,{domElement:{get:function(){return this._domElement},set:function(t){if(t instanceof HTMLCanvasElement)u(this,t);else if(t instanceof HTMLImageElement)if(0===t.width&&0===t.height){this._domElement=t,this.ready=!1;var e=this;t.onload=function(){e.image=a(t),e.ready=!0}}else u(this,t);else u(this,null)},enumerable:!0},width:{get:function(){return this.image?this.image.width:0},enumerable:!0},height:{get:function(){return this.image?this.image.height:0},enumerable:!0}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){l.object.definePropertyPublicRO(this,"app",t),l.addUid(this),l.addReadyPromise(this),this.url=null,this._data=null,void 0!==e&&(0,f["default"])(this,e,{get:function(){return this.data},set:function(t){this.data=t},enumerable:!0})}var u=r(73),a=i(u),s=r(38),f=i(s);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var c=r(36),l=n(c);o.prototype.convertData=function(t){return t},o.prototype.onData=function(){},o.prototype.load=function(t){var e=this;this.url=this.app.getAssetUrl(t);var r=new XMLHttpRequest;return r.open("GET",this.url,!0),r.onreadystatechange=function(){4===r.readyState&&r.status>=200&&r.status<300&&(e.data=r.responseText)},r.send(),this},o.prototype.getData=function(t){throw console.warn("Picimo.core.Resource#getData()",t),new Error("undead code here!")},(0,a["default"])(o.prototype,{data:{get:function(){return this._data},set:function(t){if(t){var e=this.convertData(t);e&&(this._data=e,this.onData(e))}else this._data=t;this.ready=!!this._data},enumerable:!0}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n,i){this._parent=t,this._image=null,this._width=n,this._height=i,this.x=null!=e?e:0,this.y=null!=r?r:0}var o=r(73),u=n(o);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i,(0,u["default"])(i.prototype,{parent:{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0},root:{get:function(){return this._parent?this._parent:this},enumerable:!0},image:{get:function(){return this._image?this._image:this._parent?this._parent.image:null},set:function(t){this._image=t},enumerable:!0},root_width:{get:function(){var t=this.root;return this===t?null!=this._width?this._width:this._image?this._image.width:0:t.root_width},enumerable:!0},root_height:{get:function(){var t=this.root;return this===t?null!=this._height?this._height:this._image?this._image.height:0:t.root_height},enumerable:!0},width:{get:function(){return null!=this._width?this._width:this.root_width},set:function(t){this._width=t},enumerable:!0},height:{get:function(){return null!=this._height?this._height:this.root_height},set:function(t){this._height=t},enumerable:!0},min_s:{get:function(){for(var t=this.x,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root_width},enumerable:!0},min_t:{get:function(){for(var t=this.y,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root_height},enumerable:!0},max_s:{get:function(){for(var t=this.x+this.width,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root_width},enumerable:!0},max_t:{get:function(){for(var t=this.y+this.height,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root_height},enumerable:!0}}),i.prototype.setTexCoords=function(t){var e=this.min_s,r=this.min_t,n=this.max_s,i=this.max_t;t.setTexCoords(e,r,n,r,n,i,e,i)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r){h["default"].call(this,t,"conf"),this.conf=r,this.frameNames=null,this.texture=null,this.frames=null,this.imageUrl=e,(0,c["default"])(this)}var o=r(121),u=n(o),a=r(81),s=n(a),f=r(101),c=n(f);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var l=r(118),h=n(l),p=r(119),d=n(p),v=r(117),g=n(v);i.prototype=(0,s["default"])(h["default"].prototype),i.prototype.constructor=i,i.prototype.convertData=function(t){return"string"==typeof t?JSON.parse(t):t},i.prototype.getImageUrl=function(t){return void 0!==this.imageUrl?this.imageUrl:this.app.joinAssetUrl(this.url,t)},i.prototype.onData=function(t){this.texture=new d["default"],this.texture.width=t.meta.size.w,this.texture.height=t.meta.size.h,this.texture.image=new g["default"](this.app).load(this.getImageUrl(t.meta.image)),this.frameNames=[],this.frames=new u["default"];var e,r;for(e in t.frames)t.frames.hasOwnProperty(e)&&(this.frameNames.push(e),r=t.frames[e].frame,this.frames.set(e,new d["default"](this.texture,r.x,r.y,r.w,r.h)))},i.prototype.getTexture=function(t){return this.frames?this.frames.get(t):void 0},i.prototype.getRandomTexture=function(){return this.frames?this.frames.get(this.frameNames[parseInt(this.frameNames.length*Math.random(),10)]):void 0}},function(t,e,r){t.exports={"default":r(122),__esModule:!0}},function(t,e,r){r(34),r(44),r(50),r(123),r(126),t.exports=r(13).Map},function(t,e,r){"use strict";var n=r(124);r(125)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(7),i=r(17),o=r(70),u=r(14),a=r(56),s=r(27),f=r(57),c=r(47),l=r(53),h=r(22)("id"),p=r(9),d=r(32),v=r(71),g=r(10),m=Object.isExtensible||d,_=g?"_s":"size",y=0,b=function(t,e){if(!d(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!p(t,h)){if(!m(t))return"F";if(!e)return"E";i(t,h,++y)}return"O"+t[h]},x=function(t,e){var r,n=b(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,i){var c=t(function(t,o){a(t,c,e),t._i=n.create(null),t._f=void 0,t._l=void 0,t[_]=0,void 0!=o&&f(o,r,t[i],t)});return o(c.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[_]=0},"delete":function(t){var e=this,r=x(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[_]--}return!!r},forEach:function(t){for(var e,r=u(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!x(this,t)}}),g&&n.setDesc(c.prototype,"size",{get:function(){return s(this[_])}}),c},def:function(t,e,r){var n,i,o=x(t,e);return o?o.v=r:(t._l=o={i:i=b(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[_]++,"F"!==i&&(t._i[i]=o)),t},getEntry:x,setStrong:function(t,e,r){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?l(0,r.k):"values"==e?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),v(e)}}},function(t,e,r){"use strict";var n=r(7),i=r(8),o=r(12),u=r(11),a=r(17),s=r(70),f=r(57),c=r(56),l=r(32),h=r(20),p=r(10);t.exports=function(t,e,r,d,v,g){var m=i[t],_=m,y=v?"set":"add",b=_&&_.prototype,x={};return p&&"function"==typeof _&&(g||b.forEach&&!u(function(){(new _).entries().next()}))?(_=e(function(e,r){c(e,_,t),e._c=new m,void 0!=r&&f(r,v,e[y],e)}),n.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!g||"clear"!=t)&&a(_.prototype,t,function(r,n){if(!e&&g&&!l(r))return"get"==t?void 0:!1;var i=this._c[t](0===r?0:r,n);return e?this:i})}),"size"in b&&n.setDesc(_.prototype,"size",{get:function(){return this._c.size}})):(_=d.getConstructor(e,t,v,y),s(_.prototype,r)),h(_,t),x[t]=_,o(o.G+o.W+o.F,x),g||d.setStrong(_,t,v),_}},function(t,e,r){var n=r(12);n(n.P,"Map",{toJSON:r(127)("Map")})},function(t,e,r){var n=r(57),i=r(55);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");var e=[];return n(this,!1,e.push,e),e}}},function(t,e){"use strict";function r(t,e,r){this.descriptor=t,this.capacity=e,void 0!==r?this.vertices=r:this.vertices=new Float32Array(e*t.vertexCount*t.vertexAttrCount)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r,r.prototype.copy=function(t,e){var r=0;void 0===e&&(r=e*this.descriptor.vertexCount*this.descriptor.vertexAttrCount),this.vertices.set(t.vertices,r)},r.prototype.subarray=function(t,e){void 0===e&&(e=1);var n=this.vertices.subarray(t*this.descriptor.vertexCount*this.descriptor.vertexAttrCount,(t+e)*this.descriptor.vertexCount*this.descriptor.vertexAttrCount);return new r(this.descriptor,e,n)}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t,e){var r=t*e;u.object.definePropertiesPublicRO(this,{vertexObjectCount:t,objectIndexCount:e,size:r,indices:new Uint32Array(r)})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var o=r(36),u=n(o);i.Generate=function(t,e,r,n){var o,u,a=new i(t,e.length);for(void 0===n&&(n=4),void 0===r&&(r=0),o=0;t>o;++o)for(u=0;u<e.length;++u)a.indices[o*a.objectIndexCount+u]=e[u]+(o+r)*n;return a}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(void 0===this.descriptor){var r=t?t:e?e.descriptor:null;if(!r)throw new Error("VertexObject.descriptor is null!");f.object.definePropertyPrivateRO(this,"descriptor",r);var n=e?e:t.createVertexArray();if(f.object.definePropertyPrivate(this,"vertexArray",n),this.descriptor!==this.vertexArray.descriptor&&(this.descriptor.vertexCount!==this.vertexArray.descriptor.vertexCount||this.descriptor.vertexAttrCount!==this.vertexArray.descriptor.vertexAttrCount))throw new Error("Incompatible vertex object descriptors!")}}var u=r(73),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s);(0,a["default"])(o.prototype,{vertices:{get:function(){return this.vertexArray.vertices}}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n,i){this.vertexObjectConstructor="function"==typeof t?t:function(){},this.vertexObjectConstructor.prototype=(0,x["default"])(M["default"].prototype),this.vertexObjectConstructor.prototype.constructor=this.vertexObjectConstructor,this.vertexCount=parseInt(e,10),this.vertexAttrCount=parseInt(r,10),this.attr={};var u,a,s;if(Array.isArray(n)){for(u=0,s=0;s<n.length;++s){if(a=n[s],void 0===a.size)throw new Error("vertex object attribute descriptor has no size property!");void 0!==a.name&&(this.attr[a.name]=new o(a.name,a.size,u,!!a.uniform,a.attrNames)),u+=a.size}if(u>this.vertexAttrCount)throw new Error("vertexAttrCount is too small (offset="+u+")")}var f;if(void 0!==i)for(f in i)i.hasOwnProperty(f)&&(a=i[f],"string"==typeof a?(a=this.attr[a],void 0!==a&&(this.attr[f]=a)):this.attr[f]=new o(f,a.size,a.offset,!!a.uniform,a.attrNames));this.propertiesObject={};for(f in this.attr)this.attr.hasOwnProperty(f)&&(a=this.attr[f],a.defineProperties(f,this.propertiesObject,this));this.vertexObjectPrototype=(0,x["default"])(this.vertexObjectConstructor.prototype,this.propertiesObject),(0,y["default"])(this.attr),(0,y["default"])(this)}function o(t,e,r,n,i){this.name=t,this.size=e,this.offset=r,this.uniform=n,this.attrNames=i,(0,y["default"])(this)}function u(t){return function(e){return this.vertexArray.vertices[t+e]}}function a(t,e,r){return function(n,i){for(var o=this.vertexArray.vertices,u=0;t>u;++u)o[u*e+r]=n,o[u*e+r+1]=i}}function s(t,e,r){return function(n,i,o){for(var u=this.vertexArray.vertices,a=0;t>a;++a)u[a*e+r]=n,u[a*e+r+1]=i,u[a*e+r+2]=o}}function f(t,e,r){return function(n,i,o,u){for(var a=this.vertexArray.vertices,s=0;t>s;++s)a[s*e+r]=n,a[s*e+r+1]=i,a[s*e+r+2]=o,a[s*e+r+3]=u}}function c(t){return function(){return this.vertexArray.vertices[t]}}function l(t,e,r){if(1===t)return function(t){this.vertexArray.vertices[r]=t};if(3===t)return function(t,n,i){var o=this.vertexArray.vertices;o[r]=t,o[e+r]=n,o[2*e+r]=i};if(4===t)return function(t,n,i,o){var u=this.vertexArray.vertices;u[r]=t,u[e+r]=n,u[2*e+r]=i,u[3*e+r]=o};throw new Error("Unsupported vertexCount="+t+" for per vertex attribute (allowed is 1, 3 or 4)")}function h(t,e,r){if(1===t)return function(t,e){var n=this.vertexArray.vertices;n[r]=t,n[r+1]=e};if(3===t)return function(t,n,i,o,u,a){var s=this.vertexArray.vertices;s[r]=t,s[r+1]=n,s[e+r]=i,s[e+r+1]=o,s[2*e+r]=u,s[2*e+r+1]=a};if(4===t)return function(t,n,i,o,u,a,s,f){var c=this.vertexArray.vertices;c[r]=t,c[r+1]=n,c[e+r]=i,c[e+r+1]=o,c[2*e+r]=u,c[2*e+r+1]=a,c[3*e+r]=s,c[3*e+r+1]=f};throw new Error("Unsupported vertexCount="+t+" for per vertex attribute (allowed is 1, 3 or 4)")}function p(t,e,r){if(1===t)return function(t,e,n){var i=this.vertexArray.vertices;i[r]=t,i[r+1]=e,i[r+2]=n};if(3===t)return function(t,n,i,o,u,a,s,f,c){var l=this.vertexArray.vertices;l[r]=t,l[r+1]=n,l[r+2]=i,l[e+r]=o,l[e+r+1]=u,l[e+r+2]=a,l[2*e+r]=s,l[2*e+r+1]=f,l[2*e+r+2]=c};if(4===t)return function(t,n,i,o,u,a,s,f,c,l,h,p){var d=this.vertexArray.vertices;d[r]=t,d[r+1]=n,d[r+2]=i,d[e+r]=o,d[e+r+1]=u,d[e+r+2]=a,d[2*e+r]=s,d[2*e+r+1]=f,d[2*e+r+2]=c,d[3*e+r]=l,d[3*e+r+1]=h,d[3*e+r+2]=p};throw new Error("Unsupported vertexCount="+t+" for per vertex attribute (allowed is 1, 3 or 4)")}function d(t,e,r){return function(n){for(var i=this.vertexArray.vertices,o=0;t>o;++o)i[o*e+r]=n}}function v(t){return t[0].toUpperCase()+t.substr(1)}var g=r(73),m=n(g),_=r(97),y=n(_),b=r(81),x=n(b);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var w=r(130),M=n(w),P=r(128),A=n(P);i.prototype.createVertexArray=function(t){return new A["default"](this,void 0===t?1:t)},i.prototype.create=function(t){var e=(0,x["default"])(this.vertexObjectPrototype);return M["default"].call(e,this,t),M["default"]!==this.vertexObjectConstructor&&this.vertexObjectConstructor.call(e),e},i.prototype.hasAttribute=function(t,e){var r=this.attr[t];return r&&r.size===(e||1)},(0,m["default"])(i.prototype,{proto:{get:function(){return this.vertexObjectConstructor.prototype},enumerable:!0}}),o.prototype.getAttrPostfix=function(t,e){if(this.attrNames){var r=this.attrNames[e];if(void 0!==r)return r}return t+"_"+e},o.prototype.defineProperties=function(t,e,r){var n,i,o;if(1===this.size)if(this.uniform)e[t]={get:c(this.offset),set:d(r.vertexCount,r.vertexAttrCount,this.offset),enumerable:!0};else for(e["set"+v(t)]={value:l(r.vertexCount,r.vertexAttrCount,this.offset),enumerable:!0},n=0;n<r.vertexCount;++n)e[t+n]={get:c(this.offset+n*r.vertexAttrCount),set:l(1,0,this.offset+n*r.vertexAttrCount),enumerable:!0};else{if(!(this.size>=2&&this.size<=4))throw new Error("Unsupprted vertex attribute size of "+this.size+" (should not be greater than 4)");if(this.uniform)for(e["get"+v(t)]={value:u(this.offset),enumerable:!0},o=[a,s,f][this.size-2],e["set"+v(t)]={value:o(r.vertexCount,r.vertexAttrCount,this.offset),enumerable:!0},n=0;n<this.size;++n)e[this.getAttrPostfix(t,n)]={get:c(this.offset+n),set:d(r.vertexCount,r.vertexAttrCount,this.offset+n),enumerable:!0};else for(o=[h,p][this.size-2],e["set"+v(t)]={value:o(r.vertexCount,r.vertexAttrCount,this.offset),enumerable:!0},n=0;n<r.vertexCount;++n)for(i=0;i<this.size;++i)e[this.getAttrPostfix(t,i)+n]={get:c(this.offset+n*r.vertexAttrCount+i),set:l(1,0,this.offset+n*r.vertexAttrCount+i),enumerable:!0}}}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,r){c.object.definePropertiesPublicRO(this,{descriptor:t,capacity:e,vertexArray:null!=r?r:t.createVertexArray(e),ZERO:t.create(),NEW:t.create()}),u(this)}function u(t){t.availableVOs=[];var e,r,n;for(n=0;n<t.capacity;n++)e=t.vertexArray.subarray(n),r=t.descriptor.create(e),r.destroy=t.free.bind(t,r),t.availableVOs.push(r);t.usedVOs=[]}var a=r(73),s=i(a);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var f=r(36),c=n(f);(0,s["default"])(o.prototype,{usedCount:{get:function(){return this.usedVOs.length},enumerable:!0},availableCount:{get:function(){return this.availableVOs.length},enumerable:!0}}),o.prototype.alloc=function(){var t=this.availableVOs.shift();if(void 0===t)throw new Error("VertexObjectPool capacity(="+this.capacity+") reached!");return this.usedVOs.push(t),t.vertexArray.copy(this.NEW.vertexArray),t},o.prototype.free=function(t){var e=this.usedVOs.indexOf(t);if(-1!==e){var r=this.usedVOs.length-1;if(e!==r){var n=this.usedVOs[r];t.vertexArray.copy(n.vertexArray);var i=n.vertexArray;n.vertexArray=t.vertexArray,t.vertexArray=i,this.usedVOs.splice(e,1,n)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.vertexArray.copy(this.ZERO.vertexArray)}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteGroupPipeline=e.PicturePipeline=void 0;var i=r(134),o=n(i),u=r(136),a=n(u);e.PicturePipeline=o["default"],e.SpriteGroupPipeline=a["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){t.webGlBuffer||(t.webGlBuffer=m["default"].fromVertexArray(t.app.glx,t.pool.descriptor,{drawType:t.app.gl.DYNAMIC_DRAW,vertexArray:t.pool.vertexArray}),t.indexArray=v.VertexIndexArray.Generate(t.pool.capacity,[0,1,2,0,2,3]),t.webGlIndexBuffer=m["default"].fromVertexIndexArray(t.app.glx,t.indexArray))}function u(t){t.renderCmd||(t.renderCmd=new d.ObjectPool(function(){var e,r={program:t.program,uniforms:{tex:t.app.texture.findOrCreateWebGlTexture(t.texture)},attributes:{},drawElements:{buffer:t.webGlIndexBuffer,elementType:t.app.gl.TRIANGLES,count:0,offset:0}},n=t.pool.descriptor.attr;for(e in n)n.hasOwnProperty(e)&&(r.attributes[e]={offset:n[e].offset,size:n[e].size,stride:t.pool.descriptor.vertexAttrCount,buffer:t.webGlBuffer});return(0,s["default"])(r),r}))}var a=r(101),s=i(a),f=r(78),c=i(f),l=r(79),h=i(l);Object.defineProperty(e,"__esModule",{value:!0});var p=r(36),d=n(p),v=r(114),g=r(135),m=i(g),_=function(){function t(e,r,n,i){(0,c["default"])(this,t),this.indexArray=null,this.webGlBuffer=null,this.webGlIndexBuffer=null,this.renderCmd=null,d.object.definePropertiesPrivateRO(this,{app:e,pool:r,texture:n,program:i}),this.reset(),(0,s["default"])(this)}return(0,h["default"])(t,[{key:"onInitGl",value:function(){o(this),u(this)}},{key:"reset",value:function(){this.currentSpriteCount=0,this.currentSpriteOffset=0,this.totalSpritesCount=0,this.renderCmd&&this.renderCmd.releaseAll()}},{key:"flush",value:function(){if(this.currentSpriteCount){var t=this.renderCmd.create();t.drawElements.count=this.currentSpriteCount,t.drawElements.offset=this.currentSpriteOffset,this.app.renderer.addRenderCommand(t),this.currentSpriteOffset+=this.currentSpriteCount,this.currentSpriteCount=0}}},{key:"render",value:function(t){this.app.renderer.activatePipeline(this),this.pool.vertexArray.copy(t,this.totalSpritesCount),this.currentSpriteCount++,this.totalSpritesCount++}},{key:"finish",value:function(){this.totalSpritesCount&&(this.flush(),this.webGlBuffer.bufferSubData(null,this.totalSpritesCount*this.pool.descriptor.vertexAttrCount*this.pool.descriptor.vertexCount))}}]),t}();_.DEFAULT_CAPACITY=100,e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var r=t.gl;f.object.definePropertiesPrivateRO(this,{glx:t,glBuffer:r.createBuffer(),drawType:e.drawType||r.DYNAMIC_DRAW,bufferType:e.bufferType||r.ARRAY_BUFFER,itemType:e.itemType||(this.bufferType===r.ARRAY_BUFFER?r.FLOAT:r.UNSIGNED_SHORT),arrType:e.arrType||(this.itemType===r.FLOAT?Float32Array:Uint16Array),itemSize:e.itemSize}),this.numItems=e.numItems||0,this.dataArray=e.dataArray,(0,a["default"])(this)}var u=r(101),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s);o.prototype.bindBuffer=function(){return this.glx.bindBuffer(this.bufferType,this.glBuffer),this},o.prototype.bufferData=function(t){return this.numItems=t.length/this.itemSize|0,this.dataArray=t instanceof this.arrType?t:new this.arrType(t),this.bindBuffer(),this.glx.gl.bufferData(this.bufferType,this.dataArray,this.drawType),this},o.prototype.bufferSubData=function(t,e,r){return this.bindBuffer(),t||(t=this.dataArray),"number"==typeof e&&(void 0===r&&(r=0),t=new this.arrType(t.buffer,r*this.arrType.BYTES_PER_ELEMENT,e)),this.glx.gl.bufferSubData(this.bufferType,0,t),this},o.prototype.vertexAttribPointer=function(t,e,r,n,i){var o=this.glx.gl;return o.vertexAttribPointer(t,e||this.itemSize,this.itemType,i?o.TRUE:o.FALSE,(r||0)*this.arrType.BYTES_PER_ELEMENT,(n||0)*this.arrType.BYTES_PER_ELEMENT),this},o.prototype.drawElements=function(t,e,r){var n=this.glx.gl;n.drawElements(t||n.TRIANGLES,(e||this.numItems)*this.itemSize,this.itemType,(r||0)*this.arrType.BYTES_PER_ELEMENT)},o.prototype.destroy=function(){this.glx&&(this.glBuffer&&(this.glx.gl.deleteBuffer(this.glBuffer),this.glBuffer=null),this.glx=null)},o.fromVertexArray=function(t,e,r){var n={drawType:r&&r.drawType?r.drawType:t.gl.DYNAMIC_DRAW,bufferType:t.gl.ARRAY_BUFFER,itemType:t.gl.FLOAT,arrType:Float32Array,itemSize:e.vertexAttrCount},i=new o(t,n);return r&&r.vertexArray&&i.bufferData(r.vertexArray.vertices),i},o.fromVertexIndexArray=function(t,e){var r={drawType:t.gl.STATIC_DRAW,bufferType:t.gl.ELEMENT_ARRAY_BUFFER,itemType:t.gl.UNSIGNED_SHORT,arrType:Uint16Array,itemSize:e.objectIndexCount,numItems:e.vertexObjectCount},n=new o(t,r);return n.bufferData(e.indices),n}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){t.webGlBuffer||(t.webGlBuffer=m["default"].fromVertexArray(t.app.glx,t.pool.descriptor,{drawType:t.app.gl.DYNAMIC_DRAW,vertexArray:t.pool.vertexArray}),t.indexArray=v.VertexIndexArray.Generate(t.pool.capacity,[0,1,2,0,2,3]),t.webGlIndexBuffer=m["default"].fromVertexIndexArray(t.app.glx,t.indexArray))}function u(t){if(!t.renderCmd){t.renderCmd={program:t.program,uniforms:{tex:t.app.texture.findOrCreateWebGlTexture(t.texture)},attributes:{},drawElements:{buffer:t.webGlIndexBuffer,elementType:t.app.gl.TRIANGLES}};var e,r=t.pool.descriptor.attr;for(e in r)r.hasOwnProperty(e)&&(t.renderCmd.attributes[e]={offset:r[e].offset,size:r[e].size,stride:t.pool.descriptor.vertexAttrCount,buffer:t.webGlBuffer});(0,s["default"])(t.renderCmd)}}var a=r(101),s=i(a),f=r(78),c=i(f),l=r(79),h=i(l);Object.defineProperty(e,"__esModule",{value:!0});var p=r(36),d=n(p),v=r(114),g=r(135),m=i(g),_=function(){function t(e,r,n,i){(0,c["default"])(this,t),this.indexArray=null,this.webGlBuffer=null,this.webGlIndexBuffer=null,this.renderCmd=null,d.object.definePropertiesPrivateRO(this,{app:e,program:r,pool:n,texture:i}),(0,s["default"])(this)}return(0,h["default"])(t,[{key:"onInitGl",value:function(){o(this),u(this)}},{key:"render",value:function(){this.app.renderer.addRenderCommand(this.renderCmd,this)}},{key:"finish",value:function(){this.webGlBuffer.bufferSubData()}}]),t}();e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t.verticesNeedsUpdate){t.verticesNeedsUpdate=!1;var e=void 0,r=void 0,n=t.displayPosition;if(n){var i=t.parent.width,o=t.parent.height,u="string"==typeof n.left?i*(parseFloat(n.left)/100):n.left,a="string"==typeof n.right?i*(parseFloat(n.right)/100):n.right,s="string"==typeof n.top?o*(parseFloat(n.top)/100):n.top,f="string"==typeof n.bottom?o*(parseFloat(n.bottom)/100):n.bottom,c="number"==typeof u?u:null,l="number"==typeof a?i-a:null,h="number"==typeof s?s:null,p="number"==typeof f?o-f:null,d=void 0;"number"==typeof c&&"number"==typeof l?d=l-c:"number"==typeof n.zoom?d=t.texture.width*n.zoom:"number"==typeof n.width?d=n.width:"string"==typeof n.width&&(d=t.texture.width*parseFloat(n.width)/100);var v=void 0;"number"==typeof h&&"number"==typeof p?v=p-h:"number"==typeof n.zoom?v=t.texture.height*n.zoom:"number"==typeof n.height?v=n.height:"string"==typeof n.height&&(v=t.texture.height*parseFloat(n.height)/100),null===c&&"number"==typeof l?c=l-d:null===l&&"number"==typeof c&&(l=c+d),null===h&&"number"==typeof p?h=p-v:null===p&&"number"==typeof h&&(p=h+v),e=.5*i,r=.5*o;var g=n.anchorX||0,m=n.anchorY||0,_=g*(l-c),y=m*(p-h);c-=e-_,l-=e-_,h=o-h-r+y,p=o-p-r+y,t.setVertexPositions(c,p,l,p,l,h,c,h)}else{var b=t.parent.width,x=t.parent.height,w=x/b,M=t.texture.height/t.texture.width;if(1===M)r=e="cover"===t.displaySize?.5*(w>1?x:b):.5*(1>w?x:b);else{var P=void 0;P="cover"===t.displaySize?M>w?b/t.texture.width:x/t.texture.height:w>M?b/t.texture.width:x/t.texture.height,e=.5*P*t.texture.width,r=.5*P*t.texture.height}t.setVertexPositions(-e,-r,e,-r,e,r,-e,r)}}}function u(t){t.pipeline||a(t)}function a(t){var e=t.app.renderer.filterPipelineByInstanceof(O.PicturePipeline),r=t.sprite.descriptor,n=t.texture,i=t.program;if(e=M["default"].filter(e,function(t){return t.texture===n}),e=M["default"].filter(e,function(t){return t.program===i}),e=M["default"].filter(e,function(t){return t.pool.descriptor===r}),e=M["default"].filter(e,function(t){return t.pool.availableCount}),!e.length){var o=new E.VertexObjectPool(r,O.PicturePipeline.DEFAULT_CAPACITY);e[0]=new O.PicturePipeline(t.app,o,n,i),e[0].onInitGl(),t.app.renderer.addPipeline(e[0])}t.pipeline=e[0],t.pipelineSprite=t.pipeline.pool.alloc()}function s(t){o(t),t.pipeline.render(t.sprite)}function f(t,e){t.texture=null,t.setReadyFunc(!1),l["default"].resolve(e.promise||e).then(function(e){return t.texture=e,t.texture.setTexCoords(t.sprite),e.image.promise}).then(function(){return t.setReadyFunc(!0)})}var c=r(42),l=i(c),h=r(138),p=i(h),d=r(78),v=i(d),g=r(79),m=i(g),_=r(142),y=i(_),b=r(143),x=i(b);Object.defineProperty(e,"__esModule",{value:!0});var w=r(147),M=i(w),P=r(95),A=i(P),O=r(133),R=r(114),E=n(R),F=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,v["default"])(this,e);var n=(0,y["default"])(this,(0,p["default"])(e).call(this,t,r));f(n,r.texture),n.program=r.program||"picture",n.sprite=t.sprites.createSprite();var i="number"==typeof r.zoom?r.zoom:1;return n.sprite.sx=i,n.sprite.sy=i,n.sprite.opacity="number"==typeof r.opacity?r.opacity:1,"number"==typeof r.posX&&(n.posX=r.posX),"number"==typeof r.posY&&(n.posY=r.posY),n.pipeline=null,n.pipelineSprite=null,n.verticesNeedsUpdate=!0,r.displayPosition?(n.displayPosition=r.displayPosition,n.displaySize=null):(n.displaySize=r.displaySize||"contain",n.displayPosition=null),n.on("initGl",u.bind(n,n)),n.on("renderFrame",s.bind(n,n)),n.parent.on("resize",function(){n.verticesNeedsUpdate=!0}),n}return(0,x["default"])(e,t),(0,m["default"])(e,[{key:"setVertexPositions",value:function(t,e,r,n,i,o,u,a){this.sprite.setSize(1,1),this.sprite.setXwyh(t,o,r,a,i,e,u,n)}},{key:"setPos",value:function(t,e){return this.sprite.setPos(t,e),this}},{key:"translate",value:function(t,e){var r=this.sprite;return r.setPos(r.x+t,r.y+e),this}},{key:"setScale",value:function(t,e){return this.sprite.setScale(t,e),this}},{key:"setZoom",value:function(t){return this.sprite.setScale(t,t),this}},{key:"setRgb",value:function(t,e,r){return this.sprite.setRgb(t,e,r),this}},{key:"setRgba",value:function(t,e,r,n){return this.sprite.setColor(t,e,r,n),this}},{key:"scaleX",get:function(){return this.sprite.sx},set:function(t){this.sprite.sx=t}},{key:"scaleY",get:function(){return this.sprite.sy},set:function(t){this.sprite.sy=t}},{key:"opacity",get:function(){return this.sprite.opacity},set:function(t){return this.sprite.opacity=t}},{key:"posX",get:function(){return this.sprite.x},set:function(t){this.sprite.x=t}},{key:"posY",get:function(){return this.sprite.y},set:function(t){this.sprite.y=t}},{key:"rotate",get:function(){return this.sprite.rotate},set:function(t){this.sprite.rotate=t}},{key:"rotateDegree",get:function(){return 180*this.sprite.rotate/Math.PI},set:function(t){this.sprite.rotate=t*(Math.PI/180)}}]),e}(A["default"]);e["default"]=F},function(t,e,r){t.exports={"default":r(139),__esModule:!0}},function(t,e,r){r(140),t.exports=r(13).Object.getPrototypeOf},function(t,e,r){var n=r(141);r(100)("getPrototypeOf",function(t){return function(e){return t(n(e))}})},function(t,e,r){var n=r(27);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(3),o=n(i);e["default"]=function(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(144),o=n(i),u=r(81),a=n(u),s=r(3),f=n(s);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,f["default"])(e)));t.prototype=(0,a["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,r){t.exports={"default":r(145),__esModule:!0}},function(t,e,r){r(146),t.exports=r(13).Object.setPrototypeOf},function(t,e,r){var n=r(12);n(n.S,"Object",{setPrototypeOf:r(62).set})},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){return t.set(e[0],e[1]),t}function u(t,e){return t.add(e),t}function a(t,e,r){var n=r.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function s(t,e,r,n){for(var i=-1,o=t.length;++i<o;){var u=t[i];e(n,u,r(u),t)}return n}function f(t,e){for(var r=-1,n=t.length,i=-1,o=e.length,u=Array(n+o);++r<n;)u[r]=t[r];for(;++i<o;)u[r++]=e[i];return u}function c(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function l(t,e){for(var r=t.length;r--&&e(t[r],r,t)!==!1;);return t}function h(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function p(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var u=t[r];e(u,r,t)&&(o[++i]=u)}return o}function d(t,e){return!!t.length&&P(t,e,0)>-1}function v(t,e,r){for(var n=-1,i=t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function g(t,e){for(var r=-1,n=t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function m(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function _(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function y(t,e,r,n){var i=t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function b(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function x(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],u=e(o);if(null!=u&&(a===Z?u===u:r(u,a)))var a=u,s=o}return s}function w(t,e,r,n){var i;return r(t,function(t,r,o){return e(t,r,o)?(i=n?r:t,!1):void 0}),i}function M(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function P(t,e,r){if(e!==e)return z(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function A(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function O(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function R(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==Z&&(r=r===Z?o:r+o)}return r}function E(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function F(t,e){return g(e,function(e){return[e,t[e]]})}function j(t){return function(e){return t(e)}}function T(t,e){return g(e,function(e){return t[e]})}function S(t,e){for(var r=-1,n=t.length;++r<n&&P(e,t[r],0)>-1;);return r}function C(t,e){for(var r=t.length;r--&&P(e,t[r],0)>-1;);return r}function D(t){return t&&t.Object===Object?t:null}function I(t,e){if(t!==e){var r=null===t,n=t===Z,i=t===t,o=null===e,u=e===Z,a=e===e;if(t>e&&!o||!i||r&&!u&&a||n&&a)return 1;if(e>t&&!r||!a||o&&!n&&i||u&&i)return-1}return 0}function U(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,u=i.length,a=r.length;++n<u;){var s=I(i[n],o[n]);if(s){if(n>=a)return s;var f=r[n];return s*("desc"==f?-1:1)}}return t.index-e.index}function B(t){return br[t]}function k(t){return xr[t]}function N(t){return"\\"+Pr[t]}function z(t,e,r){for(var n=t.length,i=e+(r?0:-1);r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function L(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function W(t,e){return t="number"==typeof t||Oe.test(t)?+t:-1,e=null==e?wt:e,t>-1&&t%1==0&&e>t}function G(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function V(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Y(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=Et,o[++i]=r);return o}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function q(t){if(!t||!hr.test(t))return t.length;for(var e=lr.lastIndex=0;lr.test(t);)e++;return e}function X(t){return t.match(lr)}function $(t){return wr[t]}function Q(t){function e(t){if(Fu(t)&&!uc(t)&&!(t instanceof i)){if(t instanceof n)return t;if(js.call(t,"__wrapped__"))return Oi(t)}return new n(t)}function r(){}function n(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Z}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function D(){var t=new i(this.__wrapped__);return t.__actions__=jn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jn(this.__views__),t}function Gt(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Oe(){var t=this.__wrapped__.value(),e=this.__dir__,r=uc(t),n=0>e,i=r?t.length:0,o=ai(0,i,this.__views__),u=o.start,a=o.end,s=a-u,f=n?a:u-1,c=this.__iteratees__,l=c.length,h=0,p=Js(s,this.__takeCount__);if(!r||vt>i||i==s&&p==s)return yn(t,this.__actions__);var d=[];t:for(;s--&&p>h;){f+=e;for(var v=-1,g=t[f];++v<l;){var m=c[v],_=m.iteratee,y=m.type,b=_(g);if(y==mt)g=b;else if(!b){if(y==gt)continue t;break t}}d[h++]=g}return d}function je(){}function Te(t,e){return Ce(t,e)&&delete t[e]}function Se(t,e){if(af){var r=t[e];return r===bt?Z:r}return js.call(t,e)?t[e]:Z}function Ce(t,e){return af?t[e]!==Z:js.call(t,e)}function De(t,e,r){t[e]=af&&r===Z?bt:r}function Ie(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ue(){this.__data__={hash:new je,map:nf?new nf:[],string:new je}}function Be(t){var e=this.__data__;return vi(t)?Te("string"==typeof t?e.string:e.hash,t):nf?e.map["delete"](t):Qe(e.map,t)}function ke(t){var e=this.__data__;return vi(t)?Se("string"==typeof t?e.string:e.hash,t):nf?e.map.get(t):Ze(e.map,t)}function Ne(t){var e=this.__data__;return vi(t)?Ce("string"==typeof t?e.string:e.hash,t):nf?e.map.has(t):Ke(e.map,t)}function ze(t,e){var r=this.__data__;return vi(t)?De("string"==typeof t?r.string:r.hash,t,e):nf?r.map.set(t,e):tr(r.map,t,e),this}function Le(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ie;++e<r;)this.push(t[e])}function We(t,e){var r=t.__data__;if(vi(e)){var n=r.__data__,i="string"==typeof e?n.string:n.hash;return i[e]===bt}return r.has(e)}function Ge(t){var e=this.__data__;if(vi(t)){var r=e.__data__,n="string"==typeof t?r.string:r.hash;n[t]=bt}else e.set(t,bt)}function Ve(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ye(){this.__data__={array:[],map:null}}function He(t){var e=this.__data__,r=e.array;return r?Qe(r,t):e.map["delete"](t)}function qe(t){var e=this.__data__,r=e.array;return r?Ze(r,t):e.map.get(t)}function Xe(t){var e=this.__data__,r=e.array;return r?Ke(r,t):e.map.has(t)}function $e(t,e){var r=this.__data__,n=r.array;n&&(n.length<vt-1?tr(n,t,e):(r.array=null,r.map=new Ie(n)));var i=r.map;return i&&i.set(t,e),this}function Qe(t,e){var r=Je(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():Hs.call(t,r,1),!0}function Ze(t,e){var r=Je(t,e);return 0>r?Z:t[r][1]}function Ke(t,e){return Je(t,e)>-1}function Je(t,e){for(var r=t.length;r--;)if(lu(t[r][0],e))return r;return-1}function tr(t,e,r){var n=Je(t,e);0>n?t.push([e,r]):t[n][1]=r}function er(t,e,r,n){return t===Z||lu(t,Es[r])&&!js.call(n,r)?e:t}function rr(t,e,r){(r!==Z&&!lu(t[e],r)||"number"==typeof e&&r===Z&&!(e in t))&&(t[e]=r)}function nr(t,e,r){var n=t[e];(!lu(n,r)||lu(n,Es[e])&&!js.call(t,e)||r===Z&&!(e in t))&&(t[e]=r)}function ir(t,e,r,n){return gf(t,function(t,i,o){e(n,t,r(t),o)}),n}function or(t,e){return t&&Tn(e,la(e),t)}function ur(t,e){for(var r=-1,n=null==t,i=e.length,o=Array(i);++r<i;)o[r]=n?Z:sa(t,e[r]);return o}function ar(t,e,r){return t===t&&(r!==Z&&(t=r>=t?t:r),e!==Z&&(t=t>=e?t:e)),t}function sr(t,e,r,n,i,o){var u;if(r&&(u=i?r(t,n,i,o):r(t)),u!==Z)return u;if(!Eu(t))return t;var a=uc(t);if(a){if(u=fi(t),!e)return jn(t,u)}else{var s=ui(t),f=s==Dt||s==It;if(s!=kt&&s!=Ft&&(!f||i))return yr[s]?li(t,s,e):i?t:{};if(L(t))return i?t:{};if(u=ci(f?{}:t),!e)return Cn(t,or(u,t))}o||(o=new Ve);var l=o.get(t);return l?l:(o.set(t,u),(a?c:Er)(t,function(n,i){nr(u,i,sr(n,e,r,i,t,o))}),a?u:Cn(t,u))}function fr(t){var e=la(t),r=e.length;return function(n){if(null==n)return!r;for(var i=r;i--;){var o=e[i],u=t[o],a=n[o];if(a===Z&&!(o in Object(n))||!u(a))return!1}return!0}}function lr(t,e,r){if("function"!=typeof t)throw new Os(yt);return Ys(function(){t.apply(Z,r)},e)}function br(t,e,r,n){var i=-1,o=d,u=!0,a=t.length,s=[],f=e.length;if(!a)return s;r&&(e=g(e,j(r))),n?(o=v,u=!1):e.length>=vt&&(o=We,u=!1,e=new Le(e));t:for(;++i<a;){var c=t[i],l=r?r(c):c;if(u&&l===l){for(var h=f;h--;)if(e[h]===l)continue t;s.push(c)}else o(e,l,n)||s.push(c)}return s}function xr(t,e){var r=!0;return gf(t,function(t,n,i){return r=!!e(t,n,i)}),r}function wr(t,e,r,n){var i=t.length;for(r=qu(r),0>r&&(r=-r>i?0:i+r),n=n===Z||n>i?i:qu(n),0>n&&(n+=i),n=r>n?0:Xu(n);n>r;)t[r++]=e;return t}function Mr(t,e){var r=[];return gf(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function Pr(t,e,r,n){n||(n=[]);for(var i=-1,o=t.length;++i<o;){var u=t[i];gu(u)&&(r||uc(u)||du(u))?e?Pr(u,e,r,n):m(n,u):r||(n[n.length]=u)}return n}function Rr(t,e){return null==t?t:_f(t,e,ha)}function Er(t,e){return t&&_f(t,e,la)}function Fr(t,e){return t&&yf(t,e,la)}function jr(t,e){return p(e,function(e){return Au(t[e])})}function Tr(t,e){e=di(e,t)?[e+""]:vn(e);for(var r=0,n=e.length;null!=t&&n>r;)t=t[e[r++]];return r&&r==n?t:Z}function Sr(t,e){return js.call(t,e)||"object"==typeof t&&e in t&&null===Ls(t)}function Ir(t,e){return e in Object(t)}function Ur(t,e,r){return t>=Js(e,r)&&t<Ks(e,r)}function Br(t,e,r){for(var n=r?v:d,i=t.length,o=i,u=Array(i),a=[];o--;){var s=t[o];o&&e&&(s=g(s,j(e))),u[o]=!r&&(e||s.length>=120)?new Le(o&&s):Z}s=t[0];var f=-1,c=s.length,l=u[0];t:for(;++f<c;){var h=s[f],p=e?e(h):h;if(!(l?We(l,p):n(a,p,r))){for(var o=i;--o;){var m=u[o];if(!(m?We(m,p):n(t[o],p,r)))continue t}l&&l.push(p),a.push(h)}}return a}function kr(t,e,r,n){return Er(t,function(t,i,o){e(n,r(t),i,o)}),n}function Nr(t,e,r){di(e,t)||(e=vn(e),t=xi(t,e),e=Gi(e));var n=null==t?t:t[e];return null==n?Z:a(n,t,r)}function zr(t,e,r,n,i){return t===e?!0:null==t||null==e||!Eu(t)&&!Fu(e)?t!==t&&e!==e:Lr(t,e,zr,r,n,i)}function Lr(t,e,r,n,i,o){var u=uc(t),a=uc(e),s=jt,f=jt;u||(s=ui(t),s==Ft?s=kt:s!=kt&&(u=Wu(t))),a||(f=ui(e),f==Ft?f=kt:f!=kt&&(a=Wu(e)));var c=s==kt&&!L(t),l=f==kt&&!L(e),h=s==f;if(h&&!u&&!c)return ti(t,e,s,r,n,i);var p=i&ct;if(!p){var d=c&&js.call(t,"__wrapped__"),v=l&&js.call(e,"__wrapped__");if(d||v)return r(d?t.value():t,v?e.value():e,n,i,o)}return h?(o||(o=new Ve),(u?Jn:ei)(t,e,r,n,i,o)):!1}function Wr(t,e,r,n){var i=r.length,o=i,u=!n;if(null==t)return!o;for(t=Object(t);i--;){var a=r[i];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var s=a[0],f=t[s],c=a[1];if(u&&a[2]){if(f===Z&&!(s in t))return!1}else{var l=new Ve,h=n?n(f,c,s,t,e,l):Z;if(!(h===Z?zr(c,f,n,ft|ct,l):h))return!1}}return!0}function Gr(t){var e=typeof t;return"function"==e?t:null==t?ts:"object"==e?uc(t)?Xr(t[0],t[1]):qr(t):ss(t)}function Vr(t){return Zs(Object(t))}function Yr(t){t=null==t?t:Object(t);var e=[];for(var r in t)e.push(r);return e}function Hr(t,e){var r=-1,n=vu(t)?Array(t.length):[];return gf(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function qr(t){var e=ii(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(n!==Z||r in Object(t))}}return function(r){return r===t||Wr(r,t,e)}}function Xr(t,e){return function(r){var n=sa(r,t);return n===Z&&n===e?ca(r,t):zr(e,n,Z,ft|ct)}}function $r(t,e,r,n,i){if(t!==e){var o=uc(e)||Wu(e)?Z:ha(e);c(o||e,function(u,a){if(o&&(a=u,u=e[a]),Eu(u))i||(i=new Ve),Qr(t,e,a,r,$r,n,i);else{var s=n?n(t[a],u,a+"",t,e,i):Z;s===Z&&(s=u),rr(t,a,s)}})}}function Qr(t,e,r,n,i,o,u){var a=t[r],s=e[r],f=u.get(s);if(f)return void rr(t,r,f);var c=o?o(a,s,r+"",t,e,u):Z,l=c===Z;l&&(c=s,uc(s)||Wu(s)?uc(a)?c=n?jn(a):a:gu(a)?c=jn(a):(l=!1,c=sr(s)):Bu(s)||du(s)?du(a)?c=Qu(a):!Eu(a)||n&&Au(a)?(l=!1,c=sr(s)):c=n?sr(a):a:l=!1),u.set(s,c),l&&i(c,s,n,o,u),rr(t,r,c)}function Zr(t,e,r){var n=-1,i=ni();e=g(e.length?e:Array(1),function(t){return i(t)});var o=Hr(t,function(t,r,i){var o=g(e,function(e){return e(t)});return{criteria:o,index:++n,value:t}});return O(o,function(t,e){return U(t,e,r)})}function Kr(t,e){return t=Object(t),_(e,function(e,r){return r in t&&(e[r]=t[r]),e},{})}function Jr(t,e){var r={};return Rr(t,function(t,n){e(t,n)&&(r[n]=t)}),r}function tn(t){return function(e){return null==e?Z:e[t]}}function en(t){return function(e){return Tr(e,t)}}function rn(t,e){return nn(t,e)}function nn(t,e,r){var n=-1,i=e.length,o=t;for(r&&(o=g(t,function(t){return r(t)}));++n<i;)for(var u=0,a=e[n],s=r?r(a):a;(u=P(o,s,u))>-1;)o!==t&&Hs.call(o,u,1),Hs.call(t,u,1);return t}function on(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(n==r||i!=o){var o=i;if(W(i))Hs.call(t,i,1);else if(di(i,t))delete t[i];else{var u=vn(i),a=xi(t,u);null!=a&&delete a[Gi(u)]}}}return t}function un(t,e){return t+Xs(ef()*(e-t+1))}function an(t,e,r,n){for(var i=-1,o=Ks(qs((e-t)/(r||1)),0),u=Array(o);o--;)u[n?o:++i]=t,t+=r;return u}function sn(t,e,r,n){e=di(e,t)?[e+""]:vn(e);for(var i=-1,o=e.length,u=o-1,a=t;null!=a&&++i<o;){var s=e[i];if(Eu(a)){var f=r;if(i!=u){var c=a[s];f=n?n(c,s,a):Z,f===Z&&(f=null==c?W(e[i+1])?[]:{}:c)}nr(a,s,f)}a=a[s]}return t}function fn(t,e,r){var n=-1,i=t.length;0>e&&(e=-e>i?0:i+e),r=r>i?i:r,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}function cn(t,e){var r;return gf(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function ln(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&Rt>=i){for(;i>n;){var o=n+i>>>1,u=t[o];(r?e>=u:e>u)&&null!==u?n=o+1:i=o}return i}return hn(t,e,ts,r)}function hn(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,u=e!==e,a=null===e,s=e===Z;o>i;){var f=Xs((i+o)/2),c=r(t[f]),l=c!==Z,h=c===c;if(u)var p=h||n;else p=a?h&&l&&(n||null!=c):s?h&&(n||l):null==c?!1:n?e>=c:e>c;p?i=f+1:o=f}return Js(o,Ot)}function pn(t){return dn(t)}function dn(t,e){for(var r=0,n=t.length,i=t[0],o=e?e(i):i,u=o,a=0,s=[i];++r<n;)i=t[r],o=e?e(i):i,lu(o,u)||(u=o,s[++a]=i);return s}function vn(t){return uc(t)?t:Mi(t)}function gn(t,e,r){var n=-1,i=d,o=t.length,u=!0,a=[],s=a;if(r)u=!1,i=v;else if(o>=vt){var f=e?null:xf(t);if(f)return H(f);u=!1,i=We,s=new Le}else s=e?[]:a;t:for(;++n<o;){var c=t[n],l=e?e(c):c;if(u&&l===l){for(var h=s.length;h--;)if(s[h]===l)continue t;e&&s.push(l),a.push(c)}else i(s,l,r)||(s!==a&&s.push(l),a.push(c))}return a}function mn(t,e){e=di(e,t)?[e+""]:vn(e),t=xi(t,e);var r=Gi(e);return null!=t&&fa(t,r)?delete t[r]:!0}function _n(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?fn(t,n?0:o,n?o+1:i):fn(t,n?o+1:0,n?i:o)}function yn(t,e){var r=t;return r instanceof i&&(r=r.value()),_(e,function(t,e){return e.func.apply(e.thisArg,m([t],e.args))},r)}function bn(t,e,r){for(var n=-1,i=t.length;++n<i;)var o=o?m(br(o,t[n],e,r),br(t[n],o,e,r)):t[n];return o&&o.length?gn(o,e,r):[]}function xn(t,e,r){for(var n=-1,i=t.length,o=e.length,u={};++n<i;)r(u,t[n],o>n?e[n]:Z);return u}function wn(t){var e=t.constructor,r=new e(t.byteLength),n=new ks(r);return n.set(new ks(t)),r}function Mn(t){var e=t.constructor;return _(V(t),o,new e)}function Pn(t){var e=t.constructor,r=new e(t.source,be.exec(t));return r.lastIndex=t.lastIndex,r}function An(t){var e=t.constructor;return _(H(t),u,new e)}function On(t){return Bs?Object(hf.call(t)):{}}function Rn(t,e){var r=t.buffer,n=t.constructor;return new n(e?wn(r):r,t.byteOffset,t.length)}function En(t,e,r){for(var n=r.length,i=-1,o=Ks(t.length-n,0),u=-1,a=e.length,s=Array(a+o);++u<a;)s[u]=e[u];for(;++i<n;)s[r[i]]=t[i];for(;o--;)s[u++]=t[i++];return s}function Fn(t,e,r){for(var n=-1,i=r.length,o=-1,u=Ks(t.length-i,0),a=-1,s=e.length,f=Array(u+s);++o<u;)f[o]=t[o];for(var c=o;++a<s;)f[c+a]=e[a];for(;++n<i;)f[c+r[n]]=t[o++];return f}function jn(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function Tn(t,e,r){return Sn(t,e,r)}function Sn(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var u=e[i],a=n?n(r[u],t[u],u,r,t):t[u];nr(r,u,a)}return r}function Cn(t,e){return Tn(t,Pf(t),e)}function Dn(t,e){return function(r,n){var i=uc(r)?s:ir,o=e?e():{};return i(r,t,ni(n),o)}}function In(t){return ru(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:Z,u=i>2?r[2]:Z;for(o="function"==typeof o?(i--,o):Z,u&&pi(r[0],r[1],u)&&(o=3>i?Z:o,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,o)}return e})}function Un(t,e){return function(r,n){if(null==r)return r;if(!vu(r))return t(r,n);for(var i=r.length,o=e?i:-1,u=Object(r);(e?o--:++o<i)&&n(u[o],o,u)!==!1;);return r}}function Bn(t){return function(e,r,n){for(var i=-1,o=Object(e),u=n(e),a=u.length;a--;){var s=u[t?a:++i];if(r(o[s],s,o)===!1)break}return e}}function kn(t,e,r){function n(){var e=this&&this!==Cr&&this instanceof n?o:t;return e.apply(i?r:this,arguments)}var i=e&J,o=Ln(t);return n}function Nn(t){return function(e){e=Ku(e);var r=hr.test(e)?X(e):Z,n=r?r[0]:e.charAt(0),i=r?r.slice(1).join(""):e.slice(1);return n[t]()+i}}function zn(t){return function(e){return _(Qa(ja(e)),t,"")}}function Ln(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=vf(t.prototype),n=t.apply(r,e);return Eu(n)?n:r}}function Wn(t,r,n){function i(){for(var u=arguments.length,s=u,f=Array(u),c=this&&this!==Cr&&this instanceof i?o:t,l=e.placeholder||i.placeholder;s--;)f[s]=arguments[s];var h=3>u&&f[0]!==l&&f[u-1]!==l?[]:Y(f,l);return u-=h.length,n>u?Qn(t,r,Vn,l,Z,f,h,Z,Z,n-u):a(c,this,f)}var o=Ln(t);return i}function Gn(t){return ru(function(e){e=Pr(e);var r=e.length,i=r,o=n.prototype.thru;for(t&&e.reverse();i--;){var u=e[i];if("function"!=typeof u)throw new Os(yt);if(o&&!a&&"wrapper"==ri(u))var a=new n([],!0)}for(i=a?i:r;++i<r;){u=e[i];var s=ri(u),f="wrapper"==s?wf(u):Z;a=f&&gi(f[0])&&f[1]==(ut|rt|it|at)&&!f[4].length&&1==f[9]?a[ri(f[0])].apply(a,f[3]):1==u.length&&gi(u)?a[s]():a.thru(u)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&uc(n)&&n.length>=vt)return a.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}})}function Vn(t,r,n,i,o,u,a,s,f,c){function l(){for(var y=arguments.length,b=y,x=Array(y);b--;)x[b]=arguments[b];if(i&&(x=En(x,i,o)),u&&(x=Fn(x,u,a)),v||g){var w=e.placeholder||l.placeholder,M=Y(x,w);if(y-=M.length,c>y)return Qn(t,r,Vn,w,n,x,M,s,f,c-y)}var P=p?n:this,A=d?P[t]:t;return s?x=wi(x,s):m&&x.length>1&&x.reverse(),h&&f<x.length&&(x.length=f),this&&this!==Cr&&this instanceof l&&(A=_||Ln(A)),A.apply(P,x)}var h=r&ut,p=r&J,d=r&tt,v=r&rt,g=r&nt,m=r&st,_=d?Z:Ln(t);return l}function Yn(t,e){return function(r,n){return kr(r,t,e(n),{})}}function Hn(t){return ru(function(e){return e=g(Pr(e),ni()),ru(function(r){var n=this;return t(e,function(t){return a(t,n,r)})})})}function qn(t,e,r){e=qu(e);var n=q(t);if(!e||n>=e)return"";var i=e-n;r=r===Z?" ":r+"";var o=ka(r,qs(i/q(r)));return hr.test(r)?X(o).slice(0,i).join(""):o.slice(0,i)}function Xn(t,e,r,n){function i(){for(var e=-1,s=arguments.length,f=-1,c=n.length,l=Array(c+s),h=this&&this!==Cr&&this instanceof i?u:t;++f<c;)l[f]=n[f];for(;s--;)l[f++]=arguments[++e];return a(h,o?r:this,l)}var o=e&J,u=Ln(t);return i}function $n(t){return function(e,r,n){return n&&"number"!=typeof n&&pi(e,r,n)&&(r=n=Z),e=$u(e),e=e===e?e:0,r===Z?(r=e,e=0):r=$u(r)||0,n=n===Z?r>e?1:-1:$u(n)||0,an(e,r,n,t)}}function Qn(t,e,r,n,i,o,u,a,s,f){var c=e&rt,l=a?jn(a):Z,h=c?u:Z,p=c?Z:u,d=c?o:Z,v=c?Z:o;e|=c?it:ot,e&=~(c?ot:it),e&et||(e&=~(J|tt));var g=[t,e,i,d,h,v,p,l,s,f],m=r.apply(Z,g);return gi(t)&&Af(m,g),m.placeholder=n,m}function Zn(t){var e=Ps[t];return function(t,r){if(t=$u(t),r=qu(r)){var n=(Ku(t)+"e").split("e"),i=e(n[0]+"e"+(+n[1]+r));return n=(Ku(i)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function Kn(t,e,r,n,i,o,u,a){var s=e&tt;if(!s&&"function"!=typeof t)throw new Os(yt);var f=n?n.length:0;if(f||(e&=~(it|ot),n=i=Z),u=u===Z?u:Ks(qu(u),0),a=a===Z?a:qu(a),f-=i?i.length:0,e&ot){var c=n,l=i;n=i=Z}var h=s?Z:wf(t),p=[t,e,r,n,i,c,l,o,u,a];if(h&&yi(p,h),t=p[0],e=p[1],r=p[2],n=p[3],i=p[4],a=p[9]=null==p[9]?s?0:t.length:Ks(p[9]-f,0),!a&&e&(rt|nt)&&(e&=~(rt|nt)),e&&e!=J)d=e==rt||e==nt?Wn(t,e,a):e!=it&&e!=(J|it)||i.length?Vn.apply(Z,p):Xn(t,e,r,n);else var d=kn(t,e,r);var v=h?bf:Af;return v(d,p)}function Jn(t,e,r,n,i,o){var u=-1,a=i&ct,s=i&ft,f=t.length,c=e.length;if(f!=c&&!(a&&c>f))return!1;var l=o.get(t);if(l)return l==e;var h=!0;for(o.set(t,e);++u<f;){var p=t[u],d=e[u];if(n)var v=a?n(d,p,u,e,t,o):n(p,d,u,t,e,o);if(v!==Z){if(v)continue;h=!1;break}if(s){if(!b(e,function(t){return p===t||r(p,t,n,i,o)})){h=!1;break}}else if(p!==d&&!r(p,d,n,i,o)){h=!1;break}}return o["delete"](t),h}function ti(t,e,r,n,i,o){switch(r){case Vt:return t.byteLength==e.byteLength&&n(new ks(t),new ks(e))?!0:!1;case Tt:case St:return+t==+e;case Ct:return t.name==e.name&&t.message==e.message;case Bt:return t!=+t?e!=+e:t==+e;case Nt:case Lt:return t==e+"";case Ut:var u=V;case zt:var a=o&ct;return u||(u=H),(a||t.size==e.size)&&n(u(t),u(e),i,o|ft);case Wt:return!!Bs&&hf.call(t)==hf.call(e)}return!1}function ei(t,e,r,n,i,o){var u=i&ct,a=la(t),s=a.length,f=la(e),c=f.length;if(s!=c&&!u)return!1;for(var l=s;l--;){var h=a[l];if(!(u?h in e:Sr(e,h)))return!1}var p=o.get(t);if(p)return p==e;var d=!0;o.set(t,e);for(var v=u;++l<s;){h=a[l];var g=t[h],m=e[h];if(n)var _=u?n(m,g,h,e,t,o):n(g,m,h,t,e,o);if(!(_===Z?g===m||r(g,m,n,i,o):_)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return o["delete"](t),d}function ri(t){for(var e=t.name+"",r=df[e],n=js.call(df,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function ni(){var t=e.iteratee||es;return t=t===es?Gr:t,arguments.length?t(arguments[0],arguments[1]):t}function ii(t){for(var e=ba(t),r=e.length;r--;)e[r][2]=_i(e[r][1]);return e}function oi(t,e){var r=null==t?Z:t[e];return Cu(r)?r:Z}function ui(t){return Cs.call(t)}function ai(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=Js(e,t+u);break;case"takeRight":t=Ks(t,e-u)}}return{start:t,end:e}}function si(t,e,r){if(null==t)return!1;var n=r(t,e);n||di(e)||(e=vn(e),t=xi(t,e),null!=t&&(e=Gi(e),n=r(t,e)));var i=t?t.length:Z;return n||!!i&&Ru(i)&&W(e,i)&&(uc(t)||zu(t)||du(t))}function fi(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&js.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function ci(t){if(mi(t))return{};var e=t.constructor;return vf(Au(e)?e.prototype:Z)}function li(t,e,r){var n=t.constructor;switch(e){case Vt:return wn(t);case Tt:case St:return new n(+t);case Yt:case Ht:case qt:case Xt:case $t:case Qt:case Zt:case Kt:case Jt:return Rn(t,r);case Ut:return Mn(t);case Bt:case Lt:return new n(t);case Nt:return Pn(t);case zt:return An(t);case Wt:return On(t)}}function hi(t){var e=t?t.length:Z;return Ru(e)&&(uc(t)||zu(t)||du(t))?E(e,String):null}function pi(t,e,r){if(!Eu(r))return!1;var n=typeof e;return("number"==n?vu(r)&&W(e,r.length):"string"==n&&e in r)?lu(r[e],t):!1}function di(t,e){return"number"==typeof t?!0:!uc(t)&&(le.test(t)||!ce.test(t)||null!=e&&t in Object(e))}function vi(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!==t||null==t}function gi(t){var r=ri(t),n=e[r];if("function"!=typeof n||!(r in i.prototype))return!1;if(t===n)return!0;var o=wf(n);return!!o&&t===o[0]}function mi(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||Es;return t===r}function _i(t){return t===t&&!Eu(t)}function yi(t,e){var r=t[1],n=e[1],i=r|n,o=(J|tt|ut)>i,u=n==ut&&r==rt||n==ut&&r==at&&t[7].length<=e[8]||n==(ut|at)&&e[7].length<=e[8]&&r==rt;if(!o&&!u)return t;n&J&&(t[2]=e[2],i|=r&J?0:et);var a=e[3];if(a){var s=t[3];t[3]=s?En(s,a,e[4]):jn(a),t[4]=s?Y(t[3],Et):jn(e[4])}return a=e[5],a&&(s=t[5],t[5]=s?Fn(s,a,e[6]):jn(a),t[6]=s?Y(t[5],Et):jn(e[6])),a=e[7],a&&(t[7]=jn(a)),n&ut&&(t[8]=null==t[8]?e[8]:Js(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function bi(t,e,r,n,i,o){return Eu(t)&&Eu(e)&&(o.set(e,t),$r(t,e,Z,bi,o)),t}function xi(t,e){return 1==e.length?t:sa(t,fn(e,0,-1))}function wi(t,e){for(var r=t.length,n=Js(e.length,r),i=jn(t);n--;){var o=e[n];t[n]=W(o,r)?i[o]:Z}return t}function Mi(t){var e=[];return Ku(t).replace(he,function(t,r,n,i){e.push(n?i.replace(_e,"$1"):r||t)}),e}function Pi(t){return gu(t)?t:[]}function Ai(t){return"function"==typeof t?t:ts}function Oi(t){if(t instanceof i)return t.clone();var e=new n(t.__wrapped__,t.__chain__);return e.__actions__=jn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ri(t,e){e=Ks(qu(e),0);var r=t?t.length:0;if(!r||1>e)return[];for(var n=0,i=-1,o=Array(qs(r/e));r>n;)o[++i]=fn(t,n,n+=e);return o}function Ei(t){for(var e=-1,r=t?t.length:0,n=-1,i=[];++e<r;){var o=t[e];o&&(i[++n]=o)}return i}function Fi(t,e,r){var n=t?t.length:0;return n?(e=r||e===Z?1:qu(e),fn(t,0>e?0:e,n)):[]}function ji(t,e,r){var n=t?t.length:0;return n?(e=r||e===Z?1:qu(e),e=n-e,fn(t,0,0>e?0:e)):[]}function Ti(t,e){return t&&t.length?_n(t,ni(e,3),!0,!0):[]}function Si(t,e){return t&&t.length?_n(t,ni(e,3),!0):[]}function Ci(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&pi(t,e,r)&&(r=0,n=i),wr(t,e,r,n)):[]}function Di(t,e){return t&&t.length?M(t,ni(e,3)):-1}function Ii(t,e){return t&&t.length?M(t,ni(e,3),!0):-1}function Ui(t){var e=t?t.length:0;return e?Pr(t):[]}function Bi(t){var e=t?t.length:0;return e?Pr(t,!0):[]}function ki(t){for(var e=-1,r=t?t.length:0,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n}function Ni(t){return t?t[0]:Z}function zi(t,e,r){var n=t?t.length:0;return n?(r=qu(r),0>r&&(r=Ks(n+r,0)),P(t,e,r)):-1}function Li(t){return ji(t,1)}function Wi(t,e){return t?Qs.call(t,e):""}function Gi(t){var e=t?t.length:0;return e?t[e-1]:Z}function Vi(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=n;if(r!==Z&&(i=qu(r),i=(0>i?Ks(n+i,0):Js(i,n-1))+1),e!==e)return z(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Yi(t,e){return t&&t.length&&e&&e.length?rn(t,e):t}function Hi(t,e,r){return t&&t.length&&e&&e.length?nn(t,e,ni(r)):t}function qi(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=ni(e,3);++n<o;){var u=t[n];e(u,n,t)&&(r.push(u),i.push(n))}return on(t,i),r}function Xi(t){return t?rf.call(t):t}function $i(t,e,r){var n=t?t.length:0;return n?(r&&"number"!=typeof r&&pi(t,e,r)?(e=0,r=n):(e=null==e?0:qu(e),r=r===Z?n:qu(r)),fn(t,e,r)):[]}function Qi(t,e){return ln(t,e)}function Zi(t,e,r){return hn(t,e,ni(r))}function Ki(t,e){var r=t?t.length:0;if(r){var n=ln(t,e);if(r>n&&lu(t[n],e))return n}return-1}function Ji(t,e){return ln(t,e,!0)}function to(t,e,r){return hn(t,e,ni(r),!0)}function eo(t,e){var r=t?t.length:0;if(r){var n=ln(t,e,!0)-1;if(lu(t[n],e))return n}return-1}function ro(t){return t&&t.length?pn(t):[]}function no(t,e){return t&&t.length?dn(t,ni(e)):[]}function io(t){return Fi(t,1)}function oo(t,e,r){return t&&t.length?(e=r||e===Z?1:qu(e),fn(t,0,0>e?0:e)):[]}function uo(t,e,r){var n=t?t.length:0;return n?(e=r||e===Z?1:qu(e),e=n-e,fn(t,0>e?0:e,n)):[]}function ao(t,e){return t&&t.length?_n(t,ni(e,3),!1,!0):[]}function so(t,e){return t&&t.length?_n(t,ni(e,3)):[]}function fo(t){return t&&t.length?gn(t):[]}function co(t,e){return t&&t.length?gn(t,ni(e)):[]}function lo(t,e){return t&&t.length?gn(t,Z,e):[]}function ho(t){if(!t||!t.length)return[];var e=0;return t=p(t,function(t){return gu(t)?(e=Ks(t.length,e),!0):void 0}),E(e,function(e){return g(t,tn(e))})}function po(t,e){if(!t||!t.length)return[];var r=ho(t);return null==e?r:g(r,function(t){return a(e,Z,t)})}function vo(t,e){return xn(t||[],e||[],nr)}function go(t,e){return xn(t||[],e||[],sn)}function mo(t){var r=e(t);return r.__chain__=!0,r}function _o(t,e){return e(t),t}function yo(t,e){return e(t)}function bo(){return mo(this)}function xo(){return new n(this.value(),this.__chain__)}function wo(t){return this.map(t).flatten()}function Mo(){this.__values__===Z&&(this.__values__=Hu(this.value()));var t=this.__index__>=this.__values__.length,e=t?Z:this.__values__[this.__index__++];return{done:t,value:e}}function Po(){return this}function Ao(t){for(var e,n=this;n instanceof r;){var i=Oi(n);i.__index__=0,i.__values__=Z,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function Oo(){var t=this.__wrapped__;if(t instanceof i){var e=t;return this.__actions__.length&&(e=new i(this)),e=e.reverse(),e.__actions__.push({func:yo,args:[Xi],thisArg:Z}),new n(e,this.__chain__)}return this.thru(Xi)}function Ro(){return yn(this.__wrapped__,this.__actions__)}function Eo(t,e,r){var n=uc(t)?h:xr;return r&&pi(t,e,r)&&(e=Z),n(t,ni(e,3))}function Fo(t,e){var r=uc(t)?p:Mr;return r(t,ni(e,3))}function jo(t,e){if(e=ni(e,3),uc(t)){var r=M(t,e);return r>-1?t[r]:Z}return w(t,e,gf)}function To(t,e){if(e=ni(e,3),uc(t)){var r=M(t,e,!0);return r>-1?t[r]:Z}return w(t,e,mf)}function So(t,e){return Pr(Uo(t,e))}function Co(t,e){return"function"==typeof e&&uc(t)?c(t,e):gf(t,Ai(e))}function Do(t,e){return"function"==typeof e&&uc(t)?l(t,e):mf(t,Ai(e))}function Io(t,e,r,n){t=vu(t)?t:Pa(t),r=r&&!n?qu(r):0;var i=t.length;return 0>r&&(r=Ks(i+r,0)),zu(t)?i>=r&&t.indexOf(e,r)>-1:!!i&&P(t,e,r)>-1}function Uo(t,e){var r=uc(t)?g:Hr;return r(t,ni(e,3))}function Bo(t,e,r,n){return null==t?[]:(uc(e)||(e=null==e?[]:[e]),r=n?Z:r,uc(r)||(r=null==r?[]:[r]),Zr(t,e,r))}function ko(t,e,r){var n=uc(t)?_:A,i=arguments.length<3;return n(t,ni(e,4),r,i,gf)}function No(t,e,r){var n=uc(t)?y:A,i=arguments.length<3;return n(t,ni(e,4),r,i,mf)}function zo(t,e){var r=uc(t)?p:Mr;return e=ni(e,3),r(t,function(t,r,n){return!e(t,r,n)})}function Lo(t){var e=vu(t)?t:Pa(t),r=e.length;return r>0?e[un(0,r-1)]:Z}function Wo(t,e){var r=-1,n=Hu(t),i=n.length,o=i-1;for(e=ar(qu(e),0,i);++r<e;){var u=un(r,o),a=n[u];n[u]=n[r],n[r]=a}return n.length=e,n}function Go(t){return Wo(t,At)}function Vo(t){if(null==t)return 0;if(vu(t)){var e=t.length;return e&&zu(t)?q(t):e}return la(t).length}function Yo(t,e,r){var n=uc(t)?b:cn;return r&&pi(t,e,r)&&(e=Z),n(t,ni(e,3))}function Ho(t,e){if("function"!=typeof e)throw new Os(yt);return t=qu(t),function(){return--t<1?e.apply(this,arguments):void 0}}function qo(t,e,r){return e=r?Z:e,e=t&&null==e?t.length:e,Kn(t,ut,Z,Z,Z,Z,e)}function Xo(t,e){var r;if("function"!=typeof e)throw new Os(yt);return t=qu(t),function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=Z),r}}function $o(t,r,n){r=n?Z:r;var i=Kn(t,rt,Z,Z,Z,Z,Z,r);return i.placeholder=e.placeholder||$o.placeholder,i}function Qo(t,r,n){r=n?Z:r;var i=Kn(t,nt,Z,Z,Z,Z,Z,r);return i.placeholder=e.placeholder||Qo.placeholder,i}function Zo(t,e,r){function n(){d&&Ns(d),c&&Ns(c),g=0,f=c=p=d=v=Z}function i(e,r){r&&Ns(r),c=d=v=Z,e&&(g=Zf(),l=t.apply(p,f),d||c||(f=p=Z))}function o(){var t=e-(Zf()-h);0>=t||t>e?i(v,c):d=Ys(o,t)}function u(){return(d&&v||c&&y)&&(l=t.apply(p,f)),n(),l}function a(){i(y,d)}function s(){if(f=arguments,h=Zf(),p=this,v=y&&(d||!m),_===!1)var r=m&&!d;else{c||m||(g=h);var n=_-(h-g),i=0>=n||n>_;
i?(c&&(c=Ns(c)),g=h,l=t.apply(p,f)):c||(c=Ys(a,n))}return i&&d?d=Ns(d):d||e===_||(d=Ys(o,e)),r&&(i=!0,l=t.apply(p,f)),!i||d||c||(f=p=Z),l}var f,c,l,h,p,d,v,g=0,m=!1,_=!1,y=!0;if("function"!=typeof t)throw new Os(yt);return e=$u(e)||0,Eu(r)&&(m=!!r.leading,_="maxWait"in r&&Ks($u(r.maxWait)||0,e),y="trailing"in r?!!r.trailing:y),s.cancel=n,s.flush=u,s}function Ko(t){return Kn(t,st)}function Jo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Os(yt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=t.apply(this,n);return r.cache=o.set(i,u),u};return r.cache=new Jo.Cache,r}function tu(t){if("function"!=typeof t)throw new Os(yt);return function(){return!t.apply(this,arguments)}}function eu(t){return Xo(2,t)}function ru(t,e){if("function"!=typeof t)throw new Os(yt);return e=Ks(e===Z?t.length-1:qu(e),0),function(){for(var r=arguments,n=-1,i=Ks(r.length-e,0),o=Array(i);++n<i;)o[n]=r[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,r[0],o);case 2:return t.call(this,r[0],r[1],o)}var u=Array(e+1);for(n=-1;++n<e;)u[n]=r[n];return u[e]=o,a(t,this,u)}}function nu(t,e){if("function"!=typeof t)throw new Os(yt);return e=e===Z?0:Ks(qu(e),0),ru(function(r){var n=r[e],i=r.slice(0,e);return n&&m(i,n),a(t,this,i)})}function iu(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new Os(yt);return Eu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Zo(t,e,{leading:n,maxWait:e,trailing:i})}function ou(t){return qo(t,1)}function uu(t,e){return e=null==e?ts:e,nc(e,t)}function au(t){return sr(t)}function su(t,e){return sr(t,!1,e)}function fu(t){return sr(t,!0)}function cu(t,e){return sr(t,!0,e)}function lu(t,e){return t===e||t!==t&&e!==e}function hu(t,e){return t>e}function pu(t,e){return t>=e}function du(t){return gu(t)&&js.call(t,"callee")&&(!Vs.call(t,"callee")||Cs.call(t)==Ft)}function vu(t){return null!=t&&!("function"==typeof t&&Au(t))&&Ru(Mf(t))}function gu(t){return Fu(t)&&vu(t)}function mu(t){return t===!0||t===!1||Fu(t)&&Cs.call(t)==Tt}function _u(t){return Fu(t)&&Cs.call(t)==St}function yu(t){return!!t&&1===t.nodeType&&Fu(t)&&!Bu(t)}function bu(t){if(vu(t)&&(uc(t)||zu(t)||Au(t.splice)||du(t)))return!t.length;for(var e in t)if(js.call(t,e))return!1;return!0}function xu(t,e){return zr(t,e)}function wu(t,e,r){r="function"==typeof r?r:Z;var n=r?r(t,e):Z;return n===Z?zr(t,e,r):!!n}function Mu(t){return Fu(t)&&"string"==typeof t.message&&Cs.call(t)==Ct}function Pu(t){return"number"==typeof t&&$s(t)}function Au(t){var e=Eu(t)?Cs.call(t):"";return e==Dt||e==It}function Ou(t){return"number"==typeof t&&t==qu(t)}function Ru(t){return"number"==typeof t&&t>-1&&t%1==0&&wt>=t}function Eu(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Fu(t){return!!t&&"object"==typeof t}function ju(t,e){return t===e||Wr(t,e,ii(e))}function Tu(t,e,r){return r="function"==typeof r?r:Z,Wr(t,e,ii(e),r)}function Su(t){return Uu(t)&&t!=+t}function Cu(t){return null==t?!1:Au(t)?Is.test(Fs.call(t)):Fu(t)&&(L(t)?Is:Pe).test(t)}function Du(t){return null===t}function Iu(t){return null==t}function Uu(t){return"number"==typeof t||Fu(t)&&Cs.call(t)==Bt}function Bu(t){if(!Fu(t)||Cs.call(t)!=kt||L(t))return!1;var e=Es;if("function"==typeof t.constructor&&(e=Ls(t)),null===e)return!0;var r=e.constructor;return"function"==typeof r&&r instanceof r&&Fs.call(r)==Ss}function ku(t){return Eu(t)&&Cs.call(t)==Nt}function Nu(t){return Ou(t)&&t>=-wt&&wt>=t}function zu(t){return"string"==typeof t||!uc(t)&&Fu(t)&&Cs.call(t)==Lt}function Lu(t){return"symbol"==typeof t||Fu(t)&&Cs.call(t)==Wt}function Wu(t){return Fu(t)&&Ru(t.length)&&!!_r[Cs.call(t)]}function Gu(t){return t===Z}function Vu(t,e){return e>t}function Yu(t,e){return e>=t}function Hu(t){if(!t)return[];if(vu(t))return zu(t)?X(t):jn(t);if(Gs&&t[Gs])return G(t[Gs]());var e=ui(t),r=e==Ut?V:e==zt?H:Pa;return r(t)}function qu(t){if(!t)return 0===t?t:0;if(t=$u(t),t===xt||t===-xt){var e=0>t?-1:1;return e*Mt}var r=t%1;return t===t?r?t-r:t:0}function Xu(t){return t?ar(qu(t),0,At):0}function $u(t){if(Eu(t)){var e=Au(t.valueOf)?t.valueOf():t;t=Eu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ve,"");var r=Me.test(t);return r||Ae.test(t)?Or(t.slice(2),r?2:8):we.test(t)?Pt:+t}function Qu(t){return Tn(t,ha(t))}function Zu(t){return ar(qu(t),-wt,wt)}function Ku(t){if("string"==typeof t)return t;if(null==t)return"";if(Lu(t))return Bs?pf.call(t):"";var e=t+"";return"0"==e&&1/t==-xt?"-0":e}function Ju(t,e){var r=vf(t);return e?or(r,e):r}function ta(t,e){return w(t,ni(e,3),Er,!0)}function ea(t,e){return w(t,ni(e,3),Fr,!0)}function ra(t,e){return null==t?t:_f(t,Ai(e),ha)}function na(t,e){return null==t?t:yf(t,Ai(e),ha)}function ia(t,e){return t&&Er(t,Ai(e))}function oa(t,e){return t&&Fr(t,Ai(e))}function ua(t){return null==t?[]:jr(t,la(t))}function aa(t){return null==t?[]:jr(t,ha(t))}function sa(t,e,r){var n=null==t?Z:Tr(t,e);return n===Z?r:n}function fa(t,e){return si(t,e,Sr)}function ca(t,e){return si(t,e,Ir)}function la(t){var e=mi(t);if(!e&&!vu(t))return Vr(t);var r=hi(t),n=!!r,i=r||[],o=i.length;for(var u in t)!Sr(t,u)||n&&("length"==u||W(u,o))||e&&"constructor"==u||i.push(u);return i}function ha(t){for(var e=-1,r=mi(t),n=Yr(t),i=n.length,o=hi(t),u=!!o,a=o||[],s=a.length;++e<i;){var f=n[e];u&&("length"==f||W(f,s))||"constructor"==f&&(r||!js.call(t,f))||a.push(f)}return a}function pa(t,e){var r={};return e=ni(e,3),Er(t,function(t,n,i){r[e(t,n,i)]=t}),r}function da(t,e){var r={};return e=ni(e,3),Er(t,function(t,n,i){r[n]=e(t,n,i)}),r}function va(t,e){return e=ni(e,2),Jr(t,function(t,r){return!e(t,r)})}function ga(t,e){return null==t?{}:Jr(t,ni(e,2))}function ma(t,e,r){if(di(e,t))n=null==t?Z:t[e];else{e=vn(e);var n=sa(t,e);t=xi(t,e)}return n===Z&&(n=r),Au(n)?n.call(t):n}function _a(t,e,r){return null==t?t:sn(t,e,r)}function ya(t,e,r,n){return n="function"==typeof n?n:Z,null==t?t:sn(t,e,r,n)}function ba(t){return F(t,la(t))}function xa(t){return F(t,ha(t))}function wa(t,e,r){var n=uc(t)||Wu(t);if(e=ni(e,4),null==r)if(n||Eu(t)){var i=t.constructor;r=n?uc(t)?new i:[]:vf(Au(i)?i.prototype:Z)}else r={};return(n?c:Er)(t,function(t,n,i){return e(r,t,n,i)}),r}function Ma(t,e){return null==t?!0:mn(t,e)}function Pa(t){return t?T(t,la(t)):[]}function Aa(t){return null==t?T(t,ha(t)):[]}function Oa(t,e,r){return r===Z&&(r=e,e=Z),r!==Z&&(r=$u(r),r=r===r?r:0),e!==Z&&(e=$u(e),e=e===e?e:0),ar($u(t),e,r)}function Ra(t,e,r){return e=$u(e)||0,r===Z?(r=e,e=0):r=$u(r)||0,t=$u(t),Ur(t,e,r)}function Ea(t,e,r){if(r&&"boolean"!=typeof r&&pi(t,e,r)&&(e=r=Z),r===Z&&("boolean"==typeof e?(r=e,e=Z):"boolean"==typeof t&&(r=t,t=Z)),t===Z&&e===Z?(t=0,e=1):(t=$u(t)||0,e===Z?(e=t,t=0):e=$u(e)||0),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=ef();return Js(t+i*(e-t+Ar("1e-"+((i+"").length-1))),e)}return un(t,e)}function Fa(t){return Ac(Ku(t).toLowerCase())}function ja(t){return t=Ku(t),t&&t.replace(Re,B).replace(cr,"")}function Ta(t,e,r){t=Ku(t),e="string"==typeof e?e:e+"";var n=t.length;return r=r===Z?n:ar(qu(r),0,n),r-=e.length,r>=0&&t.indexOf(e,r)==r}function Sa(t){return t=Ku(t),t&&ue.test(t)?t.replace(ie,k):t}function Ca(t){return t=Ku(t),t&&de.test(t)?t.replace(pe,"\\$&"):t}function Da(t,e,r){t=Ku(t),e=qu(e);var n=q(t);if(!e||n>=e)return t;var i=(e-n)/2,o=Xs(i),u=qs(i);return qn("",o,r)+t+qn("",u,r)}function Ia(t,e,r){return t=Ku(t),t+qn(t,e,r)}function Ua(t,e,r){return t=Ku(t),qn(t,e,r)+t}function Ba(t,e,r){return r||null==e?e=0:e&&(e=+e),t=Ku(t).replace(ve,""),tf(t,e||(xe.test(t)?16:10))}function ka(t,e){t=Ku(t),e=qu(e);var r="";if(!t||1>e||e>wt)return r;do e%2&&(r+=t),e=Xs(e/2),t+=t;while(e);return r}function Na(){var t=arguments,e=Ku(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function za(t,e,r){return Ku(t).split(e,r)}function La(t,e,r){return t=Ku(t),r=ar(qu(r),0,t.length),t.lastIndexOf(e,r)==r}function Wa(t,r,n){var i=e.templateSettings;n&&pi(t,r,n)&&(r=Z),t=Ku(t),r=fc({},r,i,er);var o,u,a=fc({},r.imports,i.imports,er),s=la(a),f=T(a,s),c=0,l=r.interpolate||Ee,h="__p += '",p=As((r.escape||Ee).source+"|"+l.source+"|"+(l===fe?ye:Ee).source+"|"+(r.evaluate||Ee).source+"|$","g"),d="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++mr+"]")+"\n";t.replace(p,function(e,r,n,i,a,s){return n||(n=i),h+=t.slice(c,s).replace(Fe,N),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),h+="';\n";var v=r.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(te,""):h).replace(ee,"$1").replace(re,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Fc(function(){return Function(s,d+"return "+h).apply(Z,f)});if(g.source=h,Mu(g))throw g;return g}function Ga(t){return Ku(t).toLowerCase()}function Va(t){return Ku(t).toUpperCase()}function Ya(t,e,r){if(t=Ku(t),!t)return t;if(r||e===Z)return t.replace(ve,"");if(e+="",!e)return t;var n=X(t),i=X(e);return n.slice(S(n,i),C(n,i)+1).join("")}function Ha(t,e,r){if(t=Ku(t),!t)return t;if(r||e===Z)return t.replace(me,"");if(e+="",!e)return t;var n=X(t);return n.slice(0,C(n,X(e))+1).join("")}function qa(t,e,r){if(t=Ku(t),!t)return t;if(r||e===Z)return t.replace(ge,"");if(e+="",!e)return t;var n=X(t);return n.slice(S(n,X(e))).join("")}function Xa(t,e){var r=lt,n=ht;if(Eu(e)){var i="separator"in e?e.separator:i;r="length"in e?qu(e.length):r,n="omission"in e?Ku(e.omission):n}t=Ku(t);var o=t.length;if(hr.test(t)){var u=X(t);o=u.length}if(r>=o)return t;var a=r-q(n);if(1>a)return n;var s=u?u.slice(0,a).join(""):t.slice(0,a);if(i===Z)return s+n;if(u&&(a+=s.length-a),ku(i)){if(t.slice(a).search(i)){var f,c=s;for(i.global||(i=As(i.source,Ku(be.exec(i))+"g")),i.lastIndex=0;f=i.exec(c);)var l=f.index;s=s.slice(0,l===Z?a:l)}}else if(t.indexOf(i,a)!=a){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+n}function $a(t){return t=Ku(t),t&&oe.test(t)?t.replace(ne,$):t}function Qa(t,e,r){return t=Ku(t),e=r?Z:e,e===Z&&(e=vr.test(t)?dr:pr),t.match(e)||[]}function Za(t){var e=t?t.length:0,r=ni();return t=e?g(t,function(t){if("function"!=typeof t[1])throw new Os(yt);return[r(t[0]),t[1]]}):[],ru(function(r){for(var n=-1;++n<e;){var i=t[n];if(a(i[0],this,r))return a(i[1],this,r)}})}function Ka(t){return fr(sr(t,!0))}function Ja(t){return function(){return t}}function ts(t){return t}function es(t){return Gr("function"==typeof t?t:sr(t,!0))}function rs(t){return qr(sr(t,!0))}function ns(t,e){return Xr(t,sr(e,!0))}function is(t,e,r){var n=la(e),i=jr(e,n);null!=r||Eu(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=jr(e,la(e)));var o=Eu(r)&&"chain"in r?r.chain:!0,u=Au(t);return c(i,function(r){var n=e[r];t[r]=n,u&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__),i=r.__actions__=jn(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,m([this.value()],arguments))})}),t}function os(){return Cr._===this&&(Cr._=Ds),this}function us(){}function as(t){return t=qu(t),function(){return arguments[t]}}function ss(t){return di(t)?tn(t):en(t)}function fs(t){return function(e){return null==t?Z:Tr(t,e)}}function cs(t,e){if(t=qu(t),1>t||t>wt)return[];var r=At,n=Js(t,At);e=Ai(e),t-=At;for(var i=E(n,e);++r<t;)e(r);return i}function ls(t){return uc(t)?g(t,String):Mi(t)}function hs(t){var e=++Ts;return Ku(t)+e}function ps(t,e){var r;return t!==Z&&(r=t),e!==Z&&(r=r===Z?e:r+e),r}function ds(t){return t&&t.length?x(t,ts,hu):Z}function vs(t,e){return t&&t.length?x(t,ni(e),hu):Z}function gs(t){return bs(t)/(t?t.length:0)}function ms(t){return t&&t.length?x(t,ts,Vu):Z}function _s(t,e){return t&&t.length?x(t,ni(e),Vu):Z}function ys(t,e){var r;return t!==Z&&(r=t),e!==Z&&(r=r===Z?e:r-e),r}function bs(t){return t&&t.length?R(t,ts):0}function xs(t,e){return t&&t.length?R(t,ni(e)):0}t=t?Dr.defaults({},t,Dr.pick(Cr,gr)):Cr;var ws=t.Date,Ms=t.Error,Ps=t.Math,As=t.RegExp,Os=t.TypeError,Rs=t.Array.prototype,Es=t.Object.prototype,Fs=t.Function.prototype.toString,js=Es.hasOwnProperty,Ts=0,Ss=Fs.call(Object),Cs=Es.toString,Ds=Cr._,Is=As("^"+Fs.call(js).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Us=t.Reflect,Bs=t.Symbol,ks=t.Uint8Array,Ns=t.clearTimeout,zs=Us?Us.enumerate:Z,Ls=Object.getPrototypeOf,Ws=Object.getOwnPropertySymbols,Gs="symbol"==typeof(Gs=Bs&&Bs.iterator)?Gs:Z,Vs=Es.propertyIsEnumerable,Ys=t.setTimeout,Hs=Rs.splice,qs=Ps.ceil,Xs=Ps.floor,$s=t.isFinite,Qs=Rs.join,Zs=Object.keys,Ks=Ps.max,Js=Ps.min,tf=t.parseInt,ef=Ps.random,rf=Rs.reverse,nf=oi(t,"Map"),of=oi(t,"Set"),uf=oi(t,"WeakMap"),af=oi(Object,"create"),sf=uf&&new uf,ff=nf?Fs.call(nf):"",cf=of?Fs.call(of):"",lf=Bs?Bs.prototype:Z,hf=Bs?lf.valueOf:Z,pf=Bs?lf.toString:Z,df={};e.templateSettings={escape:ae,evaluate:se,interpolate:fe,variable:"",imports:{_:e}};var vf=function(){function t(){}return function(e){if(Eu(e)){t.prototype=e;var r=new t;t.prototype=Z}return r||{}}}(),gf=Un(Er),mf=Un(Fr,!0),_f=Bn(),yf=Bn(!0);zs&&!Vs.call({valueOf:1},"valueOf")&&(Yr=function(t){return G(zs(t))});var bf=sf?function(t,e){return sf.set(t,e),t}:ts,xf=of&&2===new of([1,2]).size?function(t){return new of(t)}:us,wf=sf?function(t){return sf.get(t)}:us,Mf=tn("length"),Pf=Ws||function(){return[]};(nf&&ui(new nf)!=Ut||of&&ui(new of)!=zt)&&(ui=function(t){var e=Cs.call(t),r=e==kt?t.constructor:null,n="function"==typeof r?Fs.call(r):"";if(n){if(n==ff)return Ut;if(n==cf)return zt}return e});var Af=function(){var t=0,e=0;return function(r,n){var i=Zf(),o=dt-(i-e);if(e=i,o>0){if(++t>=pt)return r}else t=0;return bf(r,n)}}(),Of=ru(function(t,e){return uc(t)||(t=null==t?[]:[Object(t)]),e=Pr(e),f(t,e)}),Rf=ru(function(t,e){return gu(t)?br(t,Pr(e,!1,!0)):[]}),Ef=ru(function(t,e){var r=Gi(e);return gu(r)&&(r=Z),gu(t)?br(t,Pr(e,!1,!0),ni(r)):[]}),Ff=ru(function(t,e){var r=Gi(e);return gu(r)&&(r=Z),gu(t)?br(t,Pr(e,!1,!0),Z,r):[]}),jf=ru(function(t){var e=g(t,Pi);return e.length&&e[0]===t[0]?Br(e):[]}),Tf=ru(function(t){var e=Gi(t),r=g(t,Pi);return e===Gi(r)?e=Z:r.pop(),r.length&&r[0]===t[0]?Br(r,ni(e)):[]}),Sf=ru(function(t){var e=Gi(t),r=g(t,Pi);return e===Gi(r)?e=Z:r.pop(),r.length&&r[0]===t[0]?Br(r,Z,e):[]}),Cf=ru(Yi),Df=ru(function(t,e){e=g(Pr(e),String);var r=ur(t,e);return on(t,e.sort(I)),r}),If=ru(function(t){return gn(Pr(t,!1,!0))}),Uf=ru(function(t){var e=Gi(t);return gu(e)&&(e=Z),gn(Pr(t,!1,!0),ni(e))}),Bf=ru(function(t){var e=Gi(t);return gu(e)&&(e=Z),gn(Pr(t,!1,!0),Z,e)}),kf=ru(function(t,e){return gu(t)?br(t,e):[]}),Nf=ru(function(t){return bn(p(t,gu))}),zf=ru(function(t){var e=Gi(t);return gu(e)&&(e=Z),bn(p(t,gu),ni(e))}),Lf=ru(function(t){var e=Gi(t);return gu(e)&&(e=Z),bn(p(t,gu),Z,e)}),Wf=ru(ho),Gf=ru(function(t){var e=t.length,r=e>1?t[e-1]:Z;return r="function"==typeof r?(t.pop(),r):Z,po(t,r)}),Vf=ru(function(t){t=Pr(t);var e=t.length,r=e?t[0]:0,o=this.__wrapped__,u=function(e){return ur(e,t)};return!(e>1||this.__actions__.length)&&o instanceof i&&W(r)?(o=o.slice(r,+r+(e?1:0)),o.__actions__.push({func:yo,args:[u],thisArg:Z}),new n(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Z),t})):this.thru(u)}),Yf=Dn(function(t,e,r){js.call(t,r)?++t[r]:t[r]=1}),Hf=Dn(function(t,e,r){js.call(t,r)?t[r].push(e):t[r]=[e]}),qf=ru(function(t,e,r){var n=-1,i="function"==typeof e,o=di(e),u=vu(t)?Array(t.length):[];return gf(t,function(t){var s=i?e:o&&null!=t?t[e]:Z;u[++n]=s?a(s,t,r):Nr(t,e,r)}),u}),Xf=Dn(function(t,e,r){t[r]=e}),$f=Dn(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),Qf=ru(function(t,e){if(null==t)return[];var r=e.length;return r>1&&pi(t,e[0],e[1])?e=[]:r>2&&pi(e[0],e[1],e[2])&&(e.length=1),Zr(t,Pr(e),[])}),Zf=ws.now,Kf=ru(function(t,r,n){var i=J;if(n.length){var o=e.placeholder||Kf.placeholder,u=Y(n,o);i|=it}return Kn(t,i,r,n,u)}),Jf=ru(function(t,r,n){var i=J|tt;if(n.length){var o=e.placeholder||Jf.placeholder,u=Y(n,o);i|=it}return Kn(r,i,t,n,u)}),tc=ru(function(t,e){return lr(t,1,e)}),ec=ru(function(t,e,r){return lr(t,$u(e)||0,r)}),rc=ru(function(t,e){e=g(Pr(e),ni());var r=e.length;return ru(function(n){for(var i=-1,o=Js(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return a(t,this,n)})}),nc=ru(function(t,r){var n=e.placeholder||nc.placeholder,i=Y(r,n);return Kn(t,it,Z,r,i)}),ic=ru(function(t,r){var n=e.placeholder||ic.placeholder,i=Y(r,n);return Kn(t,ot,Z,r,i)}),oc=ru(function(t,e){return Kn(t,at,Z,Z,Z,Pr(e))}),uc=Array.isArray,ac=In(function(t,e){Tn(e,la(e),t)}),sc=In(function(t,e){Tn(e,ha(e),t)}),fc=In(function(t,e,r,n){Sn(e,ha(e),t,n)}),cc=In(function(t,e,r,n){Sn(e,la(e),t,n)}),lc=ru(function(t,e){return ur(t,Pr(e))}),hc=ru(function(t){return t.push(Z,er),a(fc,Z,t)}),pc=ru(function(t){return t.push(Z,bi),a(_c,Z,t)}),dc=Yn(function(t,e,r){t[e]=r},Ja(ts)),vc=Yn(function(t,e,r){js.call(t,e)?t[e].push(r):t[e]=[r]},ni),gc=ru(Nr),mc=In(function(t,e,r){$r(t,e,r)}),_c=In(function(t,e,r,n){$r(t,e,r,n)}),yc=ru(function(t,e){return null==t?{}:(e=g(Pr(e),String),Kr(t,br(ha(t),e)))}),bc=ru(function(t,e){return null==t?{}:Kr(t,Pr(e))}),xc=zn(function(t,e,r){return e=e.toLowerCase(),t+(r?Fa(e):e)}),wc=zn(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Mc=zn(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Pc=Nn("toLowerCase"),Ac=Nn("toUpperCase"),Oc=zn(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Rc=zn(function(t,e,r){return t+(r?" ":"")+Fa(e)}),Ec=zn(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Fc=ru(function(t,e){try{return a(t,Z,e)}catch(r){return Eu(r)?r:new Ms(r)}}),jc=ru(function(t,e){return c(Pr(e),function(e){t[e]=Kf(t[e],t)}),t}),Tc=Gn(),Sc=Gn(!0),Cc=ru(function(t,e){return function(r){return Nr(r,t,e)}}),Dc=ru(function(t,e){return function(r){return Nr(t,r,e)}}),Ic=Hn(g),Uc=Hn(h),Bc=Hn(b),kc=$n(),Nc=$n(!0),zc=Zn("ceil"),Lc=Zn("floor"),Wc=Zn("round");return e.prototype=r.prototype,n.prototype=vf(r.prototype),n.prototype.constructor=n,i.prototype=vf(r.prototype),i.prototype.constructor=i,je.prototype=af?af(null):Es,Ie.prototype.clear=Ue,Ie.prototype["delete"]=Be,Ie.prototype.get=ke,Ie.prototype.has=Ne,Ie.prototype.set=ze,Le.prototype.push=Ge,Ve.prototype.clear=Ye,Ve.prototype["delete"]=He,Ve.prototype.get=qe,Ve.prototype.has=Xe,Ve.prototype.set=$e,Jo.Cache=Ie,e.after=Ho,e.ary=qo,e.assign=ac,e.assignIn=sc,e.assignInWith=fc,e.assignWith=cc,e.at=lc,e.before=Xo,e.bind=Kf,e.bindAll=jc,e.bindKey=Jf,e.chain=mo,e.chunk=Ri,e.compact=Ei,e.concat=Of,e.cond=Za,e.conforms=Ka,e.constant=Ja,e.countBy=Yf,e.create=Ju,e.curry=$o,e.curryRight=Qo,e.debounce=Zo,e.defaults=hc,e.defaultsDeep=pc,e.defer=tc,e.delay=ec,e.difference=Rf,e.differenceBy=Ef,e.differenceWith=Ff,e.drop=Fi,e.dropRight=ji,e.dropRightWhile=Ti,e.dropWhile=Si,e.fill=Ci,e.filter=Fo,e.flatMap=So,e.flatten=Ui,e.flattenDeep=Bi,e.flip=Ko,e.flow=Tc,e.flowRight=Sc,e.fromPairs=ki,e.functions=ua,e.functionsIn=aa,e.groupBy=Hf,e.initial=Li,e.intersection=jf,e.intersectionBy=Tf,e.intersectionWith=Sf,e.invert=dc,e.invertBy=vc,e.invokeMap=qf,e.iteratee=es,e.keyBy=Xf,e.keys=la,e.keysIn=ha,e.map=Uo,e.mapKeys=pa,e.mapValues=da,e.matches=rs,e.matchesProperty=ns,e.memoize=Jo,e.merge=mc,e.mergeWith=_c,e.method=Cc,e.methodOf=Dc,e.mixin=is,e.negate=tu,e.nthArg=as,e.omit=yc,e.omitBy=va,e.once=eu,e.orderBy=Bo,e.over=Ic,e.overArgs=rc,e.overEvery=Uc,e.overSome=Bc,e.partial=nc,e.partialRight=ic,e.partition=$f,e.pick=bc,e.pickBy=ga,e.property=ss,e.propertyOf=fs,e.pull=Cf,e.pullAll=Yi,e.pullAllBy=Hi,e.pullAt=Df,e.range=kc,e.rangeRight=Nc,e.rearg=oc,e.reject=zo,e.remove=qi,e.rest=ru,e.reverse=Xi,e.sampleSize=Wo,e.set=_a,e.setWith=ya,e.shuffle=Go,e.slice=$i,e.sortBy=Qf,e.sortedUniq=ro,e.sortedUniqBy=no,e.split=za,e.spread=nu,e.tail=io,e.take=oo,e.takeRight=uo,e.takeRightWhile=ao,e.takeWhile=so,e.tap=_o,e.throttle=iu,e.thru=yo,e.toArray=Hu,e.toPairs=ba,e.toPairsIn=xa,e.toPath=ls,e.toPlainObject=Qu,e.transform=wa,e.unary=ou,e.union=If,e.unionBy=Uf,e.unionWith=Bf,e.uniq=fo,e.uniqBy=co,e.uniqWith=lo,e.unset=Ma,e.unzip=ho,e.unzipWith=po,e.values=Pa,e.valuesIn=Aa,e.without=kf,e.words=Qa,e.wrap=uu,e.xor=Nf,e.xorBy=zf,e.xorWith=Lf,e.zip=Wf,e.zipObject=vo,e.zipObjectDeep=go,e.zipWith=Gf,e.extend=sc,e.extendWith=fc,is(e,e),e.add=ps,e.attempt=Fc,e.camelCase=xc,e.capitalize=Fa,e.ceil=zc,e.clamp=Oa,e.clone=au,e.cloneDeep=fu,e.cloneDeepWith=cu,e.cloneWith=su,e.deburr=ja,e.endsWith=Ta,e.eq=lu,e.escape=Sa,e.escapeRegExp=Ca,e.every=Eo,e.find=jo,e.findIndex=Di,e.findKey=ta,e.findLast=To,e.findLastIndex=Ii,e.findLastKey=ea,e.floor=Lc,e.forEach=Co,e.forEachRight=Do,e.forIn=ra,e.forInRight=na,e.forOwn=ia,e.forOwnRight=oa,e.get=sa,e.gt=hu,e.gte=pu,e.has=fa,e.hasIn=ca,e.head=Ni,e.identity=ts,e.includes=Io,e.indexOf=zi,e.inRange=Ra,e.invoke=gc,e.isArguments=du,e.isArray=uc,e.isArrayLike=vu,e.isArrayLikeObject=gu,e.isBoolean=mu,e.isDate=_u,e.isElement=yu,e.isEmpty=bu,e.isEqual=xu,e.isEqualWith=wu,e.isError=Mu,e.isFinite=Pu,e.isFunction=Au,e.isInteger=Ou,e.isLength=Ru,e.isMatch=ju,e.isMatchWith=Tu,e.isNaN=Su,e.isNative=Cu,e.isNil=Iu,e.isNull=Du,e.isNumber=Uu,e.isObject=Eu,e.isObjectLike=Fu,e.isPlainObject=Bu,e.isRegExp=ku,e.isSafeInteger=Nu,e.isString=zu,e.isSymbol=Lu,e.isTypedArray=Wu,e.isUndefined=Gu,e.join=Wi,e.kebabCase=wc,e.last=Gi,e.lastIndexOf=Vi,e.lowerCase=Mc,e.lowerFirst=Pc,e.lt=Vu,e.lte=Yu,e.max=ds,e.maxBy=vs,e.mean=gs,e.min=ms,e.minBy=_s,e.noConflict=os,e.noop=us,e.now=Zf,e.pad=Da,e.padEnd=Ia,e.padStart=Ua,e.parseInt=Ba,e.random=Ea,e.reduce=ko,e.reduceRight=No,e.repeat=ka,e.replace=Na,e.result=ma,e.round=Wc,e.runInContext=Q,e.sample=Lo,e.size=Vo,e.snakeCase=Oc,e.some=Yo,e.sortedIndex=Qi,e.sortedIndexBy=Zi,e.sortedIndexOf=Ki,e.sortedLastIndex=Ji,e.sortedLastIndexBy=to,e.sortedLastIndexOf=eo,e.startCase=Rc,e.startsWith=La,e.subtract=ys,e.sum=bs,e.sumBy=xs,e.template=Wa,e.times=cs,e.toInteger=qu,e.toLength=Xu,e.toLower=Ga,e.toNumber=$u,e.toSafeInteger=Zu,e.toString=Ku,e.toUpper=Va,e.trim=Ya,e.trimEnd=Ha,e.trimStart=qa,e.truncate=Xa,e.unescape=$a,e.uniqueId=hs,e.upperCase=Ec,e.upperFirst=Ac,e.each=Co,e.eachRight=Do,e.first=Ni,is(e,function(){var t={};return Er(e,function(r,n){js.call(e.prototype,n)||(t[n]=r)}),t}(),{chain:!1}),e.VERSION=K,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),c(["drop","take"],function(t,e){i.prototype[t]=function(r){var n=this.__filtered__;if(n&&!e)return new i(this);r=r===Z?1:Ks(qu(r),0);var o=this.clone();return n?o.__takeCount__=Js(r,o.__takeCount__):o.__views__.push({size:Js(r,At),type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==gt||r==_t;i.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ni(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),c(["head","last"],function(t,e){var r="take"+(e?"Right":"");i.prototype[t]=function(){return this[r](1).value()[0]}}),c(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[r](1)}}),i.prototype.compact=function(){return this.filter(ts)},i.prototype.find=function(t){return this.filter(t).head()},i.prototype.findLast=function(t){return this.reverse().find(t)},i.prototype.invokeMap=ru(function(t,e){return"function"==typeof t?new i(this):this.map(function(r){return Nr(r,t,e)})}),i.prototype.reject=function(t){return t=ni(t,3),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=qu(t);var r=this;return r.__filtered__&&(t>0||0>e)?new i(r):(0>t?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==Z&&(e=qu(e),r=0>e?r.dropRight(-e):r.take(e-t)),r)},i.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},i.prototype.toArray=function(){return this.take(At)},Er(i.prototype,function(t,r){var o=/^(?:filter|find|map|reject)|While$/.test(r),u=/^(?:head|last)$/.test(r),a=e[u?"take"+("last"==r?"Right":""):r],s=u||/^find/.test(r);a&&(e.prototype[r]=function(){var r=this.__wrapped__,f=u?[1]:arguments,c=r instanceof i,l=f[0],h=c||uc(r),p=function(t){var r=a.apply(e,m([t],f));return u&&d?r[0]:r};h&&o&&"function"==typeof l&&1!=l.length&&(c=h=!1);var d=this.__chain__,v=!!this.__actions__.length,g=s&&!d,_=c&&!v;if(!s&&h){r=_?r:new i(this);var y=t.apply(r,f);return y.__actions__.push({func:yo,args:[p],thisArg:Z}),new n(y,d)}return g&&_?t.apply(this,f):(y=this.thru(p),g?u?y.value()[0]:y.value():y)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var r=Rs[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?r.apply(this.value(),t):this[n](function(e){return r.apply(e,t)})}}),Er(i.prototype,function(t,r){var n=e[r];if(n){var i=n.name+"",o=df[i]||(df[i]=[]);o.push({name:r,func:n})}}),df[Vn(Z,tt).name]=[{name:"wrapper",func:Z}],i.prototype.clone=D,i.prototype.reverse=Gt,i.prototype.value=Oe,e.prototype.at=Vf,e.prototype.chain=bo,e.prototype.commit=xo,e.prototype.flatMap=wo,e.prototype.next=Mo,e.prototype.plant=Ao,e.prototype.reverse=Oo,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Ro,Gs&&(e.prototype[Gs]=Po),e}var Z,K="4.2.1",J=1,tt=2,et=4,rt=8,nt=16,it=32,ot=64,ut=128,at=256,st=512,ft=1,ct=2,lt=30,ht="...",pt=150,dt=16,vt=200,gt=1,mt=2,_t=3,yt="Expected a function",bt="__lodash_hash_undefined__",xt=1/0,wt=9007199254740991,Mt=1.7976931348623157e308,Pt=NaN,At=4294967295,Ot=At-1,Rt=At>>>1,Et="__lodash_placeholder__",Ft="[object Arguments]",jt="[object Array]",Tt="[object Boolean]",St="[object Date]",Ct="[object Error]",Dt="[object Function]",It="[object GeneratorFunction]",Ut="[object Map]",Bt="[object Number]",kt="[object Object]",Nt="[object RegExp]",zt="[object Set]",Lt="[object String]",Wt="[object Symbol]",Gt="[object WeakMap]",Vt="[object ArrayBuffer]",Yt="[object Float32Array]",Ht="[object Float64Array]",qt="[object Int8Array]",Xt="[object Int16Array]",$t="[object Int32Array]",Qt="[object Uint8Array]",Zt="[object Uint8ClampedArray]",Kt="[object Uint16Array]",Jt="[object Uint32Array]",te=/\b__p \+= '';/g,ee=/\b(__p \+=) '' \+/g,re=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ne=/&(?:amp|lt|gt|quot|#39|#96);/g,ie=/[&<>"'`]/g,oe=RegExp(ne.source),ue=RegExp(ie.source),ae=/<%-([\s\S]+?)%>/g,se=/<%([\s\S]+?)%>/g,fe=/<%=([\s\S]+?)%>/g,ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,pe=/[\\^$.*+?()[\]{}|]/g,de=RegExp(pe.source),ve=/^\s+|\s+$/g,ge=/^\s+/,me=/\s+$/,_e=/\\(\\)?/g,ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,be=/\w*$/,xe=/^0x/i,we=/^[-+]0x[0-9a-f]+$/i,Me=/^0b[01]+$/i,Pe=/^\[object .+?Constructor\]$/,Ae=/^0o[0-7]+$/i,Oe=/^(?:0|[1-9]\d*)$/,Re=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ee=/($^)/,Fe=/['\n\r\u2028\u2029\\]/g,je="\\ud800-\\udfff",Te="\\u0300-\\u036f\\ufe20-\\ufe23",Se="\\u20d0-\\u20f0",Ce="\\u2700-\\u27bf",De="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="\\xac\\xb1\\xd7\\xf7",Ue="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Be="\\u2018\\u2019\\u201c\\u201d",ke=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="A-Z\\xc0-\\xd6\\xd8-\\xde",ze="\\ufe0e\\ufe0f",Le=Ie+Ue+Be+ke,We="["+je+"]",Ge="["+Le+"]",Ve="["+Te+Se+"]",Ye="\\d+",He="["+Ce+"]",qe="["+De+"]",Xe="[^"+je+Le+Ye+Ce+De+Ne+"]",$e="\\ud83c[\\udffb-\\udfff]",Qe="(?:"+Ve+"|"+$e+")",Ze="[^"+je+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Je="[\\ud800-\\udbff][\\udc00-\\udfff]",tr="["+Ne+"]",er="\\u200d",rr="(?:"+qe+"|"+Xe+")",nr="(?:"+tr+"|"+Xe+")",ir=Qe+"?",or="["+ze+"]?",ur="(?:"+er+"(?:"+[Ze,Ke,Je].join("|")+")"+or+ir+")*",ar=or+ir+ur,sr="(?:"+[He,Ke,Je].join("|")+")"+ar,fr="(?:"+[Ze+Ve+"?",Ve,Ke,Je,We].join("|")+")",cr=RegExp(Ve,"g"),lr=RegExp($e+"(?="+$e+")|"+fr+ar,"g"),hr=RegExp("["+er+je+Te+Se+ze+"]"),pr=/[a-zA-Z0-9]+/g,dr=RegExp([tr+"?"+qe+"+(?="+[Ge,tr,"$"].join("|")+")",nr+"+(?="+[Ge,tr+rr,"$"].join("|")+")",tr+"?"+rr+"+",tr+"+",Ye,sr].join("|"),"g"),vr=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gr=["Array","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mr=-1,_r={};_r[Yt]=_r[Ht]=_r[qt]=_r[Xt]=_r[$t]=_r[Qt]=_r[Zt]=_r[Kt]=_r[Jt]=!0,_r[Ft]=_r[jt]=_r[Vt]=_r[Tt]=_r[St]=_r[Ct]=_r[Dt]=_r[Ut]=_r[Bt]=_r[kt]=_r[Nt]=_r[zt]=_r[Lt]=_r[Gt]=!1;var yr={};yr[Ft]=yr[jt]=yr[Vt]=yr[Tt]=yr[St]=yr[Yt]=yr[Ht]=yr[qt]=yr[Xt]=yr[$t]=yr[Ut]=yr[Bt]=yr[kt]=yr[Nt]=yr[zt]=yr[Lt]=yr[Wt]=yr[Qt]=yr[Zt]=yr[Kt]=yr[Jt]=!0,yr[Ct]=yr[Dt]=yr[Gt]=!1;var br={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},xr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},wr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Mr={"function":!0,object:!0},Pr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ar=parseFloat,Or=parseInt,Rr=Mr[typeof e]&&e&&!e.nodeType?e:null,Er=Mr[typeof t]&&t&&!t.nodeType?t:null,Fr=D(Rr&&Er&&"object"==typeof i&&i),jr=D(Mr[typeof self]&&self),Tr=D(Mr[typeof window]&&window),Sr=(Er&&Er.exports===Rr?Rr:null,D(Mr[typeof this]&&this)),Cr=Fr||Tr!==(Sr&&Sr.window)&&Tr||jr||Sr||Function("return this")(),Dr=Q();(Tr||jr||{})._=Dr,n=function(){return Dr}.call(e,r,e,t),!(n!==Z&&(t.exports=n))}).call(this)}).call(e,r(148)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.WebGlBuffer=e.WebGlTexture=e.WebGlProgram=e.WebGlRenderer=e.WebGlContext=e.TextureManager=e.ShaderManager=e.ShaderSource=e.Program=e.cmd=void 0;var o=r(108),u=i(o),a=r(150),s=n(a),f=r(155),c=n(f),l=r(156),h=n(l),p=r(157),d=n(p),v=r(159),g=n(v),m=r(160),_=n(m),y=r(151),b=n(y),x=r(158),w=n(x),M=r(135),P=n(M);e.cmd=u,e.Program=s["default"],e.ShaderSource=c["default"],e.ShaderManager=h["default"],e.TextureManager=d["default"],e.WebGlContext=g["default"],e.WebGlRenderer=_["default"],e.WebGlProgram=b["default"],e.WebGlTexture=w["default"],e.WebGlBuffer=P["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e,r){a.addUid(this),a.object.definePropertiesPublicRO(this,{name:t,vertexShaderName:e?e:t,fragmentShaderName:r?r:t})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var u=r(36),a=i(u),s=r(151),f=n(s);o.prototype.linkProgram=function(t){var e=t.glx,r=e.gl,n=e.glShader(t.shader.getVertexShader(this.vertexShaderName));if(n){var i=e.glShader(t.shader.getFragmentShader(this.fragmentShaderName));if(i){var o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Could not link webgl program: "+this.name);return new f["default"](this,o,e)}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r){this.program=t,this.glProgram=e,this.glx=r,o(this),(0,a["default"])(this)}function o(t){
var e=t.glx.gl,r=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniformNames=[],t.uniform={};var n,i;for(n=0;r>n;++n)i=e.getActiveUniform(t.glProgram,n),t.uniform[i.name]=new f["default"](t,i),t.uniformNames.push(i.name);(0,a["default"])(t.uniform);var o=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attribNames=[],t.attrib={};var u;for(n=0;o>n;++n)u=e.getActiveAttrib(t.glProgram,n),t.attrib[u.name]=new l["default"](t,u),t.attribNames.push(u.name);(0,a["default"])(t.attrib)}var u=r(97),a=n(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var s=r(152),f=n(s),c=r(154),l=n(c);i.prototype.use=function(){this.glx.activeProgram!==this&&(this.glx.activeProgram=this,this.glx.gl.useProgram(this.glProgram))}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){h.object.definePropertiesPublicRO(this,{program:t,info:e,location:t.glx.gl.getUniformLocation(t.glProgram,e.name)}),(0,d["default"])(this),u(this),(0,c["default"])(this)}function u(t){t.info.type===t.program.glx.gl.SAMPLER_2D?(t.isSampler2d=!0,t._texUnit=-1,(0,s["default"])(t,{texUnit:{get:function(){return this._texUnit},set:function(t){this._texUnit!==t&&(this._texUnit=t,this.valueChanged=!0)}}})):t.isSampler2d=!1}var a=r(73),s=i(a),f=r(101),c=i(f);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var l=r(36),h=n(l),p=r(153),d=i(p);o.prototype.upload=function(t){if(this.isSampler2d&&(this.texUnit=this.value.upload().bind()),this.valueChanged){switch(this.info.type){case t.FLOAT:t.uniform1f(this.location,this.value);break;case t.FLOAT_VEC2:t.uniform2f(this.location,this.value[0],this.value[1]);break;case t.FLOAT_VEC3:t.uniform3f(this.location,this.value[0],this.value[1],this.value[2]);break;case t.FLOAT_VEC4:t.uniform4f(this.location,this.value[0],this.value[1],this.value[2],this.value[3]);break;case t.FLOAT_MAT4:t.uniformMatrix4fv(this.location,t.FALSE,this.value.mat4);break;case t.SAMPLER_2D:t.uniform1i(this.location,this.texUnit)}this.valueChanged=!1}}},function(t,e){"use strict";function r(t){return t.setValue=function(t,e){var r=null!=t.serial;e&&console.log("setValue(): hasSerial=",r,"valueChanged=",this.valueChanged,"val!==this.value",t!==this.value,"val.serial=",t.serial,"this.valueSerial=",this.valueSerial,"val.serial!==this.valueSerial=",t.serial!==this.valueSerial),this.valueChanged||(this.valueChanged=t!==this.value,!this.valueChanged&&r&&(this.valueChanged=t.serial!==this.valueSerial)),r&&(this.valueSerial=t.serial),this.value=t},t.value=null,t.valueSerial=0,t.valueChanged=!1,t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){f.object.definePropertiesPublicRO(this,{program:t,info:e,location:t.glx.gl.getAttribLocation(t.glProgram,e.name)}),t.glx.gl.enableVertexAttribArray(this.location),(0,l["default"])(this),(0,a["default"])(this)}var u=r(101),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s),c=r(153),l=i(c);o.prototype.upload=function(){var t=this.value;t.buffer.bindBuffer(),this.valueChanged&&(t.buffer.vertexAttribPointer(this.location,t.size,t.stride,t.offset),this.valueChanged=!1)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r,n){a.Resource.call(this,t,"source"),this.shaderType=e,this.name=r,this.source=n}var o=r(81),u=n(o);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var a=r(114);i.prototype=(0,u["default"])(a.Resource.prototype),i.prototype.constructor=i,i.prototype.compile=function(t){if(this.ready){var e=t.createShader(t[this.shaderType]);if(t.shaderSource(e,this.source),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(e));return e}},i.VERTEX_SHADER="VERTEX_SHADER",i.FRAGMENT_SHADER="FRAGMENT_SHADER"},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){f.object.definePropertyPublicRO(this,"app",t),f.object.definePropertiesPrivateRO(this,{_vertexShader:new a["default"],_fragmentShader:new a["default"],_programs:new a["default"]})}var u=r(121),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s),c=r(155),l=i(c),h=r(150),p=i(h);o.prototype.addProgram=function(t,e,r){return this._programs.set(t,new p["default"](t,e,r)),this},o.prototype.getProgram=function(t){return this._programs.get(t)},o.prototype.addShader=function(t){return t.shaderType===l["default"].VERTEX_SHADER?this._vertexShader.set(t.name,t):t.shaderType===l["default"].FRAGMENT_SHADER&&this._fragmentShader.set(t.name,t),this},o.prototype.addVertexShader=function(t,e){return this.addShader(new l["default"](this.app,l["default"].VERTEX_SHADER,t,e))},o.prototype.addFragmentShader=function(t,e){return this.addShader(new l["default"](this.app,l["default"].FRAGMENT_SHADER,t,e))},o.prototype.loadVertexShader=function(t,e){return this.addShader(new l["default"](this.app,l["default"].VERTEX_SHADER,t).load(e))},o.prototype.loadFragmentShader=function(t,e){return this.addShader(new l["default"](this.app,l["default"].FRAGMENT_SHADER,t).load(e))},o.prototype.getVertexShader=function(t){return this._vertexShader.get(t)},o.prototype.getFragmentShader=function(t){return this._fragmentShader.get(t)}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){f.object.definePropertyPublicRO(this,"app",t),f.object.definePropertiesPrivateRO(this,{_textureCache:new a["default"],_boundTextures:[]});for(var e=0;e<t.glx.MAX_TEXTURE_IMAGE_UNITS;e++)this._boundTextures[e]=null;this._lastBoundTexUnit=0}var u=r(121),a=i(u);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(36),f=n(s),c=r(158),l=i(c);o.prototype.bindWebGlTexture=function(t){var e=this._boundTextures.indexOf(t);if(0>e){for(var r=0;r<this._boundTextures.length;r++)if(!this._boundTextures[r]){e=r,this._boundTextures[r]=t;break}var n=this.app.glx;if(0>e){e=this._lastBoundTexUnit;var i=this._boundTextures[e];i&&(i.texUnit=-1),this._lastBoundTexUnit=(this._lastBoundTexUnit+1)%n.MAX_TEXTURE_IMAGE_UNITS}n.activeTexture(e),n.bindTexture2d(t.glId),t.texUnit=e}return e},o.prototype.findOrCreateWebGlTexture=function(t){var e=t.texture?t.texture:t,r=e.image.domElement?e.image.domElement:e.image,n=e.image.uid?e.image.uid:r,i=this._textureCache.get(n);return i||(i=new l["default"](this.app.glx),i.image=r,this._textureCache.set(n,i)),i}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r){this.glx=t,this.width=0,this.height=0,this.isFlipY=e===!0,this.isRepeatable=r===!0,this.image=null,o(this),(0,l["default"])(this)}function o(t){t.glId=0,t.needsInit=!0,t.needsConf=!0,t.needsUpload=!0,t.texUnit=-1}function u(t){t.needsInit&&(t.glId=t.glx.gl.createTexture(),t.needsInit=!1)}function a(t){if(t.glId||u(t),t.needsConf&&t.canConf){t.bind();var e=t.glx.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.isFlipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);var r=t.isRepeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,null),t.needsConf=!1}}var s=r(73),f=n(s),c=r(101),l=n(c);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i,(0,f["default"])(i.prototype,{isRepeatable:{get:function(){return this._isRepeatable},set:function(t){var e=!!t;this._isRepeatable!==e&&(this._isRepeatable=e,this.needsConf=!0)}},width:{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.needsConf=!0)}},height:{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.needsConf=!0)}},image:{get:function(){return this._image},set:function(t){this._image!==t&&(this._image=t,this.needsUpload=!0,t?(this.width=t.width,this.height=t.height):(this.width=0,this.height=0))}},canConf:{get:function(){return this.width>0&&this.height>0}},canUpload:{get:function(){return this.image&&this.width>0&&this.height>0}}}),i.prototype.bind=function(){return this.glId||u(this),this.glx.app.texture.bindWebGlTexture(this)},i.prototype.upload=function(){if(a(this),this.needsUpload&&this.canUpload){this.bind();var t=this.glx.gl;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.image),this.needsUpload=!1}return this},i.prototype.destroy=function(){o(this)}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(!t)throw new Error("[new Picimo.webgl.WebGlContext] gl is undefined!");p.object.definePropertyPublicRO(this,"gl",t),p.object.definePropertiesPrivateRO(this,{_boundBuffers:new l["default"],_shaders:new l["default"],_programs:new l["default"]}),a(this),u(this),this.app=null,this.activeProgram=null,this.activeTexture(0),this._boundTextures=[];for(var e=0;e<this.MAX_TEXTURE_IMAGE_UNITS;e++)this._boundTextures[e]={TEXTURE_2D:null};(0,f["default"])(this)}function u(t){var e=t.gl;p.object.definePropertiesPublicRO(t,{MAX_TEXTURE_SIZE:e.getParameter(e.MAX_TEXTURE_SIZE),MAX_TEXTURE_IMAGE_UNITS:e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)})}function a(t){t.OES_element_index_uint=t.gl.getExtension("OES_element_index_uint"),t.OES_element_index_uint||console.error("WebGL don't support the OES_element_index_uint extension!")}var s=r(101),f=i(s),c=r(121),l=i(c);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var h=r(36),p=n(h);o.prototype.activeTexture=function(t){var e=this.gl,r=e.TEXTURE0+t;this.activeTexUnit!==r&&(this.activeTexUnit=r,e.activeTexture(this.activeTexUnit))},o.prototype.bindTexture2d=function(t){var e=this.gl,r=this._boundTextures[this.activeTexUnit-e.TEXTURE0];r.TEXTURE_2D!==t&&(r.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))},o.prototype.bindBuffer=function(t,e){this._boundBuffers.get(t)!==e&&(this._boundBuffers.set(t,e),this.gl.bindBuffer(t,e))},o.prototype.bindArrayBuffer=function(t){this.bindBuffer(this.gl.ARRAY_BUFFER,t)},o.prototype.bindElementArrayBuffer=function(t){this.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t)},o.prototype.glShader=function(t){if(void 0!==t){var e=this._shaders.get(t.uid);return void 0===e&&(e=t.compile(this.gl),void 0!==e&&this._shaders.set(t.uid,e)),e}},o.prototype.glProgram=function(t){if(void 0!==t){var e=this._programs.get(t.uid);return void 0===e&&(e=t.linkProgram(this.app),void 0!==e&&this._programs.set(t.uid,e)),e}}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){y.object.definePropertyPublicRO(this,"app",t),u(this),a(this)}function u(t){t.cmdQueue=new y.Queue,t._renderCmd=null,t.uniforms=new v["default"],t.attributes=new v["default"],t.program=null,t.currentProgram=null,t.currentPipeline=null,t.currentProgramFromCmds=null,t.defaultBlendMode=b.BlendMode.DEFAULT,t.currentBlendMode=null,t.renderToTexture=null,t.debugOutFrame=!1}function a(t){t.pipeline=new v["default"],t.pipelines=[]}function s(t){var e=t.app.gl,r=t.app.backgroundColor;e.clearColor(r.getRed(),r.getGreen(),r.getBlue(),r.getAlpha()),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function f(t){t.cmdQueue.clear(),t.currentPipeline=null,t.renderToTexture=null,t.currentProgramFromCmds=null,t.debugOutFrame=!1}function c(t){p(t,"finish"),t.debugOutFrame&&(console.groupCollapsed("Picimo.webgl.WebGlRenderer Command Queue ("+t.cmdQueue.length+")"),h(t)),l(t),t.debugOutFrame&&(console.debug("WebGlRenderer",t),console.groupEnd())}function l(t){var e=t._renderCmd;e||(e=t._renderCmd=w["default"].bind(t,t)),t.cmdQueue.forEach(e)}function h(t){t.cmdQueue.forEach(function(t){"id"in t?console.log(t.id,t):console.log(t)})}function p(t,e){var r,n,i;for(r=t.pipelines.length;r--;)n=t.pipelines[r],i=n[e],i&&i.call(n)}var d=r(121),v=i(d);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var g=r(147),m=i(g),_=r(36),y=n(_),b=r(108),x=r(161),w=i(x);o.prototype.filterPipelineByInstanceof=function(t){return m["default"].filter(this.pipelines,function(e){return e instanceof t})},o.prototype.onInitGl=function(){},o.prototype.onResize=function(){var t=this.app;t.gl.viewport(0,0,t.width,t.height)},o.prototype.onStartFrame=function(){f(this),p(this,"reset"),s(this),this.activateBlendMode(this.defaultBlendMode)},o.prototype.activateBlendMode=function(t){this.currentBlendMode!==t&&(this.currentBlendMode=t,t&&t.activate(this.app.gl))},o.prototype.onEndFrame=function(){120===this.app.frameNo&&this.dumpCommandQueue(),c(this)},o.prototype.addPipeline=function(t,e){return t&&!e&&(e=t,t="pipe_"+this.pipelines.length),this.pipeline[t]=e,this.pipelines.push(e),e},o.prototype.activatePipeline=function(t){return t!==this.currentPipeline&&(this.currentPipeline&&this.currentPipeline.flush&&this.currentPipeline.flush(),this.currentPipeline=t),this},o.prototype.addRenderCommand=function(t,e){e&&this.activatePipeline(e),t.renderToTexture&&this.flush(),this.cmdQueue.push(t)},o.prototype.flush=function(){this.currentPipeline&&this.currentPipeline.flush()},o.prototype.dumpCommandQueue=function(){this.debugOutFrame=!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var r;void 0!==e.blendMode&&(e.blendMode===!1?r=t.defaultBlendMode:e.blendMode&&(r=e.blendMode),t.activateBlendMode(r)),void 0!==e.renderToTexture&&(e.renderToTexture!==!1?(t.renderToTexture=e.renderToTexture,t.renderToTexture.activate()):(t.renderToTexture.deactivate(),t.renderToTexture=null));var n,i;if(e.uniforms)for(n in e.uniforms)e.uniforms.hasOwnProperty(n)&&(i=t.uniforms.get(n),i||(i=new f["default"],t.uniforms.set(n,i)),i.exec(e.uniforms[n]));if(e.attributes)for(n in e.attributes)e.attributes.hasOwnProperty(n)&&t.attributes.set(n,e.attributes[n]);var u;if(e.program&&"string"==typeof e.program){if(u=t.app.shader.getProgram(e.program),!u)return void o("unknown program:",e.program);t.program=e.program=t.app.glx.glProgram(u)}e.drawElements&&(0,a["default"])(t,e.drawElements)}function o(){console.warn.apply(console,["[Picimo.webgl.WebGlRenderer#renderCommand]"].concat(Array.prototype.slice.apply(arguments)))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var u=r(162),a=n(u),s=r(163),f=n(s)},function(t,e){"use strict";function r(t,e){var r,n,i,o,u,a,s=t.app.gl,f=t.program,c=!1;t.currentProgram&&t.currentProgram===f||(t.currentProgram=f,f.use(),c=!0);var l;for(i=0,o=f.uniformNames.length;o>i;i++)u=f.uniformNames[i],a=t.program.uniform[u],l=t.uniforms.get(u),null!=l&&(l=l.value),t.debugOutFrame&&(console.groupCollapsed("%cuniform","font-weight:bold;color:#26f",u),console.log(a),console.log(l)),a.setValue(l,t.debugOutFrame),t.debugOutFrame&&(c&&console.log("programChanged",c),console.groupEnd(u)),c&&(a.valueChanged=!0),a.upload(s);for(i=0,o=f.attribNames.length;o>i;i++)u=f.attribNames[i],r=t.program.attrib[u],r.setValue(t.attributes.get(u)),c&&(r.valueChanged=!0),r.upload(s);n=e.elementType||s.TRIANGLES,e.buffer.bindBuffer().drawElements(n,e.count,e.offset)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e){"use strict";function r(){this.value=null,this.commands=[]}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r,r.prototype.exec=function(t){var e;if(null!=t){if(t.isUniformValueCmd)e=t.getValue(this.value),t.isRestorable&&(t.prevValue=this.value,this.commands.push(t));else if(t.isUniformValueRestoreCmd){for(var r=0;r<this.commands.length;r++)if(this.commands[r].uid===t.uid){e=this.commands[r].prevValue,this.commands.splice(r,this.commands.length-r);break}void 0===e&&(e=this.value)}else e=t;this.value=e}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteFactory=void 0;var i=r(165),o=n(i);e.SpriteFactory=o["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=r(121),o=n(i);Object.defineProperty(e,"__esModule",{value:!0});var u=r(114);e["default"]=function(){var t=new o["default"],e={createDescriptor:function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];var o=new(Function.prototype.bind.apply(u.VertexObjectDescriptor,[null].concat(n)));return t.set(e,o),o},getDescriptor:function(){var e=arguments.length<=0||void 0===arguments[0]?"default":arguments[0];return e instanceof u.VertexObjectDescriptor?e:t.get(e)},createSprite:function(t){for(var e=this.getDescriptor(t),r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];return e?e.create.apply(e,n):void 0}};return e}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return(0,o["default"])(t),(0,a["default"])(t),t};var i=r(167),o=n(i),u=r(168),a=n(u)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.createDescriptor("default",function(){this.setAnchor(0,0),this.setRgb(1,1,1)},4,16,[{name:"xwyh",size:2,attrNames:["xw","yh"]},{name:"size",size:2,attrNames:["width","height"],uniform:!0},{name:"scale",size:2,attrNames:["sx","sy"],uniform:!0},{name:"pos",size:2,attrNames:["x","y"],uniform:!0},{name:"texCoords",size:2,attrNames:["s","t"]},{name:"rotate",size:1,uniform:!0},{name:"texUnit",size:1,uniform:!0},{name:"rgb",size:3,attrNames:["r","g","b"],uniform:!0},{name:"opacity",size:1,uniform:!0}],{rot_texUnit:{size:2,offset:10,uniform:!0},color:{size:4,offset:12,uniform:!0}});return e.proto.setAnchor=function(t,e){this.setXwyh(-.5-t,.5-e,.5-t,.5-e,.5-t,-.5-e,-.5-t,-.5-e)},e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.createDescriptor("simple",null,4,12,[{name:"position",size:3,attrNames:["x","y","z"]},{name:"rotate",size:1,uniform:!0},{name:"texCoords",size:2,attrNames:["s","t"]},{name:"translate",size:2,uniform:!0,attrNames:["tx","ty"]},{name:"scale",size:1,uniform:!0},{name:"opacity",size:1,uniform:!0}],{pos2d:{size:2,offset:0},posZ:{size:1,offset:2,uniform:!0},uv:"texCoords"});return r(169)(e.proto),e}},function(t,e){"use strict";!function(){t.exports=function(t){t.setTexCoordsByViewport=function(t,e,r,n){var i=0===t.x?0:t.x/e,o=(t.x+t.width)/e,u=1-(t.y+t.height)/r,a=0===t.y?1:1-t.y/r;void 0!==n&&(i*=n,o*=n,u*=n,a*=n),this.setTexCoords(i,u,o,u,o,a,i,a)},t.setSize=function(t,e){var r=.5*t,n=.5*(null==e?t:e);this.setPos2d(-r,n,r,n,r,-n,-r,-n)},Object.defineProperty(t,"rotateDegree",{get:function(){return 180*this.rotate/Math.PI},set:function(t){this.rotate=t*(Math.PI/180)},enumerable:!0}),Object.defineProperty(t,"z",{get:function(){return this.z0},set:function(t){this.z0=t,this.z1=t,this.z2=t,this.z3=t},enumerable:!0})}}()}])});